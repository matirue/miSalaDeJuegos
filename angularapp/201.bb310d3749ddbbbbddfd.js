(self.webpackChunkmi_sala_de_juegos=self.webpackChunkmi_sala_de_juegos||[]).push([[201],{8259:function(vl){vl.exports=function(){"use strict";const nt=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),B="SweetAlert2:",$e=d=>d.charAt(0).toUpperCase()+d.slice(1),be=d=>Array.prototype.slice.call(d),u=d=>{console.warn("".concat(B," ").concat("object"==typeof d?d.join(" "):d))},fe=d=>{console.error("".concat(B," ").concat(d))},zi=[],wr=(d,h)=>{(d=>{zi.includes(d)||(zi.push(d),u(d))})('"'.concat(d,'" is deprecated and will be removed in the next major release. Please use "').concat(h,'" instead.'))},vr=d=>"function"==typeof d?d():d,je=d=>d&&"function"==typeof d.toPromise,Ot=d=>je(d)?d.toPromise():Promise.resolve(d),br=d=>d&&Promise.resolve(d)===d,Ki=d=>d instanceof Element||(d=>"object"==typeof d&&d.jquery)(d),Hi=d=>{const h={};for(const g in d)h[d[g]]="swal2-"+d[g];return h},T=Hi(["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error"]),In=Hi(["success","warning","info","question","error"]),_e=()=>document.body.querySelector(".".concat(T.container)),En=d=>{const h=_e();return h?h.querySelector(d):null},ze=d=>En(".".concat(d)),W=()=>ze(T.popup),Cn=()=>ze(T.icon),I=()=>ze(T.title),Yt=()=>ze(T["html-container"]),_s=()=>ze(T.image),vt=()=>ze(T["progress-steps"]),K=()=>ze(T["validation-message"]),Qe=()=>En(".".concat(T.actions," .").concat(T.confirm)),bt=()=>En(".".concat(T.actions," .").concat(T.deny)),Xt=()=>En(".".concat(T.loader)),P=()=>En(".".concat(T.actions," .").concat(T.cancel)),en=()=>ze(T.actions),F=()=>ze(T.footer),Mt=()=>ze(T["timer-progress-bar"]),An=()=>ze(T.close),xs=()=>{const d=be(W().querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])')).sort((g,v)=>(g=parseInt(g.getAttribute("tabindex")))>(v=parseInt(v.getAttribute("tabindex")))?1:g<v?-1:0),h=be(W().querySelectorAll('\n  a[href],\n  area[href],\n  input:not([disabled]),\n  select:not([disabled]),\n  textarea:not([disabled]),\n  button:not([disabled]),\n  iframe,\n  object,\n  embed,\n  [tabindex="0"],\n  [contenteditable],\n  audio[controls],\n  video[controls],\n  summary\n')).filter(g=>"-1"!==g.getAttribute("tabindex"));return(d=>{const h=[];for(let g=0;g<d.length;g++)-1===h.indexOf(d[g])&&h.push(d[g]);return h})(d.concat(h)).filter(g=>ee(g))},kn=()=>!Nn()&&!document.body.classList.contains(T["no-backdrop"]),Nn=()=>document.body.classList.contains(T["toast-shown"]),tn={previousBodyPadding:null},G=(d,h)=>{if(d.textContent="",h){const v=(new DOMParser).parseFromString(h,"text/html");be(v.querySelector("head").childNodes).forEach(C=>{d.appendChild(C)}),be(v.querySelector("body").childNodes).forEach(C=>{d.appendChild(C)})}},_t=(d,h)=>{if(!h)return!1;const g=h.split(/\s+/);for(let v=0;v<g.length;v++)if(!d.classList.contains(g[v]))return!1;return!0},me=(d,h,g)=>{if(((d,h)=>{be(d.classList).forEach(g=>{!Object.values(T).includes(g)&&!Object.values(In).includes(g)&&!Object.values(h.showClass).includes(g)&&d.classList.remove(g)})})(d,h),h.customClass&&h.customClass[g]){if("string"!=typeof h.customClass[g]&&!h.customClass[g].forEach)return u("Invalid type of customClass.".concat(g,'! Expected string or iterable object, got "').concat(typeof h.customClass[g],'"'));z(d,h.customClass[g])}},Ts=(d,h)=>{if(!h)return null;switch(h){case"select":case"textarea":case"file":return rt(d,T[h]);case"checkbox":return d.querySelector(".".concat(T.checkbox," input"));case"radio":return d.querySelector(".".concat(T.radio," input:checked"))||d.querySelector(".".concat(T.radio," input:first-child"));case"range":return d.querySelector(".".concat(T.range," input"));default:return rt(d,T.input)}},$i=d=>{if(d.focus(),"file"!==d.type){const h=d.value;d.value="",d.value=h}},Is=(d,h,g)=>{!d||!h||("string"==typeof h&&(h=h.split(/\s+/).filter(Boolean)),h.forEach(v=>{d.forEach?d.forEach(C=>{g?C.classList.add(v):C.classList.remove(v)}):g?d.classList.add(v):d.classList.remove(v)}))},z=(d,h)=>{Is(d,h,!0)},ct=(d,h)=>{Is(d,h,!1)},rt=(d,h)=>{for(let g=0;g<d.childNodes.length;g++)if(_t(d.childNodes[g],h))return d.childNodes[g]},Lt=(d,h,g)=>{g==="".concat(parseInt(g))&&(g=parseInt(g)),g||0===parseInt(g)?d.style[h]="number"==typeof g?"".concat(g,"px"):g:d.style.removeProperty(h)},ce=(d,h="flex")=>{d.style.display=h},Te=d=>{d.style.display="none"},Ae=(d,h,g,v)=>{const C=d.querySelector(h);C&&(C.style[g]=v)},nn=(d,h,g)=>{h?ce(d,g):Te(d)},ee=d=>!(!d||!(d.offsetWidth||d.offsetHeight||d.getClientRects().length)),Es=d=>d.scrollHeight>d.clientHeight,_r=d=>{const h=window.getComputedStyle(d),g=parseFloat(h.getPropertyValue("animation-duration")||"0"),v=parseFloat(h.getPropertyValue("transition-duration")||"0");return g>0||v>0},xr=(d,h=!1)=>{const g=Mt();ee(g)&&(h&&(g.style.transition="none",g.style.width="100%"),setTimeout(()=>{g.style.transition="width ".concat(d/1e3,"s linear"),g.style.width="0%"},10))},Cs=()=>"undefined"==typeof window||"undefined"==typeof document,As='\n <div aria-labelledby="'.concat(T.title,'" aria-describedby="').concat(T["html-container"],'" class="').concat(T.popup,'" tabindex="-1">\n   <button type="button" class="').concat(T.close,'"></button>\n   <ul class="').concat(T["progress-steps"],'"></ul>\n   <div class="').concat(T.icon,'"></div>\n   <img class="').concat(T.image,'" />\n   <h2 class="').concat(T.title,'" id="').concat(T.title,'"></h2>\n   <div class="').concat(T["html-container"],'" id="').concat(T["html-container"],'"></div>\n   <input class="').concat(T.input,'" />\n   <input type="file" class="').concat(T.file,'" />\n   <div class="').concat(T.range,'">\n     <input type="range" />\n     <output></output>\n   </div>\n   <select class="').concat(T.select,'"></select>\n   <div class="').concat(T.radio,'"></div>\n   <label for="').concat(T.checkbox,'" class="').concat(T.checkbox,'">\n     <input type="checkbox" />\n     <span class="').concat(T.label,'"></span>\n   </label>\n   <textarea class="').concat(T.textarea,'"></textarea>\n   <div class="').concat(T["validation-message"],'" id="').concat(T["validation-message"],'"></div>\n   <div class="').concat(T.actions,'">\n     <div class="').concat(T.loader,'"></div>\n     <button type="button" class="').concat(T.confirm,'"></button>\n     <button type="button" class="').concat(T.deny,'"></button>\n     <button type="button" class="').concat(T.cancel,'"></button>\n   </div>\n   <div class="').concat(T.footer,'"></div>\n   <div class="').concat(T["timer-progress-bar-container"],'">\n     <div class="').concat(T["timer-progress-bar"],'"></div>\n   </div>\n </div>\n').replace(/(^|\n)\s*/g,""),qt=()=>{jt.isVisible()&&jt.resetValidationMessage()},Pa=d=>{const h=(()=>{const d=_e();return!!d&&(d.remove(),ct([document.documentElement,document.body],[T["no-backdrop"],T["toast-shown"],T["has-column"]]),!0)})();if(Cs())return void fe("SweetAlert2 requires document to initialize");const g=document.createElement("div");g.className=T.container,h&&z(g,T["no-transition"]),G(g,As);const v=(d=>"string"==typeof d?document.querySelector(d):d)(d.target);v.appendChild(g),(d=>{const h=W();h.setAttribute("role",d.toast?"alert":"dialog"),h.setAttribute("aria-live",d.toast?"polite":"assertive"),d.toast||h.setAttribute("aria-modal","true")})(d),(d=>{"rtl"===window.getComputedStyle(d).direction&&z(_e(),T.rtl)})(v),(()=>{const d=W(),h=rt(d,T.input),g=rt(d,T.file),v=d.querySelector(".".concat(T.range," input")),C=d.querySelector(".".concat(T.range," output")),q=rt(d,T.select),ae=d.querySelector(".".concat(T.checkbox," input")),Ne=rt(d,T.textarea);h.oninput=qt,g.onchange=qt,q.onchange=qt,ae.onchange=qt,Ne.oninput=qt,v.oninput=()=>{qt(),C.value=v.value},v.onchange=()=>{qt(),v.nextSibling.value=v.value}})()},Tr=(d,h)=>{d instanceof HTMLElement?h.appendChild(d):"object"==typeof d?Ir(d,h):d&&G(h,d)},Ir=(d,h)=>{d.jquery?ks(h,d):G(h,d.toString())},ks=(d,h)=>{if(d.textContent="",0 in h)for(let g=0;g in h;g++)d.appendChild(h[g].cloneNode(!0));else d.appendChild(h.cloneNode(!0))},Ft=(()=>{if(Cs())return!1;const d=document.createElement("div"),h={WebkitAnimation:"webkitAnimationEnd",OAnimation:"oAnimationEnd oanimationend",animation:"animationend"};for(const g in h)if(Object.prototype.hasOwnProperty.call(h,g)&&void 0!==d.style[g])return h[g];return!1})(),Oa=(d,h)=>{const g=en(),v=Xt(),C=Qe(),q=bt(),ae=P();h.showConfirmButton||h.showDenyButton||h.showCancelButton?ce(g):Te(g),me(g,h,"actions"),Dn(C,"confirm",h),Dn(q,"deny",h),Dn(ae,"cancel",h),function(d,h,g,v){if(!v.buttonsStyling)return ct([d,h,g],T.styled);z([d,h,g],T.styled),v.confirmButtonColor&&(d.style.backgroundColor=v.confirmButtonColor,z(d,T["default-outline"])),v.denyButtonColor&&(h.style.backgroundColor=v.denyButtonColor,z(h,T["default-outline"])),v.cancelButtonColor&&(g.style.backgroundColor=v.cancelButtonColor,z(g,T["default-outline"]))}(C,q,ae,h),h.reverseButtons&&(g.insertBefore(ae,v),g.insertBefore(q,v),g.insertBefore(C,v)),G(v,h.loaderHtml),me(v,h,"loader")};function Dn(d,h,g){nn(d,g["show".concat($e(h),"Button")],"inline-block"),G(d,g["".concat(h,"ButtonText")]),d.setAttribute("aria-label",g["".concat(h,"ButtonAriaLabel")]),d.className=T[h],me(d,g,"".concat(h,"Button")),z(d,g["".concat(h,"ButtonClass")])}const Se=(d,h)=>{const g=_e();!g||(function(d,h){"string"==typeof h?d.style.background=h:h||z([document.documentElement,document.body],T["no-backdrop"])}(g,h.backdrop),function(d,h){h in T?z(d,T[h]):(u('The "position" parameter is not valid, defaulting to "center"'),z(d,T.center))}(g,h.position),function(d,h){if(h&&"string"==typeof h){const g="grow-".concat(h);g in T&&z(d,T[g])}}(g,h.grow),me(g,h,"container"))};var j={promise:new WeakMap,innerParams:new WeakMap,domCache:new WeakMap};const Fa=["input","file","range","select","radio","checkbox","textarea"],Ra=d=>{if(!ke[d.input])return fe('Unexpected type of input! Expected "text", "email", "password", "number", "tel", "select", "radio", "checkbox", "textarea", "file" or "url", got "'.concat(d.input,'"'));const h=Ar(d.input),g=ke[d.input](h,d);ce(g),setTimeout(()=>{$i(g)})},Er=(d,h)=>{const g=Ts(W(),d);if(g){(d=>{for(let h=0;h<d.attributes.length;h++){const g=d.attributes[h].name;["type","value","style"].includes(g)||d.removeAttribute(g)}})(g);for(const v in h)g.setAttribute(v,h[v])}},Cr=d=>{const h=Ar(d.input);d.customClass&&z(h,d.customClass.input)},On=(d,h)=>{(!d.placeholder||h.inputPlaceholder)&&(d.placeholder=h.inputPlaceholder)},Rt=(d,h,g)=>{if(g.inputLabel){d.id=T.input;const v=document.createElement("label"),C=T["input-label"];v.setAttribute("for",d.id),v.className=C,z(v,g.customClass.inputLabel),v.innerText=g.inputLabel,h.insertAdjacentElement("beforebegin",v)}},Ar=d=>{const h=T[d]?T[d]:T.input;return rt(W(),h)},ke={};ke.text=ke.email=ke.password=ke.number=ke.tel=ke.url=(d,h)=>("string"==typeof h.inputValue||"number"==typeof h.inputValue?d.value=h.inputValue:br(h.inputValue)||u('Unexpected type of inputValue! Expected "string", "number" or "Promise", got "'.concat(typeof h.inputValue,'"')),Rt(d,d,h),On(d,h),d.type=h.input,d),ke.file=(d,h)=>(Rt(d,d,h),On(d,h),d),ke.range=(d,h)=>{const g=d.querySelector("input"),v=d.querySelector("output");return g.value=h.inputValue,g.type=h.input,v.value=h.inputValue,Rt(g,d,h),d},ke.select=(d,h)=>{if(d.textContent="",h.inputPlaceholder){const g=document.createElement("option");G(g,h.inputPlaceholder),g.value="",g.disabled=!0,g.selected=!0,d.appendChild(g)}return Rt(d,d,h),d},ke.radio=d=>(d.textContent="",d),ke.checkbox=(d,h)=>{const g=Ts(W(),"checkbox");g.value=1,g.id=T.checkbox,g.checked=Boolean(h.inputValue);const v=d.querySelector("span");return G(v,h.inputPlaceholder),d},ke.textarea=(d,h)=>{d.value=h.inputValue,On(d,h),Rt(d,d,h);return setTimeout(()=>{if("MutationObserver"in window){const v=parseInt(window.getComputedStyle(W()).width);new MutationObserver(()=>{const q=d.offsetWidth+(v=>parseInt(window.getComputedStyle(v).marginLeft)+parseInt(window.getComputedStyle(v).marginRight))(d);W().style.width=q>v?"".concat(q,"px"):null}).observe(d,{attributes:!0,attributeFilter:["style"]})}}),d};const eo=(d,h)=>{const g=Yt();me(g,h,"htmlContainer"),h.html?(Tr(h.html,g),ce(g,"block")):h.text?(g.textContent=h.text,ce(g,"block")):Te(g),((d,h)=>{const g=W(),v=j.innerParams.get(d),C=!v||h.input!==v.input;Fa.forEach(q=>{const ae=T[q],Ne=rt(g,ae);Er(q,h.inputAttributes),Ne.className=ae,C&&Te(Ne)}),h.input&&(C&&Ra(h),Cr(h))})(d,h)},Ds=(d,h)=>{for(const g in In)h.icon!==g&&ct(d,In[g]);z(d,In[h.icon]),Ba(d,h),Ps(),me(d,h,"icon")},Ps=()=>{const d=W(),h=window.getComputedStyle(d).getPropertyValue("background-color"),g=d.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let v=0;v<g.length;v++)g[v].style.backgroundColor=h},Os=(d,h)=>{d.textContent="",G(d,h.iconHtml?Sr(h.iconHtml):"success"===h.icon?'\n      <div class="swal2-success-circular-line-left"></div>\n      <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>\n      <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>\n      <div class="swal2-success-circular-line-right"></div>\n    ':"error"===h.icon?'\n      <span class="swal2-x-mark">\n        <span class="swal2-x-mark-line-left"></span>\n        <span class="swal2-x-mark-line-right"></span>\n      </span>\n    ':Sr({question:"?",warning:"!",info:"i"}[h.icon]))},Ba=(d,h)=>{if(h.iconColor){d.style.color=h.iconColor,d.style.borderColor=h.iconColor;for(const g of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])Ae(d,g,"backgroundColor",h.iconColor);Ae(d,".swal2-success-ring","borderColor",h.iconColor)}},Sr=d=>'<div class="'.concat(T["icon-content"],'">').concat(d,"</div>"),Ie=(d,h)=>{const g=vt();if(!h.progressSteps||0===h.progressSteps.length)return Te(g);ce(g),g.textContent="",h.currentProgressStep>=h.progressSteps.length&&u("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),h.progressSteps.forEach((v,C)=>{const q=(d=>{const h=document.createElement("li");return z(h,T["progress-step"]),G(h,d),h})(v);if(g.appendChild(q),C===h.currentProgressStep&&z(q,T["active-progress-step"]),C!==h.progressSteps.length-1){const ae=(d=>{const h=document.createElement("li");return z(h,T["progress-step-line"]),d.progressStepsDistance&&(h.style.width=d.progressStepsDistance),h})(h);g.appendChild(ae)}})},Va=(d,h)=>{d.className="".concat(T.popup," ").concat(ee(d)?h.showClass.popup:""),h.toast?(z([document.documentElement,document.body],T["toast-shown"]),z(d,T.toast)):z(d,T.modal),me(d,h,"popup"),"string"==typeof h.customClass&&z(d,h.customClass),h.icon&&z(d,T["icon-".concat(h.icon)])},ro=(d,h)=>{((d,h)=>{const g=_e(),v=W();h.toast?(Lt(g,"width",h.width),v.style.width="100%",v.insertBefore(Xt(),Cn())):Lt(v,"width",h.width),Lt(v,"padding",h.padding),h.background&&(v.style.background=h.background),Te(K()),Va(v,h)})(0,h),Se(0,h),Ie(0,h),((d,h)=>{const g=j.innerParams.get(d),v=Cn();g&&h.icon===g.icon?(Os(v,h),Ds(v,h)):h.icon||h.iconHtml?h.icon&&-1===Object.keys(In).indexOf(h.icon)?(fe('Unknown icon! Expected "success", "error", "warning", "info" or "question", got "'.concat(h.icon,'"')),Te(v)):(ce(v),Os(v,h),Ds(v,h),z(v,h.showClass.icon)):Te(v)})(d,h),((d,h)=>{const g=_s();if(!h.imageUrl)return Te(g);ce(g,""),g.setAttribute("src",h.imageUrl),g.setAttribute("alt",h.imageAlt),Lt(g,"width",h.imageWidth),Lt(g,"height",h.imageHeight),g.className=T.image,me(g,h,"image")})(0,h),((d,h)=>{const g=I();nn(g,h.title||h.titleText,"block"),h.title&&Tr(h.title,g),h.titleText&&(g.innerText=h.titleText),me(g,h,"title")})(0,h),((d,h)=>{const g=An();G(g,h.closeButtonHtml),me(g,h,"closeButton"),nn(g,h.showCloseButton),g.setAttribute("aria-label",h.closeButtonAriaLabel)})(0,h),eo(d,h),Oa(0,h),((d,h)=>{const g=F();nn(g,h.footer),h.footer&&Tr(h.footer,g),me(g,h,"footer")})(0,h),"function"==typeof h.didRender&&h.didRender(W())},io=()=>Qe()&&Qe().click();const xt=d=>{let h=W();h||jt.fire(),h=W();const g=Xt();Nn()?Te(Cn()):oo(h,d),ce(g),h.setAttribute("data-loading",!0),h.setAttribute("aria-busy",!0),h.focus()},oo=(d,h)=>{const g=en(),v=Xt();!h&&ee(Qe())&&(h=Qe()),ce(g),h&&(Te(h),v.setAttribute("data-button-to-replace",h.className)),v.parentNode.insertBefore(v,h),z([d,g],T.loading)},R={},Zs=d=>new Promise(h=>{if(!d)return h();const g=window.scrollX,v=window.scrollY;R.restoreFocusTimeout=setTimeout(()=>{R.previousActiveElement&&R.previousActiveElement.focus?(R.previousActiveElement.focus(),R.previousActiveElement=null):document.body&&document.body.focus(),h()},100),window.scrollTo(g,v)}),co=()=>{if(R.timeout)return(()=>{const d=Mt(),h=parseInt(window.getComputedStyle(d).width);d.style.removeProperty("transition"),d.style.width="100%";const g=parseInt(window.getComputedStyle(d).width),v=parseInt(h/g*100);d.style.removeProperty("transition"),d.style.width="".concat(v,"%")})(),R.timeout.stop()},sn=()=>{if(R.timeout){const d=R.timeout.start();return xr(d),d}};let Mn=!1;const Bs={};const on=d=>{for(let h=d.target;h&&h!==document;h=h.parentNode)for(const g in Bs){const v=h.getAttribute(g);if(v)return void Bs[g].fire({template:v})}},an={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},Ga=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","willClose"],Ut={},fo=["allowOutsideClick","allowEnterKey","backdrop","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],Ln=d=>Object.prototype.hasOwnProperty.call(an,d),Zt=d=>Ut[d],po=d=>{Ln(d)||u('Unknown parameter "'.concat(d,'"'))},Fe=d=>{fo.includes(d)&&u('The parameter "'.concat(d,'" is incompatible with toasts'))},go=d=>{Zt(d)&&wr(d,Zt(d))};var Nr=Object.freeze({isValidParameter:Ln,isUpdatableParameter:d=>-1!==Ga.indexOf(d),isDeprecatedParameter:Zt,argsToParams:d=>{const h={};return"object"!=typeof d[0]||Ki(d[0])?["title","html","icon"].forEach((g,v)=>{const C=d[v];"string"==typeof C||Ki(C)?h[g]=C:void 0!==C&&fe("Unexpected type of ".concat(g,'! Expected "string" or "Element", got ').concat(typeof C))}):Object.assign(h,d[0]),h},isVisible:()=>ee(W()),clickConfirm:io,clickDeny:()=>bt()&&bt().click(),clickCancel:()=>P()&&P().click(),getContainer:_e,getPopup:W,getTitle:I,getHtmlContainer:Yt,getImage:_s,getIcon:Cn,getInputLabel:()=>ze(T["input-label"]),getCloseButton:An,getActions:en,getConfirmButton:Qe,getDenyButton:bt,getCancelButton:P,getLoader:Xt,getFooter:F,getTimerProgressBar:Mt,getFocusableElements:xs,getValidationMessage:K,isLoading:()=>W().hasAttribute("data-loading"),fire:function(...d){return new this(...d)},mixin:function(d){return class extends(this){_main(v,C){return super._main(v,Object.assign({},d,C))}}},showLoading:xt,enableLoading:xt,getTimerLeft:()=>R.timeout&&R.timeout.getTimerLeft(),stopTimer:co,resumeTimer:sn,toggleTimer:()=>{const d=R.timeout;return d&&(d.running?co():sn())},increaseTimer:d=>{if(R.timeout){const h=R.timeout.increase(d);return xr(h,!0),h}},isTimerRunning:()=>R.timeout&&R.timeout.isRunning(),bindClickHandler:function(d="data-swal-template"){Bs[d]=this,Mn||(document.body.addEventListener("click",on),Mn=!0)}});function Vs(){const d=j.innerParams.get(this);if(!d)return;const h=j.domCache.get(this);Te(h.loader),Nn()?d.icon&&ce(Cn()):js(h),ct([h.popup,h.actions],T.loading),h.popup.removeAttribute("aria-busy"),h.popup.removeAttribute("data-loading"),h.confirmButton.disabled=!1,h.denyButton.disabled=!1,h.cancelButton.disabled=!1}const js=d=>{const h=d.popup.getElementsByClassName(d.loader.getAttribute("data-button-to-replace"));h.length?ce(h[0],"inline-block"):!ee(Qe())&&!ee(bt())&&!ee(P())&&Te(d.actions)};const wo=()=>{null===tn.previousBodyPadding&&document.body.scrollHeight>window.innerHeight&&(tn.previousBodyPadding=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight="".concat(tn.previousBodyPadding+(()=>{const d=document.createElement("div");d.className=T["scrollbar-measure"],document.body.appendChild(d);const h=d.getBoundingClientRect().width-d.clientWidth;return document.body.removeChild(d),h})(),"px"))},Ks=()=>{if(!navigator.userAgent.match(/(CriOS|FxiOS|EdgiOS|YaBrowser|UCBrowser)/i)){const h=44;W().scrollHeight>window.innerHeight-h&&(_e().style.paddingBottom="".concat(h,"px"))}},Hs=()=>{const d=_e();let h;d.ontouchstart=g=>{h=Dr(g)},d.ontouchmove=g=>{h&&(g.preventDefault(),g.stopPropagation())}},Dr=d=>{const h=d.target,g=_e();return!(Rn(d)||vo(d)||h!==g&&(Es(g)||"INPUT"===h.tagName||"TEXTAREA"===h.tagName||Es(Yt())&&Yt().contains(h)))},Rn=d=>d.touches&&d.touches.length&&"stylus"===d.touches[0].touchType,vo=d=>d.touches&&d.touches.length>1,Un=()=>{be(document.body.children).forEach(h=>{h.hasAttribute("data-previous-aria-hidden")?(h.setAttribute("aria-hidden",h.getAttribute("data-previous-aria-hidden")),h.removeAttribute("data-previous-aria-hidden")):h.removeAttribute("aria-hidden")})};var Zn={swalPromiseResolve:new WeakMap};function $s(d,h,g,v){Nn()?jn(d,v):(Zs(g).then(()=>jn(d,v)),R.keydownTarget.removeEventListener("keydown",R.keydownHandler,{capture:R.keydownListenerCapture}),R.keydownHandlerAdded=!1),/^((?!chrome|android).)*safari/i.test(navigator.userAgent)?(h.setAttribute("style","display:none !important"),h.removeAttribute("class"),h.innerHTML=""):h.remove(),kn()&&(null!==tn.previousBodyPadding&&(document.body.style.paddingRight="".concat(tn.previousBodyPadding,"px"),tn.previousBodyPadding=null),(()=>{if(_t(document.body,T.iosfix)){const d=parseInt(document.body.style.top,10);ct(document.body,T.iosfix),document.body.style.top="",document.body.scrollTop=-1*d}})(),Un()),ct([document.documentElement,document.body],[T.shown,T["height-auto"],T["no-backdrop"],T["toast-shown"]])}function Bn(d){const h=W();if(!h)return;d=Qa(d);const g=j.innerParams.get(this);if(!g||_t(h,g.hideClass.popup))return;const v=Zn.swalPromiseResolve.get(this);ct(h,g.showClass.popup),z(h,g.hideClass.popup);const C=_e();ct(C,g.showClass.backdrop),z(C,g.hideClass.backdrop),Vn(this,h,g),v(d)}const Qa=d=>void 0===d?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},d),Vn=(d,h,g)=>{const v=_e(),C=Ft&&_r(h);"function"==typeof g.willClose&&g.willClose(h),C?_o(d,h,v,g.returnFocus,g.didClose):$s(d,v,g.returnFocus,g.didClose)},_o=(d,h,g,v,C)=>{R.swalCloseEventFinishedCallback=$s.bind(null,d,g,v,C),h.addEventListener(Ft,function(q){q.target===h&&(R.swalCloseEventFinishedCallback(),delete R.swalCloseEventFinishedCallback)})},jn=(d,h)=>{setTimeout(()=>{"function"==typeof h&&h.bind(d.params)(),d._destroy()})};function cn(d,h,g){const v=j.domCache.get(d);h.forEach(C=>{v[C].disabled=g})}function Tt(d,h){if(!d)return!1;if("radio"===d.type){const v=d.parentNode.parentNode.querySelectorAll("input");for(let C=0;C<v.length;C++)v[C].disabled=h}else d.disabled=h}class Wa{constructor(h,g){this.callback=h,this.remaining=g,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date-this.started),this.remaining}increase(h){const g=this.running;return g&&this.stop(),this.remaining+=h,g&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}var It={email:(d,h)=>/^[a-zA-Z0-9.+_-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]{2,24}$/.test(d)?Promise.resolve():Promise.resolve(h||"Invalid email address"),url:(d,h)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(d)?Promise.resolve():Promise.resolve(h||"Invalid URL")};function Or(d){(function(d){d.inputValidator||Object.keys(It).forEach(h=>{d.input===h&&(d.inputValidator=It[h])})})(d),d.showLoaderOnConfirm&&!d.preConfirm&&u("showLoaderOnConfirm is set to true, but preConfirm is not defined.\nshowLoaderOnConfirm should be used together with preConfirm, see usage example:\nhttps://sweetalert2.github.io/#ajax-request"),function(d){(!d.target||"string"==typeof d.target&&!document.querySelector(d.target)||"string"!=typeof d.target&&!d.target.appendChild)&&(u('Target parameter is not valid, defaulting to "body"'),d.target="body")}(d),"string"==typeof d.title&&(d.title=d.title.split("\n").join("<br />")),Pa(d)}const zn=["swal-title","swal-html","swal-footer"],te=d=>{const h={};return be(d.querySelectorAll("swal-param")).forEach(g=>{Et(g,["name","value"]);const v=g.getAttribute("name");let C=g.getAttribute("value");"boolean"==typeof an[v]&&"false"===C&&(C=!1),"object"==typeof an[v]&&(C=JSON.parse(C)),h[v]=C}),h},Mr=d=>{const h={};return be(d.querySelectorAll("swal-button")).forEach(g=>{Et(g,["type","color","aria-label"]);const v=g.getAttribute("type");h["".concat(v,"ButtonText")]=g.innerHTML,h["show".concat($e(v),"Button")]=!0,g.hasAttribute("color")&&(h["".concat(v,"ButtonColor")]=g.getAttribute("color")),g.hasAttribute("aria-label")&&(h["".concat(v,"ButtonAriaLabel")]=g.getAttribute("aria-label"))}),h},Ya=d=>{const h={},g=d.querySelector("swal-image");return g&&(Et(g,["src","width","height","alt"]),g.hasAttribute("src")&&(h.imageUrl=g.getAttribute("src")),g.hasAttribute("width")&&(h.imageWidth=g.getAttribute("width")),g.hasAttribute("height")&&(h.imageHeight=g.getAttribute("height")),g.hasAttribute("alt")&&(h.imageAlt=g.getAttribute("alt"))),h},Xa=d=>{const h={},g=d.querySelector("swal-icon");return g&&(Et(g,["type","color"]),g.hasAttribute("type")&&(h.icon=g.getAttribute("type")),g.hasAttribute("color")&&(h.iconColor=g.getAttribute("color")),h.iconHtml=g.innerHTML),h},Kn=d=>{const h={},g=d.querySelector("swal-input");g&&(Et(g,["type","label","placeholder","value"]),h.input=g.getAttribute("type")||"text",g.hasAttribute("label")&&(h.inputLabel=g.getAttribute("label")),g.hasAttribute("placeholder")&&(h.inputPlaceholder=g.getAttribute("placeholder")),g.hasAttribute("value")&&(h.inputValue=g.getAttribute("value")));const v=d.querySelectorAll("swal-input-option");return v.length&&(h.inputOptions={},be(v).forEach(C=>{Et(C,["value"]);const q=C.getAttribute("value");h.inputOptions[q]=C.innerHTML})),h},Hn=(d,h)=>{const g={};for(const v in h){const C=h[v],q=d.querySelector(C);q&&(Et(q,[]),g[C.replace(/^swal-/,"")]=q.innerHTML.trim())}return g},ec=d=>{const h=zn.concat(["swal-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);be(d.children).forEach(g=>{const v=g.tagName.toLowerCase();-1===h.indexOf(v)&&u("Unrecognized element <".concat(v,">"))})},Et=(d,h)=>{be(d.attributes).forEach(g=>{-1===h.indexOf(g.name)&&u(['Unrecognized attribute "'.concat(g.name,'" on <').concat(d.tagName.toLowerCase(),">."),"".concat(h.length?"Allowed attributes are: ".concat(h.join(", ")):"To set the value, use HTML within the element.")])})},tc=d=>{const h=_e(),g=W();"function"==typeof d.willOpen&&d.willOpen(g);const C=window.getComputedStyle(document.body).overflowY;Ct(h,g,d),setTimeout(()=>{nc(h,g)},10),kn()&&(Gn(h,d.scrollbarPadding,C),be(document.body.children).forEach(h=>{h===_e()||h.contains(_e())||(h.hasAttribute("aria-hidden")&&h.setAttribute("data-previous-aria-hidden",h.getAttribute("aria-hidden")),h.setAttribute("aria-hidden","true"))})),!Nn()&&!R.previousActiveElement&&(R.previousActiveElement=document.activeElement),"function"==typeof d.didOpen&&setTimeout(()=>d.didOpen(g)),ct(h,T["no-transition"])},Eo=d=>{const h=W();if(d.target!==h)return;const g=_e();h.removeEventListener(Ft,Eo),g.style.overflowY="auto"},nc=(d,h)=>{Ft&&_r(h)?(d.style.overflowY="hidden",h.addEventListener(Ft,Eo)):d.style.overflowY="auto"},Gn=(d,h,g)=>{(()=>{if((/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1)&&!_t(document.body,T.iosfix)){const h=document.body.scrollTop;document.body.style.top="".concat(-1*h,"px"),z(document.body,T.iosfix),Hs(),Ks()}})(),h&&"hidden"!==g&&wo(),setTimeout(()=>{d.scrollTop=0})},Ct=(d,h,g)=>{z(d,g.showClass.backdrop),h.style.setProperty("opacity","0","important"),ce(h,"grid"),setTimeout(()=>{z(h,g.showClass.popup),h.style.removeProperty("opacity")},10),z([document.documentElement,document.body],T.shown),g.heightAuto&&g.backdrop&&!g.toast&&z([document.documentElement,document.body],T["height-auto"])},So=d=>d.checked?1:0,ln=d=>d.checked?d.value:null,rc=d=>d.files.length?null!==d.getAttribute("multiple")?d.files:d.files[0]:null,sc=(d,h)=>{const g=W(),v=C=>ic[h.input](g,Lr(C),h);je(h.inputOptions)||br(h.inputOptions)?(xt(Qe()),Ot(h.inputOptions).then(C=>{d.hideLoading(),v(C)})):"object"==typeof h.inputOptions?v(h.inputOptions):fe("Unexpected type of inputOptions! Expected object, Map or Promise, got ".concat(typeof h.inputOptions))},ko=(d,h)=>{const g=d.getInput();Te(g),Ot(h.inputValue).then(v=>{g.value="number"===h.input?parseFloat(v)||0:"".concat(v),ce(g),g.focus(),d.hideLoading()}).catch(v=>{fe("Error in inputValue promise: ".concat(v)),g.value="",ce(g),g.focus(),d.hideLoading()})},ic={select:(d,h,g)=>{const v=rt(d,T.select),C=(q,ae,Ne)=>{const De=document.createElement("option");De.value=Ne,G(De,ae),De.selected=Ys(Ne,g.inputValue),q.appendChild(De)};h.forEach(q=>{const ae=q[0],Ne=q[1];if(Array.isArray(Ne)){const De=document.createElement("optgroup");De.label=ae,De.disabled=!1,v.appendChild(De),Ne.forEach(zt=>C(De,zt[1],zt[0]))}else C(v,Ne,ae)}),v.focus()},radio:(d,h,g)=>{const v=rt(d,T.radio);h.forEach(q=>{const ae=q[0],Ne=q[1],De=document.createElement("input"),zt=document.createElement("label");De.type="radio",De.name=T.radio,De.value=ae,Ys(ae,g.inputValue)&&(De.checked=!0);const pt=document.createElement("span");G(pt,Ne),pt.className=T.label,zt.appendChild(De),zt.appendChild(pt),v.appendChild(zt)});const C=v.querySelectorAll("input");C.length&&C[0].focus()}},Lr=d=>{const h=[];return"undefined"!=typeof Map&&d instanceof Map?d.forEach((g,v)=>{let C=g;"object"==typeof C&&(C=Lr(C)),h.push([v,C])}):Object.keys(d).forEach(g=>{let v=d[g];"object"==typeof v&&(v=Lr(v)),h.push([g,v])}),h},Ys=(d,h)=>h&&h.toString()===d.toString(),ti=(d,h)=>{const g=j.innerParams.get(d),v=((d,h)=>{const g=d.getInput();if(!g)return null;switch(h.input){case"checkbox":return So(g);case"radio":return ln(g);case"file":return rc(g);default:return h.inputAutoTrim?g.value.trim():g.value}})(d,g);g.inputValidator?ni(d,v,h):d.getInput().checkValidity()?"deny"===h?ri(d,v):si(d,v):(d.enableButtons(),d.showValidationMessage(g.validationMessage))},ni=(d,h,g)=>{const v=j.innerParams.get(d);d.disableInput(),Promise.resolve().then(()=>Ot(v.inputValidator(h,v.validationMessage))).then(q=>{d.enableButtons(),d.enableInput(),q?d.showValidationMessage(q):"deny"===g?ri(d,h):si(d,h)})},ri=(d,h)=>{const g=j.innerParams.get(d||void 0);g.showLoaderOnDeny&&xt(bt()),g.preDeny?Promise.resolve().then(()=>Ot(g.preDeny(h,g.validationMessage))).then(C=>{!1===C?d.hideLoading():d.closePopup({isDenied:!0,value:void 0===C?h:C})}):d.closePopup({isDenied:!0,value:h})},Do=(d,h)=>{d.closePopup({isConfirmed:!0,value:h})},si=(d,h)=>{const g=j.innerParams.get(d||void 0);g.showLoaderOnConfirm&&xt(),g.preConfirm?(d.resetValidationMessage(),Promise.resolve().then(()=>Ot(g.preConfirm(h,g.validationMessage))).then(C=>{ee(K())||!1===C?d.hideLoading():Do(d,void 0===C?h:C)})):Do(d,h)},Vt=(d,h,g)=>{const v=xs();if(v.length)return(h+=g)===v.length?h=0:-1===h&&(h=v.length-1),v[h].focus();W().focus()},$n=["ArrowRight","ArrowDown"],ii=["ArrowLeft","ArrowUp"],Po=(d,h,g)=>{const v=j.innerParams.get(d);!v||(v.stopKeydownPropagation&&h.stopPropagation(),"Enter"===h.key?Qn(d,h,v):"Tab"===h.key?Jn(h,v):[...$n,...ii].includes(h.key)?oc(h.key):"Escape"===h.key&&ue(h,v,g))},Qn=(d,h,g)=>{if(!h.isComposing&&h.target&&d.getInput()&&h.target.outerHTML===d.getInput().outerHTML){if(["textarea","file"].includes(g.input))return;io(),h.preventDefault()}},Jn=(d,h)=>{const g=d.target,v=xs();let C=-1;for(let q=0;q<v.length;q++)if(g===v[q]){C=q;break}Vt(0,C,d.shiftKey?-1:1),d.stopPropagation(),d.preventDefault()},oc=d=>{if(![Qe(),bt(),P()].includes(document.activeElement))return;const C=$n.includes(d)?"nextElementSibling":"previousElementSibling",q=document.activeElement[C];q&&q.focus()},ue=(d,h,g)=>{vr(h.allowEscapeKey)&&(d.preventDefault(),g(nt.esc))},ac=(d,h,g)=>{h.popup.onclick=()=>{const v=j.innerParams.get(d);v.showConfirmButton||v.showDenyButton||v.showCancelButton||v.showCloseButton||v.timer||v.input||g(nt.close)}};let Fr=!1;const cc=d=>{d.popup.onmousedown=()=>{d.container.onmouseup=function(h){d.container.onmouseup=void 0,h.target===d.container&&(Fr=!0)}}},uc=d=>{d.container.onmousedown=()=>{d.popup.onmouseup=function(h){d.popup.onmouseup=void 0,(h.target===d.popup||d.popup.contains(h.target))&&(Fr=!0)}}},Mo=(d,h,g)=>{h.container.onclick=v=>{const C=j.innerParams.get(d);Fr?Fr=!1:v.target===h.container&&vr(C.allowOutsideClick)&&g(nt.backdrop)}};const qo=(d,h)=>{const g=(d=>{const h="string"==typeof d.template?document.querySelector(d.template):d.template;if(!h)return{};const g=h.content;return ec(g),Object.assign(te(g),Mr(g),Ya(g),Xa(g),Kn(g),Hn(g,zn))})(d),v=Object.assign({},an,h,g,d);return v.showClass=Object.assign({},an.showClass,v.showClass),v.hideClass=Object.assign({},an.hideClass,v.hideClass),v},Rr=(d,h,g)=>new Promise(v=>{const C=q=>{d.closePopup({isDismissed:!0,dismiss:q})};Zn.swalPromiseResolve.set(d,v),h.confirmButton.onclick=()=>(d=>{const h=j.innerParams.get(d);d.disableButtons(),h.input?ti(d,"confirm"):si(d,!0)})(d),h.denyButton.onclick=()=>(d=>{const h=j.innerParams.get(d);d.disableButtons(),h.returnInputValueOnDeny?ti(d,"deny"):ri(d,!1)})(d),h.cancelButton.onclick=()=>((d,h)=>{d.disableButtons(),h(nt.cancel)})(d,C),h.closeButton.onclick=()=>C(nt.close),((d,h,g)=>{j.innerParams.get(d).toast?ac(d,h,g):(cc(h),uc(h),Mo(d,h,g))})(d,h,C),((d,h,g,v)=>{h.keydownTarget&&h.keydownHandlerAdded&&(h.keydownTarget.removeEventListener("keydown",h.keydownHandler,{capture:h.keydownListenerCapture}),h.keydownHandlerAdded=!1),g.toast||(h.keydownHandler=C=>Po(d,C,v),h.keydownTarget=g.keydownListenerCapture?window:W(),h.keydownListenerCapture=g.keydownListenerCapture,h.keydownTarget.addEventListener("keydown",h.keydownHandler,{capture:h.keydownListenerCapture}),h.keydownHandlerAdded=!0)})(d,R,g,C),((d,h)=>{"select"===h.input||"radio"===h.input?sc(d,h):["text","email","number","tel","textarea"].includes(h.input)&&(je(h.inputValue)||br(h.inputValue))&&(xt(Qe()),ko(d,h))})(d,g),tc(g),ft(R,g,C),Ro(h,g),setTimeout(()=>{h.container.scrollTop=0})}),Fo=d=>{const h={popup:W(),container:_e(),actions:en(),confirmButton:Qe(),denyButton:bt(),cancelButton:P(),loader:Xt(),closeButton:An(),validationMessage:K(),progressSteps:vt()};return j.domCache.set(d,h),h},ft=(d,h,g)=>{const v=Mt();Te(v),h.timer&&(d.timeout=new Wa(()=>{g("timer"),delete d.timeout},h.timer),h.timerProgressBar&&(ce(v),setTimeout(()=>{d.timeout&&d.timeout.running&&xr(h.timer)})))},Ro=(d,h)=>{if(!h.toast){if(!vr(h.allowEnterKey))return oi();lc(d,h)||Vt(0,-1,1)}},lc=(d,h)=>h.focusDeny&&ee(d.denyButton)?(d.denyButton.focus(),!0):h.focusCancel&&ee(d.cancelButton)?(d.cancelButton.focus(),!0):!(!h.focusConfirm||!ee(d.confirmButton)||(d.confirmButton.focus(),0)),oi=()=>{document.activeElement&&"function"==typeof document.activeElement.blur&&document.activeElement.blur()};const ai=d=>{delete d.params,delete R.keydownHandler,delete R.keydownTarget,Yn(j),Yn(Zn),delete R.currentInstance},Yn=d=>{for(const h in d)d[h]=new WeakMap};var ci=Object.freeze({hideLoading:Vs,disableLoading:Vs,getInput:function(d){const h=j.innerParams.get(d||this),g=j.domCache.get(d||this);return g?Ts(g.popup,h.input):null},close:Bn,closePopup:Bn,closeModal:Bn,closeToast:Bn,enableButtons:function(){cn(this,["confirmButton","denyButton","cancelButton"],!1)},disableButtons:function(){cn(this,["confirmButton","denyButton","cancelButton"],!0)},enableInput:function(){return Tt(this.getInput(),!1)},disableInput:function(){return Tt(this.getInput(),!0)},showValidationMessage:function(d){const h=j.domCache.get(this),g=j.innerParams.get(this);G(h.validationMessage,d),h.validationMessage.className=T["validation-message"],g.customClass&&g.customClass.validationMessage&&z(h.validationMessage,g.customClass.validationMessage),ce(h.validationMessage);const v=this.getInput();v&&(v.setAttribute("aria-invalid",!0),v.setAttribute("aria-describedby",T["validation-message"]),$i(v),z(v,T.inputerror))},resetValidationMessage:function(){const d=j.domCache.get(this);d.validationMessage&&Te(d.validationMessage);const h=this.getInput();h&&(h.removeAttribute("aria-invalid"),h.removeAttribute("aria-describedby"),ct(h,T.inputerror))},getProgressSteps:function(){return j.domCache.get(this).progressSteps},_main:function(d,h={}){(d=>{!d.backdrop&&d.allowOutsideClick&&u('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`');for(const h in d)po(h),d.toast&&Fe(h),go(h)})(Object.assign({},h,d)),R.currentInstance&&(R.currentInstance._destroy(),kn()&&Un()),R.currentInstance=this;const g=qo(d,h);Or(g),Object.freeze(g),R.timeout&&(R.timeout.stop(),delete R.timeout),clearTimeout(R.restoreFocusTimeout);const v=Fo(this);return ro(this,g),j.innerParams.set(this,g),Rr(this,v,g)},update:function(d){const h=W(),g=j.innerParams.get(this);if(!h||_t(h,g.hideClass.popup))return u("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");const v={};Object.keys(d).forEach(q=>{jt.isUpdatableParameter(q)?v[q]=d[q]:u('Invalid parameter to update: "'.concat(q,'". Updatable params are listed here: https://github.com/sweetalert2/sweetalert2/blob/master/src/utils/params.js\n\nIf you think this parameter should be updatable, request it here: https://github.com/sweetalert2/sweetalert2/issues/new?template=02_feature_request.md'))});const C=Object.assign({},g,v);ro(this,C),j.innerParams.set(this,C),Object.defineProperties(this,{params:{value:Object.assign({},this.params,d),writable:!1,enumerable:!0}})},_destroy:function(){const d=j.domCache.get(this),h=j.innerParams.get(this);!h||(d.popup&&R.swalCloseEventFinishedCallback&&(R.swalCloseEventFinishedCallback(),delete R.swalCloseEventFinishedCallback),R.deferDisposalTimer&&(clearTimeout(R.deferDisposalTimer),delete R.deferDisposalTimer),"function"==typeof h.didDestroy&&h.didDestroy(),ai(this))}});let Xn;class mt{constructor(...h){if("undefined"==typeof window)return;Xn=this;const g=Object.freeze(this.constructor.argsToParams(h));Object.defineProperties(this,{params:{value:g,writable:!1,enumerable:!0,configurable:!0}});const v=this._main(this.params);j.promise.set(this,v)}then(h){return j.promise.get(this).then(h)}finally(h){return j.promise.get(this).finally(h)}}Object.assign(mt.prototype,ci),Object.assign(mt,Nr),Object.keys(ci).forEach(d=>{mt[d]=function(...h){if(Xn)return Xn[d](...h)}}),mt.DismissReason=nt,mt.version="11.1.7";const jt=mt;return jt.default=jt,jt}(),void 0!==this&&this.Sweetalert2&&(this.swal=this.sweetAlert=this.Swal=this.SweetAlert=this.Sweetalert2),"undefined"!=typeof document&&function(nt,B){var oe=nt.createElement("style");if(nt.getElementsByTagName("head")[0].appendChild(oe),oe.styleSheet)oe.styleSheet.disabled||(oe.styleSheet.cssText=B);else try{oe.innerHTML=B}catch($e){oe.innerText=B}}(document,'.swal2-popup.swal2-toast{box-sizing:border-box;grid-column:1/4!important;grid-row:1/4!important;grid-template-columns:1fr 99fr 1fr;padding:1em;overflow-y:hidden;background:#fff;box-shadow:0 0 1px rgba(0,0,0,.075),0 1px 2px rgba(0,0,0,.075),1px 2px 4px rgba(0,0,0,.075),1px 3px 8px rgba(0,0,0,.075),2px 4px 16px rgba(0,0,0,.075);pointer-events:all}.swal2-popup.swal2-toast>*{grid-column:2}.swal2-popup.swal2-toast .swal2-title{margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-loading{justify-content:center}.swal2-popup.swal2-toast .swal2-input{height:2em;margin:.5em;font-size:1em}.swal2-popup.swal2-toast .swal2-validation-message{font-size:1em}.swal2-popup.swal2-toast .swal2-footer{margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-popup.swal2-toast .swal2-close{grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-popup.swal2-toast .swal2-html-container{margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-html-container:empty{padding:0}.swal2-popup.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-popup.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-popup.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:700}.swal2-popup.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-popup.swal2-toast .swal2-actions{justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-popup.swal2-toast .swal2-styled{margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-popup.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;transform:rotate(45deg);border-radius:50%}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-.8em;left:-.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-popup.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{-webkit-animation:swal2-toast-animate-success-line-tip .75s;animation:swal2-toast-animate-success-line-tip .75s}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{-webkit-animation:swal2-toast-animate-success-line-long .75s;animation:swal2-toast-animate-success-line-long .75s}.swal2-popup.swal2-toast.swal2-show{-webkit-animation:swal2-toast-show .5s;animation:swal2-toast-show .5s}.swal2-popup.swal2-toast.swal2-hide{-webkit-animation:swal2-toast-hide .1s forwards;animation:swal2-toast-hide .1s forwards}.swal2-container{display:grid;position:fixed;z-index:1060;top:0;right:0;bottom:0;left:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(-webkit-min-content,auto) minmax(-webkit-min-content,auto) minmax(-webkit-min-content,auto);grid-template-rows:minmax(min-content,auto) minmax(min-content,auto) minmax(min-content,auto);height:100%;padding:.625em;overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}.swal2-container.swal2-backdrop-show,.swal2-container.swal2-noanimation{background:rgba(0,0,0,.4)}.swal2-container.swal2-backdrop-hide{background:0 0!important}.swal2-container.swal2-bottom-start,.swal2-container.swal2-center-start,.swal2-container.swal2-top-start{grid-template-columns:minmax(0,1fr) auto auto}.swal2-container.swal2-bottom,.swal2-container.swal2-center,.swal2-container.swal2-top{grid-template-columns:auto minmax(0,1fr) auto}.swal2-container.swal2-bottom-end,.swal2-container.swal2-center-end,.swal2-container.swal2-top-end{grid-template-columns:auto auto minmax(0,1fr)}.swal2-container.swal2-top-start>.swal2-popup{align-self:start}.swal2-container.swal2-top>.swal2-popup{grid-column:2;align-self:start;justify-self:center}.swal2-container.swal2-top-end>.swal2-popup,.swal2-container.swal2-top-right>.swal2-popup{grid-column:3;align-self:start;justify-self:end}.swal2-container.swal2-center-left>.swal2-popup,.swal2-container.swal2-center-start>.swal2-popup{grid-row:2;align-self:center}.swal2-container.swal2-center>.swal2-popup{grid-column:2;grid-row:2;align-self:center;justify-self:center}.swal2-container.swal2-center-end>.swal2-popup,.swal2-container.swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;align-self:center;justify-self:end}.swal2-container.swal2-bottom-left>.swal2-popup,.swal2-container.swal2-bottom-start>.swal2-popup{grid-column:1;grid-row:3;align-self:end}.swal2-container.swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;justify-self:center;align-self:end}.swal2-container.swal2-bottom-end>.swal2-popup,.swal2-container.swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;align-self:end;justify-self:end}.swal2-container.swal2-grow-fullscreen>.swal2-popup,.swal2-container.swal2-grow-row>.swal2-popup{grid-column:1/4;width:100%}.swal2-container.swal2-grow-column>.swal2-popup,.swal2-container.swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}.swal2-container.swal2-no-transition{transition:none!important}.swal2-popup{display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0,100%);width:32em;max-width:100%;padding:0 0 1.25em;border:none;border-radius:5px;background:#fff;color:#545454;font-family:inherit;font-size:1rem}.swal2-popup:focus{outline:0}.swal2-popup.swal2-loading{overflow-y:hidden}.swal2-title{position:relative;max-width:100%;margin:0;padding:.8em 1em 0;color:#595959;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word}.swal2-actions{display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:auto;margin:1.25em auto 0;padding:0}.swal2-actions:not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}.swal2-actions:not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0,0,0,.1),rgba(0,0,0,.1))}.swal2-actions:not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0,0,0,.2),rgba(0,0,0,.2))}.swal2-loader{display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;-webkit-animation:swal2-rotate-loading 1.5s linear 0s infinite normal;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 transparent #2778c4 transparent}.swal2-styled{margin:.3125em;padding:.625em 1.1em;transition:box-shadow .1s;box-shadow:0 0 0 3px transparent;font-weight:500}.swal2-styled:not([disabled]){cursor:pointer}.swal2-styled.swal2-confirm{border:0;border-radius:.25em;background:initial;background-color:#7367f0;color:#fff;font-size:1em}.swal2-styled.swal2-confirm:focus{box-shadow:0 0 0 3px rgba(115,103,240,.5)}.swal2-styled.swal2-deny{border:0;border-radius:.25em;background:initial;background-color:#ea5455;color:#fff;font-size:1em}.swal2-styled.swal2-deny:focus{box-shadow:0 0 0 3px rgba(234,84,85,.5)}.swal2-styled.swal2-cancel{border:0;border-radius:.25em;background:initial;background-color:#6e7d88;color:#fff;font-size:1em}.swal2-styled.swal2-cancel:focus{box-shadow:0 0 0 3px rgba(110,125,136,.5)}.swal2-styled.swal2-default-outline:focus{box-shadow:0 0 0 3px rgba(100,150,200,.5)}.swal2-styled:focus{outline:0}.swal2-styled::-moz-focus-inner{border:0}.swal2-footer{justify-content:center;margin:1em 0 0;padding:1em 1em 0;border-top:1px solid #eee;color:#545454;font-size:1em}.swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto!important;height:.25em;overflow:hidden;border-bottom-right-radius:5px;border-bottom-left-radius:5px}.swal2-timer-progress-bar{width:100%;height:.25em;background:rgba(0,0,0,.2)}.swal2-image{max-width:100%;margin:2em auto 1em}.swal2-close{z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:color .1s,box-shadow .1s;border:none;border-radius:5px;background:0 0;color:#ccc;font-family:serif;font-family:monospace;font-size:2.5em;cursor:pointer;justify-self:end}.swal2-close:hover{transform:none;background:0 0;color:#f27474}.swal2-close:focus{outline:0;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}.swal2-close::-moz-focus-inner{border:0}.swal2-html-container{z-index:1;justify-content:center;margin:1em 1.6em .3em;padding:0;overflow:auto;color:#545454;font-size:1.125em;font-weight:400;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word}.swal2-checkbox,.swal2-file,.swal2-input,.swal2-radio,.swal2-select,.swal2-textarea{margin:1em 2em 0}.swal2-file,.swal2-input,.swal2-textarea{box-sizing:border-box;width:auto;transition:border-color .1s,box-shadow .1s;border:1px solid #d9d9d9;border-radius:.1875em;background:inherit;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px transparent;color:inherit;font-size:1.125em}.swal2-file.swal2-inputerror,.swal2-input.swal2-inputerror,.swal2-textarea.swal2-inputerror{border-color:#f27474!important;box-shadow:0 0 2px #f27474!important}.swal2-file:focus,.swal2-input:focus,.swal2-textarea:focus{border:1px solid #b4dbed;outline:0;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}.swal2-file::-moz-placeholder,.swal2-input::-moz-placeholder,.swal2-textarea::-moz-placeholder{color:#ccc}.swal2-file:-ms-input-placeholder,.swal2-input:-ms-input-placeholder,.swal2-textarea:-ms-input-placeholder{color:#ccc}.swal2-file::placeholder,.swal2-input::placeholder,.swal2-textarea::placeholder{color:#ccc}.swal2-range{margin:1em 2em 0;background:#fff}.swal2-range input{width:80%}.swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}.swal2-range input,.swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}.swal2-input{height:2.625em;padding:0 .75em}.swal2-file{width:75%;margin-right:auto;margin-left:auto;background:inherit;font-size:1.125em}.swal2-textarea{height:6.75em;padding:.75em}.swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:inherit;color:inherit;font-size:1.125em}.swal2-checkbox,.swal2-radio{align-items:center;justify-content:center;background:#fff;color:inherit}.swal2-checkbox label,.swal2-radio label{margin:0 .6em;font-size:1.125em}.swal2-checkbox input,.swal2-radio input{flex-shrink:0;margin:0 .4em}.swal2-input-label{display:flex;justify-content:center;margin:1em auto 0}.swal2-validation-message{align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:#f0f0f0;color:#666;font-size:1em;font-weight:300}.swal2-validation-message::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}.swal2-icon{position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;border:.25em solid transparent;border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}.swal2-icon.swal2-error{border-color:#f27474;color:#f27474}.swal2-icon.swal2-error .swal2-x-mark{position:relative;flex-grow:1}.swal2-icon.swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}.swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}.swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}.swal2-icon.swal2-error.swal2-icon-show{-webkit-animation:swal2-animate-error-icon .5s;animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-error.swal2-icon-show .swal2-x-mark{-webkit-animation:swal2-animate-error-x-mark .5s;animation:swal2-animate-error-x-mark .5s}.swal2-icon.swal2-warning{border-color:#facea8;color:#f8bb86}.swal2-icon.swal2-info{border-color:#9de0f6;color:#3fc3ee}.swal2-icon.swal2-question{border-color:#c9dae1;color:#87adbd}.swal2-icon.swal2-success{border-color:#a5dc86;color:#a5dc86}.swal2-icon.swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;transform:rotate(45deg);border-radius:50%}.swal2-icon.swal2-success [class^=swal2-success-circular-line][class$=left]{top:-.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}.swal2-icon.swal2-success [class^=swal2-success-circular-line][class$=right]{top:-.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}.swal2-icon.swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-.25em;left:-.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}.swal2-icon.swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}.swal2-icon.swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}.swal2-icon.swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}.swal2-icon.swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-line-tip{-webkit-animation:swal2-animate-success-line-tip .75s;animation:swal2-animate-success-line-tip .75s}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-line-long{-webkit-animation:swal2-animate-success-line-long .75s;animation:swal2-animate-success-line-long .75s}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-circular-line-right{-webkit-animation:swal2-rotate-success-circular-line 4.25s ease-in;animation:swal2-rotate-success-circular-line 4.25s ease-in}.swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:inherit;font-weight:600}.swal2-progress-steps li{display:inline-block;position:relative}.swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:#add8e6;color:#fff}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:#add8e6}.swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}[class^=swal2]{-webkit-tap-highlight-color:transparent}.swal2-show{-webkit-animation:swal2-show .3s;animation:swal2-show .3s}.swal2-hide{-webkit-animation:swal2-hide .15s forwards;animation:swal2-hide .15s forwards}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}@-webkit-keyframes swal2-toast-show{0%{transform:translateY(-.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0)}}@keyframes swal2-toast-show{0%{transform:translateY(-.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0)}}@-webkit-keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@-webkit-keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@-webkit-keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@-webkit-keyframes swal2-show{0%{transform:scale(.7)}45%{transform:scale(1.05)}80%{transform:scale(.95)}100%{transform:scale(1)}}@keyframes swal2-show{0%{transform:scale(.7)}45%{transform:scale(1.05)}80%{transform:scale(.95)}100%{transform:scale(1)}}@-webkit-keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(.5);opacity:0}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(.5);opacity:0}}@-webkit-keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@-webkit-keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@-webkit-keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@-webkit-keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(.4);opacity:0}50%{margin-top:1.625em;transform:scale(.4);opacity:0}80%{margin-top:-.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(.4);opacity:0}50%{margin-top:1.625em;transform:scale(.4);opacity:0}80%{margin-top:-.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@-webkit-keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0);opacity:1}}@-webkit-keyframes swal2-rotate-loading{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}@keyframes swal2-rotate-loading{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto!important}body.swal2-no-backdrop .swal2-container{background-color:transparent!important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px rgba(0,0,0,.4)}@media print{body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow-y:scroll!important}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown) .swal2-container{position:static!important}}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:transparent;pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{top:0;right:auto;bottom:auto;left:50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{top:0;right:0;bottom:auto;left:auto}body.swal2-toast-shown .swal2-container.swal2-top-left,body.swal2-toast-shown .swal2-container.swal2-top-start{top:0;right:auto;bottom:auto;left:0}body.swal2-toast-shown .swal2-container.swal2-center-left,body.swal2-toast-shown .swal2-container.swal2-center-start{top:50%;right:auto;bottom:auto;left:0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{top:50%;right:auto;bottom:auto;left:50%;transform:translate(-50%,-50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{top:50%;right:0;bottom:auto;left:auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-left,body.swal2-toast-shown .swal2-container.swal2-bottom-start{top:auto;right:auto;bottom:0;left:0}body.swal2-toast-shown .swal2-container.swal2-bottom{top:auto;right:auto;bottom:0;left:50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{top:auto;right:0;bottom:0;left:auto}')},201:(vl,nt,B)=>{"use strict";B.r(nt),B.d(nt,{JuegosModule:()=>Lw});var oe=B(8583),$e=B(4363),be=B(7744),u=B(3018),fe=B(8002),zi=B(3637),Sa=B(7574),wr=B(4402),vr=B(5917),je=B(9126),Ot=B(9761),br=B(7393);function vs(){return i=>i.lift(new Ki)}class Ki{call(r,s){return s.subscribe(new ka(r))}}class ka extends br.L{constructor(r){super(r),this.hasPrev=!1}_next(r){let s;this.hasPrev?s=[this.prev,r]:this.hasPrev=!0,this.prev=r,s&&this.destination.next(s)}}var bs=B(2145);class T{constructor(r,s){this.compare=r,this.keySelector=s}call(r,s){return s.subscribe(new In(r,this.compare,this.keySelector))}}class In extends br.L{constructor(r,s,o){super(r),this.keySelector=o,this.hasKey=!1,"function"==typeof s&&(this.compare=s)}compare(r,s){return r===s}_next(r){let s;try{const{keySelector:a}=this;s=a?a(r):r}catch(a){return this.destination.error(a)}let o=!1;if(this.hasKey)try{const{compare:a}=this;o=a(this.key,s)}catch(a){return this.destination.error(a)}else this.hasKey=!0;o||(this.key=s,this.destination.next(r))}}var _e=B(5435),En=B(309),ze=B(8939),Cn=(B(9083),B(4486)),I=B(8239),Yt=B(5452),_s=B(6034),vt=B(300),K=B(4685),Qe=function(i,r){return(Qe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,o){s.__proto__=o}||function(s,o){for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(s[a]=o[a])})(i,r)};function Gi(i){var r="function"==typeof Symbol&&Symbol.iterator,s=r&&i[r],o=0;if(s)return s.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&o>=i.length&&(i=void 0),{value:i&&i[o++],done:!i}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")}var P,Xt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},en=en||{},F=Xt||self;function Mt(){}function An(i){var r=typeof i;return"array"==(r="object"!=r?r:i?Array.isArray(i)?"array":r:"null")||"object"==r&&"number"==typeof i.length}function Sn(i){var r=typeof i;return"object"==r&&null!=i||"function"==r}var kn="closure_uid_"+(1e9*Math.random()>>>0),Nn=0;function Na(i,r,s){return i.call.apply(i.bind,arguments)}function tn(i,r,s){if(!i)throw Error();if(2<arguments.length){var o=Array.prototype.slice.call(arguments,2);return function(){var a=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(a,o),i.apply(r,a)}}return function(){return i.apply(r,arguments)}}function G(i,r,s){return(G=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Na:tn).apply(null,arguments)}function _t(i,r){var s=Array.prototype.slice.call(arguments,1);return function(){var o=s.slice();return o.push.apply(o,arguments),i.apply(this,o)}}function xe(i,r){function s(){}s.prototype=r.prototype,i.Z=r.prototype,i.prototype=new s,i.prototype.constructor=i,i.Vb=function(o,a,c){for(var l=Array(arguments.length-2),f=2;f<arguments.length;f++)l[f-2]=arguments[f];return r.prototype[a].apply(o,l)}}function me(){this.s=this.s,this.o=this.o}var $i={};me.prototype.s=!1,me.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var i=function(i){return Object.prototype.hasOwnProperty.call(i,kn)&&i[kn]||(i[kn]=++Nn)}(this);delete $i[i]}},me.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Is=Array.prototype.indexOf?function(i,r){return Array.prototype.indexOf.call(i,r,void 0)}:function(i,r){if("string"==typeof i)return"string"!=typeof r||1!=r.length?-1:i.indexOf(r,0);for(var s=0;s<i.length;s++)if(s in i&&i[s]===r)return s;return-1},z=Array.prototype.forEach?function(i,r,s){Array.prototype.forEach.call(i,r,s)}:function(i,r,s){for(var o=i.length,a="string"==typeof i?i.split(""):i,c=0;c<o;c++)c in a&&r.call(s,a[c],c,i)};function rt(i){return Array.prototype.concat.apply([],arguments)}function Lt(i){var r=i.length;if(0<r){for(var s=Array(r),o=0;o<r;o++)s[o]=i[o];return s}return[]}function ce(i){return/^[\s\xa0]*$/.test(i)}var ee,Te=String.prototype.trim?function(i){return i.trim()}:function(i){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(i)[1]};function Ae(i,r){return-1!=i.indexOf(r)}function nn(i,r){return i<r?-1:i>r?1:0}e:{var Qi=F.navigator;if(Qi){var Es=Qi.userAgent;if(Es){ee=Es;break e}}ee=""}function _r(i,r,s){for(var o in i)r.call(s,i[o],o,i)}function xr(i){var r={};for(var s in i)r[s]=i[s];return r}var Ji="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Cs(i,r){for(var s,o,a=1;a<arguments.length;a++){for(s in o=arguments[a])i[s]=o[s];for(var c=0;c<Ji.length;c++)s=Ji[c],Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])}}function As(i){return As[" "](i),i}As[" "]=Mt;var Ir,i,qt=Ae(ee,"Opera"),rn=Ae(ee,"Trident")||Ae(ee,"MSIE"),Wi=Ae(ee,"Edge"),Ss=Wi||rn,Yi=Ae(ee,"Gecko")&&!(Ae(ee.toLowerCase(),"webkit")&&!Ae(ee,"Edge"))&&!(Ae(ee,"Trident")||Ae(ee,"MSIE"))&&!Ae(ee,"Edge"),Pa=Ae(ee.toLowerCase(),"webkit")&&!Ae(ee,"Edge");function Tr(){var i=F.document;return i?i.documentMode:void 0}e:{var ks="",Ft=(i=ee,Yi?/rv:([^\);]+)(\)|;)/.exec(i):Wi?/Edge\/([\d\.]+)/.exec(i):rn?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):Pa?/WebKit\/(\S+)/.exec(i):qt?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(Ft&&(ks=Ft?Ft[1]:""),rn){var Ns=Tr();if(null!=Ns&&Ns>parseFloat(ks)){Ir=String(Ns);break e}}Ir=ks}var Oa={};function Ma(){return r=Oa,Object.prototype.hasOwnProperty.call(r,9)?r[9]:r[9]=function(){for(var i=0,r=Te(String(Ir)).split("."),s=Te("9").split("."),o=Math.max(r.length,s.length),a=0;0==i&&a<o;a++){var c=r[a]||"",l=s[a]||"";do{if(c=/(\d*)(\D*)(.*)/.exec(c)||["","","",""],l=/(\d*)(\D*)(.*)/.exec(l)||["","","",""],0==c[0].length&&0==l[0].length)break;i=nn(0==c[1].length?0:parseInt(c[1],10),0==l[1].length?0:parseInt(l[1],10))||nn(0==c[2].length,0==l[2].length)||nn(c[2],l[2]),c=c[3],l=l[3]}while(0==i)}return 0<=i}();var r}var La=F.document&&rn&&(Tr()||parseInt(Ir,10))||void 0,qa=function(){if(!F.addEventListener||!Object.defineProperty)return!1;var i=!1,r=Object.defineProperty({},"passive",{get:function(){i=!0}});try{F.addEventListener("test",Mt,r),F.removeEventListener("test",Mt,r)}catch(s){}return i}();function Se(i,r){this.type=i,this.g=this.target=r,this.defaultPrevented=!1}function j(i,r){if(Se.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var s=this.type=i.type,o=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=r,r=i.relatedTarget){if(Yi){e:{try{As(r.nodeName);var a=!0;break e}catch(c){}a=!1}a||(r=null)}}else"mouseover"==s?r=i.fromElement:"mouseout"==s&&(r=i.toElement);this.relatedTarget=r,o?(this.clientX=void 0!==o.clientX?o.clientX:o.pageX,this.clientY=void 0!==o.clientY?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:Fa[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&j.Z.h.call(this)}}Se.prototype.h=function(){this.defaultPrevented=!0},xe(j,Se);var Fa={2:"touch",3:"pen",4:"mouse"};j.prototype.h=function(){j.Z.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var Pn="closure_listenable_"+(1e6*Math.random()|0),Ra=0;function Ua(i,r,s,o,a){this.listener=i,this.proxy=null,this.src=r,this.type=s,this.capture=!!o,this.ia=a,this.key=++Ra,this.ca=this.fa=!1}function Er(i){i.ca=!0,i.listener=null,i.proxy=null,i.src=null,i.ia=null}function Cr(i){this.src=i,this.g={},this.h=0}function On(i,r){var s=r.type;if(s in i.g){var c,o=i.g[s],a=Is(o,r);(c=0<=a)&&Array.prototype.splice.call(o,a,1),c&&(Er(r),0==i.g[s].length&&(delete i.g[s],i.h--))}}function Rt(i,r,s,o){for(var a=0;a<i.length;++a){var c=i[a];if(!c.ca&&c.listener==r&&c.capture==!!s&&c.ia==o)return a}return-1}Cr.prototype.add=function(i,r,s,o,a){var c=i.toString();(i=this.g[c])||(i=this.g[c]=[],this.h++);var l=Rt(i,r,o,a);return-1<l?(r=i[l],s||(r.fa=!1)):((r=new Ua(r,this.src,c,!!o,a)).fa=s,i.push(r)),r};var Ar="closure_lm_"+(1e6*Math.random()|0),ke={};function eo(i,r,s,o,a){if(o&&o.once)return no(i,r,s,o,a);if(Array.isArray(r)){for(var c=0;c<r.length;c++)eo(i,r[c],s,o,a);return null}return s=Ls(s),i&&i[Pn]?i.N(r,s,Sn(o)?!!o.capture:!!o,a):to(i,r,s,!1,o,a)}function to(i,r,s,o,a,c){if(!r)throw Error("Invalid event type");var l=Sn(a)?!!a.capture:!!a,f=Sr(i);if(f||(i[Ar]=f=new Cr(i)),(s=f.add(r,s,o,l,c)).proxy)return s;if(o=function(){var r=Ba;return function i(s){return r.call(i.src,i.listener,s)}}(),s.proxy=o,o.src=i,o.listener=s,i.addEventListener)qa||(a=l),void 0===a&&(a=!1),i.addEventListener(r.toString(),o,a);else if(i.attachEvent)i.attachEvent(Os(r.toString()),o);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(o)}return s}function no(i,r,s,o,a){if(Array.isArray(r)){for(var c=0;c<r.length;c++)no(i,r[c],s,o,a);return null}return s=Ls(s),i&&i[Pn]?i.O(r,s,Sn(o)?!!o.capture:!!o,a):to(i,r,s,!0,o,a)}function Ds(i,r,s,o,a){if(Array.isArray(r))for(var c=0;c<r.length;c++)Ds(i,r[c],s,o,a);else o=Sn(o)?!!o.capture:!!o,s=Ls(s),i&&i[Pn]?(i=i.i,(r=String(r).toString())in i.g&&-1<(s=Rt(c=i.g[r],s,o,a))&&(Er(c[s]),Array.prototype.splice.call(c,s,1),0==c.length&&(delete i.g[r],i.h--))):i&&(i=Sr(i))&&(r=i.g[r.toString()],i=-1,r&&(i=Rt(r,s,o,a)),(s=-1<i?r[i]:null)&&Ps(s))}function Ps(i){if("number"!=typeof i&&i&&!i.ca){var r=i.src;if(r&&r[Pn])On(r.i,i);else{var s=i.type,o=i.proxy;r.removeEventListener?r.removeEventListener(s,o,i.capture):r.detachEvent?r.detachEvent(Os(s),o):r.addListener&&r.removeListener&&r.removeListener(o),(s=Sr(r))?(On(s,i),0==s.h&&(s.src=null,r[Ar]=null)):Er(i)}}}function Os(i){return i in ke?ke[i]:ke[i]="on"+i}function Ba(i,r){if(i.ca)i=!0;else{r=new j(r,this);var s=i.listener,o=i.ia||i.src;i.fa&&Ps(i),i=s.call(o,r)}return i}function Sr(i){return(i=i[Ar])instanceof Cr?i:null}var Ms="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ls(i){return"function"==typeof i?i:(i[Ms]||(i[Ms]=function(r){return i.handleEvent(r)}),i[Ms])}function pe(){me.call(this),this.i=new Cr(this),this.P=this,this.I=null}function Ie(i,r){var s,o=i.I;if(o)for(s=[];o;o=o.I)s.push(o);if(i=i.P,o=r.type||r,"string"==typeof r)r=new Se(r,i);else if(r instanceof Se)r.target=r.target||i;else{var a=r;Cs(r=new Se(o,i),a)}if(a=!0,s)for(var c=s.length-1;0<=c;c--){var l=r.g=s[c];a=kr(l,o,!0,r)&&a}if(a=kr(l=r.g=i,o,!0,r)&&a,a=kr(l,o,!1,r)&&a,s)for(c=0;c<s.length;c++)a=kr(l=r.g=s[c],o,!1,r)&&a}function kr(i,r,s,o){if(!(r=i.i.g[String(r)]))return!0;r=r.concat();for(var a=!0,c=0;c<r.length;++c){var l=r[c];if(l&&!l.ca&&l.capture==s){var f=l.listener,m=l.ia||l.src;l.fa&&On(i.i,l),a=!1!==f.call(m,o)&&a}}return a&&!o.defaultPrevented}xe(pe,me),pe.prototype[Pn]=!0,pe.prototype.removeEventListener=function(i,r,s,o){Ds(this,i,r,s,o)},pe.prototype.M=function(){if(pe.Z.M.call(this),this.i){var r,i=this.i;for(r in i.g){for(var s=i.g[r],o=0;o<s.length;o++)Er(s[o]);delete i.g[r],i.h--}}this.I=null},pe.prototype.N=function(i,r,s,o){return this.i.add(String(i),r,!1,s,o)},pe.prototype.O=function(i,r,s,o){return this.i.add(String(i),r,!0,s,o)};var qs=F.JSON.stringify;function Va(){var i=oo,r=null;return i.g&&(r=i.g,i.g=i.g.next,i.g||(i.h=null),r.next=null),r}var Rs,ro=function(){function i(){this.h=this.g=null}return i.prototype.add=function(r,s){var o=so.get();o.set(r,s),this.h?this.h.next=o:this.g=o,this.h=o},i}(),so=new(function(){function i(r,s){this.i=r,this.j=s,this.h=0,this.g=null}return i.prototype.get=function(){var r;return 0<this.h?(this.h--,this.g=(r=this.g).next,r.next=null):r=this.i(),r},i}())(function(){return new io},function(i){return i.reset()}),io=function(){function i(){this.next=this.g=this.h=null}return i.prototype.set=function(r,s){this.h=r,this.g=s,this.next=null},i.prototype.reset=function(){this.next=this.g=this.h=null},i}();function ja(i){F.setTimeout(function(){throw i},0)}function Fs(i,r){Rs||function(){var i=F.Promise.resolve(void 0);Rs=function(){i.then(Ka)}}(),xt||(Rs(),xt=!0),oo.add(i,r)}var xt=!1,oo=new ro;function Ka(){for(var i;i=Va();){try{i.h.call(i.g)}catch(s){ja(s)}var r=so;r.j(i),100>r.h&&(r.h++,i.next=r.g,r.g=i)}xt=!1}function R(i,r){pe.call(this),this.h=i||1,this.g=r||F,this.j=G(this.kb,this),this.l=Date.now()}function Us(i){i.da=!1,i.S&&(i.g.clearTimeout(i.S),i.S=null)}function Zs(i,r,s){if("function"==typeof i)s&&(i=G(i,s));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=G(i.handleEvent,i)}return 2147483647<Number(r)?-1:F.setTimeout(i,r||0)}function ao(i){i.g=Zs(function(){i.g=null,i.i&&(i.i=!1,ao(i))},i.j);var r=i.h;i.h=null,i.m.apply(null,r)}xe(R,pe),(P=R.prototype).da=!1,P.S=null,P.kb=function(){if(this.da){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-i):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Ie(this,"tick"),this.da&&(Us(this),this.start()))}},P.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},P.M=function(){R.Z.M.call(this),Us(this),delete this.g};var co=function(i){function r(s,o){var a=i.call(this)||this;return a.m=s,a.j=o,a.h=null,a.i=!1,a.g=null,a}return function(i,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function s(){this.constructor=i}Qe(i,r),i.prototype=null===r?Object.create(r):(s.prototype=r.prototype,new s)}(r,i),r.prototype.l=function(s){this.h=arguments,this.g?this.i=!0:ao(this)},r.prototype.M=function(){i.prototype.M.call(this),this.g&&(F.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},r}(me);function sn(i){me.call(this),this.h=i,this.g={}}xe(sn,me);var uo=[];function lo(i,r,s,o){Array.isArray(s)||(s&&(uo[0]=s.toString()),s=uo);for(var a=0;a<s.length;a++){var c=eo(r,s[a],o||i.handleEvent,!1,i.h||i);if(!c)break;i.g[c.key]=c}}function ho(i){_r(i.g,function(r,s){this.g.hasOwnProperty(s)&&Ps(r)},i),i.g={}}function Mn(){this.g=!0}function on(i,r,s,o){i.info(function(){return"XMLHTTP TEXT ("+r+"): "+function(i,r){if(!i.g)return r;if(!r)return null;try{var s=JSON.parse(r);if(s)for(i=0;i<s.length;i++)if(Array.isArray(s[i])){var o=s[i];if(!(2>o.length)){var a=o[1];if(Array.isArray(a)&&!(1>a.length)){var c=a[0];if("noop"!=c&&"stop"!=c&&"close"!=c)for(var l=1;l<a.length;l++)a[l]=""}}}return qs(s)}catch(f){return r}}(i,s)+(o?" "+o:"")})}sn.prototype.M=function(){sn.Z.M.call(this),ho(this)},sn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Mn.prototype.Aa=function(){this.g=!1},Mn.prototype.info=function(){};var Ut={},fo=null;function Ln(){return fo=fo||new pe}function mo(i){Se.call(this,Ut.Ma,i)}function Zt(i){var r=Ln();Ie(r,new mo(r,i))}function po(i,r){Se.call(this,Ut.STAT_EVENT,i),this.stat=r}function Fe(i){var r=Ln();Ie(r,new po(r,i))}function go(i,r){Se.call(this,Ut.Na,i),this.size=r}function qn(i,r){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return F.setTimeout(function(){i()},r)}Ut.Ma="serverreachability",xe(mo,Se),Ut.STAT_EVENT="statevent",xe(po,Se),Ut.Na="timingevent",xe(go,Se);var Nr={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Vs={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function js(){}function wo(){}js.prototype.h=null;var Hs,Fn={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function zs(){Se.call(this,"d")}function Ks(){Se.call(this,"c")}function Dr(){}function Rn(i,r,s,o){this.l=i,this.j=r,this.m=s,this.X=o||1,this.V=new sn(this),this.P=$a,this.W=new R(i=Ss?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new vo}function vo(){this.i=null,this.g="",this.h=!1}xe(zs,Se),xe(Ks,Se),xe(Dr,js),Dr.prototype.g=function(){return new XMLHttpRequest},Dr.prototype.i=function(){return{}},Hs=new Dr;var $a=45e3,Gs={},Un={};function Zn(i,r,s){i.K=1,i.v=Mr(dt(r)),i.s=s,i.U=!0,$s(i,null)}function $s(i,r){i.F=Date.now(),Vn(i),i.A=dt(i.v);var s=i.A,o=i.X;Array.isArray(o)||(o=[String(o)]),So(s.h,"t",o),i.C=0,s=i.l.H,i.h=new vo,i.g=xl(i.l,s?r:null,!i.s),0<i.O&&(i.L=new co(G(i.Ia,i,i.g),i.O)),lo(i.V,i.g,"readystatechange",i.gb),r=i.H?xr(i.H):{},i.s?(i.u||(i.u="POST"),r["Content-Type"]="application/x-www-form-urlencoded",i.g.ea(i.A,i.u,i.s,r)):(i.u="GET",i.g.ea(i.A,i.u,null,r)),Zt(1),function(i,r,s,o,a,c){i.info(function(){if(i.g)if(c)for(var l="",f=c.split("&"),m=0;m<f.length;m++){var y=f[m].split("=");if(1<y.length){var w=y[0];y=y[1];var b=w.split("_");l=2<=b.length&&"type"==b[1]?l+(w+"=")+y+"&":l+(w+"=redacted&")}}else l=null;else l=c;return"XMLHTTP REQ ("+o+") [attempt "+a+"]: "+r+"\n"+s+"\n"+l})}(i.j,i.u,i.A,i.m,i.X,i.s)}function bo(i){return!!i.g&&"GET"==i.u&&2!=i.K&&i.l.Ba}function Bn(i,r,s){for(var a,o=!0;!i.I&&i.C<s.length;){if((a=Qa(i,s))==Un){4==r&&(i.o=4,Fe(14),o=!1),on(i.j,i.m,null,"[Incomplete Response]");break}if(a==Gs){i.o=4,Fe(15),on(i.j,i.m,s,"[Invalid Chunk]"),o=!1;break}on(i.j,i.m,a,null),Qs(i,a)}bo(i)&&a!=Un&&a!=Gs&&(i.h.g="",i.C=0),4!=r||0!=s.length||i.h.h||(i.o=1,Fe(16),o=!1),i.i=i.i&&o,o?0<s.length&&!i.aa&&(i.aa=!0,(r=i.l).g==i&&r.$&&!r.L&&(r.h.info("Great, no buffering proxy detected. Bytes received: "+s.length),q(r),r.L=!0,Fe(11))):(on(i.j,i.m,s,"[Invalid Chunked Response]"),Tt(i),cn(i))}function Qa(i,r){var s=i.C,o=r.indexOf("\n",s);return-1==o?Un:(s=Number(r.substring(s,o)),isNaN(s)?Gs:(o+=1)+s>r.length?Un:(r=r.substr(o,s),i.C=o+s,r))}function Vn(i){i.Y=Date.now()+i.P,_o(i,i.P)}function _o(i,r){if(null!=i.B)throw Error("WatchDog timer not null");i.B=qn(G(i.eb,i),r)}function jn(i){i.B&&(F.clearTimeout(i.B),i.B=null)}function cn(i){0==i.l.G||i.I||De(i.l,i)}function Tt(i){jn(i);var r=i.L;r&&"function"==typeof r.na&&r.na(),i.L=null,Us(i.W),ho(i.V),i.g&&(r=i.g,i.g=null,r.abort(),r.na())}function Qs(i,r){try{var s=i.l;if(0!=s.G&&(s.g==i||Xs(s.i,i)))if(s.I=i.N,!i.J&&Xs(s.i,i)&&3==s.G){try{var o=s.Ca.g.parse(r)}catch(Z){o=null}if(Array.isArray(o)&&3==o.length){var a=o;if(0==a[0])e:if(s.u)s.ta=a[1],0<s.ta-s.U&&37500>a[2]&&s.N&&0==s.A&&!s.v&&(s.v=qn(G(s.ab,s),6e3));else{if(s.g){if(!(s.g.F+3e3<i.F))break e;Ne(s),Yn(s)}C(s),Fe(18)}if(1>=Ys(s.i)&&s.ka){try{s.ka()}catch(Z){}s.ka=void 0}}else pt(s,11)}else if((i.J||s.g==i)&&Ne(s),!ce(r))for(a=s.Ca.g.parse(r),r=0;r<a.length;r++){var c=a[r];if(s.U=c[0],c=c[1],2==s.G)if("c"==c[0]){s.J=c[1],s.la=c[2];var l=c[3];null!=l&&(s.ma=l,s.h.info("VER="+s.ma));var f=c[4];null!=f&&(s.za=f,s.h.info("SVER="+s.za));var m=c[5];null!=m&&"number"==typeof m&&0<m&&(s.K=o=1.5*m,s.h.info("backChannelRequestTimeoutMs_="+o)),o=s;var y=i.g;if(y){var w=y.g?y.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(w){var b=o.i;!b.g&&(Ae(w,"spdy")||Ae(w,"quic")||Ae(w,"h2"))&&(b.j=b.l,b.g=new Set,b.h&&(ei(b,b.h),b.h=null))}if(o.D){var _=y.g?y.g.getResponseHeader("X-HTTP-Session-Id"):null;_&&(o.sa=_,te(o.F,o.D,_))}}s.G=3,s.j&&s.j.xa(),s.$&&(s.O=Date.now()-i.F,s.h.info("Handshake RTT: "+s.O+"ms"));var E=i;if((o=s).oa=_l(o,o.H?o.la:null,o.W),E.J){No(o.i,E);var k=E,L=o.K;L&&k.setTimeout(L),k.B&&(jn(k),Vn(k)),o.g=E}else v(o);0<s.l.length&&mt(s)}else"stop"!=c[0]&&"close"!=c[0]||pt(s,7);else 3==s.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?pt(s,7):ai(s):"noop"!=c[0]&&s.j&&s.j.wa(c),s.A=0)}Zt(4)}catch(Z){}}function Js(i,r){if(i.forEach&&"function"==typeof i.forEach)i.forEach(r,void 0);else if(An(i)||"string"==typeof i)z(i,r,void 0);else{if(i.T&&"function"==typeof i.T)var s=i.T();else if(i.R&&"function"==typeof i.R)s=void 0;else if(An(i)||"string"==typeof i){s=[];for(var o=i.length,a=0;a<o;a++)s.push(a)}else for(a in s=[],o=0,i)s[o++]=a;a=(o=function(i){if(i.R&&"function"==typeof i.R)return i.R();if("string"==typeof i)return i.split("");if(An(i)){for(var r=[],s=i.length,o=0;o<s;o++)r.push(i[o]);return r}for(o in r=[],s=0,i)r[s++]=i[o];return r}(i)).length;for(var c=0;c<a;c++)r.call(void 0,o[c],s&&s[c],i)}}function un(i,r){this.h={},this.g=[],this.i=0;var s=arguments.length;if(1<s){if(s%2)throw Error("Uneven number of arguments");for(var o=0;o<s;o+=2)this.set(arguments[o],arguments[o+1])}else if(i)if(i instanceof un)for(s=i.T(),o=0;o<s.length;o++)this.set(s[o],i.get(s[o]));else for(o in i)this.set(o,i[o])}function Ws(i){if(i.i!=i.g.length){for(var r=0,s=0;r<i.g.length;){var o=i.g[r];Bt(i.h,o)&&(i.g[s++]=o),r++}i.g.length=s}if(i.i!=i.g.length){var a={};for(s=r=0;r<i.g.length;)Bt(a,o=i.g[r])||(i.g[s++]=o,a[o]=1),r++;i.g.length=s}}function Bt(i,r){return Object.prototype.hasOwnProperty.call(i,r)}(P=Rn.prototype).setTimeout=function(i){this.P=i},P.gb=function(i){i=i.target;var r=this.L;r&&3==ft(i)?r.l():this.Ia(i)},P.Ia=function(i){try{if(i==this.g)e:{var r=ft(this.g),s=this.g.Da(),o=this.g.ba();if(!(3>r)&&(3!=r||Ss||this.g&&(this.h.h||this.g.ga()||Ro(this.g)))){this.I||4!=r||7==s||Zt(8==s||0>=o?3:2),jn(this);var a=this.g.ba();this.N=a;t:if(bo(this)){var c=Ro(this.g);i="";var l=c.length,f=4==ft(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Tt(this),cn(this);var m="";break t}this.h.i=new F.TextDecoder}for(s=0;s<l;s++)this.h.h=!0,i+=this.h.i.decode(c[s],{stream:f&&s==l-1});c.splice(0,l),this.h.g+=i,this.C=0,m=this.h.g}else m=this.g.ga();if(this.i=200==a,function(i,r,s,o,a,c,l){i.info(function(){return"XMLHTTP RESP ("+o+") [ attempt "+a+"]: "+r+"\n"+s+"\n"+c+" "+l})}(this.j,this.u,this.A,this.m,this.X,r,a),this.i){if(this.$&&!this.J){t:{if(this.g){var y,w=this.g;if((y=w.g?w.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ce(y)){var b=y;break t}}b=null}if(!(a=b)){this.i=!1,this.o=3,Fe(12),Tt(this),cn(this);break e}on(this.j,this.m,a,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Qs(this,a)}this.U?(Bn(this,r,m),Ss&&this.i&&3==r&&(lo(this.V,this.W,"tick",this.fb),this.W.start())):(on(this.j,this.m,m,null),Qs(this,m)),4==r&&Tt(this),this.i&&!this.I&&(4==r?De(this.l,this):(this.i=!1,Vn(this)))}else 400==a&&0<m.indexOf("Unknown SID")?(this.o=3,Fe(12)):(this.o=0,Fe(13)),Tt(this),cn(this)}}}catch(_){}},P.fb=function(){if(this.g){var i=ft(this.g),r=this.g.ga();this.C<r.length&&(jn(this),Bn(this,i,r),this.i&&4!=i&&Vn(this))}},P.cancel=function(){this.I=!0,Tt(this)},P.eb=function(){this.B=null;var i=Date.now();0<=i-this.Y?(function(i,r){i.info(function(){return"TIMEOUT: "+r})}(this.j,this.A),2!=this.K&&(Zt(3),Fe(17)),Tt(this),this.o=2,cn(this)):_o(this,this.Y-i)},(P=un.prototype).R=function(){Ws(this);for(var i=[],r=0;r<this.g.length;r++)i.push(this.h[this.g[r]]);return i},P.T=function(){return Ws(this),this.g.concat()},P.get=function(i,r){return Bt(this.h,i)?this.h[i]:r},P.set=function(i,r){Bt(this.h,i)||(this.i++,this.g.push(i)),this.h[i]=r},P.forEach=function(i,r){for(var s=this.T(),o=0;o<s.length;o++){var a=s[o],c=this.get(a);i.call(r,c,a,this)}};var xo=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function It(i,r){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,i instanceof It){this.g=void 0!==r?r:i.g,Pr(this,i.j),this.s=i.s,Or(this,i.i),zn(this,i.m),this.l=i.l,r=i.h;var s=new Gn;s.i=r.i,r.g&&(s.g=new un(r.g),s.h=r.h),To(this,s),this.o=i.o}else i&&(s=String(i).match(xo))?(this.g=!!r,Pr(this,s[1]||"",!0),this.s=Kn(s[2]||""),Or(this,s[3]||"",!0),zn(this,s[4]),this.l=Kn(s[5]||"",!0),To(this,s[6]||"",!0),this.o=Kn(s[7]||"")):(this.g=!!r,this.h=new Gn(null,this.g))}function dt(i){return new It(i)}function Pr(i,r,s){i.j=s?Kn(r,!0):r,i.j&&(i.j=i.j.replace(/:$/,""))}function Or(i,r,s){i.i=s?Kn(r,!0):r}function zn(i,r){if(r){if(r=Number(r),isNaN(r)||0>r)throw Error("Bad port number "+r);i.m=r}else i.m=null}function To(i,r,s){r instanceof Gn?(i.h=r,function(i,r){r&&!i.j&&(Ct(i),i.i=null,i.g.forEach(function(s,o){var a=o.toLowerCase();o!=a&&(Co(this,o),So(this,a,s))},i)),i.j=r}(i.h,i.g)):(s||(r=Hn(r,Eo)),i.h=new Gn(r,i.g))}function te(i,r,s){i.h.set(r,s)}function Mr(i){return te(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function Kn(i,r){return i?r?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function Hn(i,r,s){return"string"==typeof i?(i=encodeURI(i).replace(r,ec),s&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function ec(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}It.prototype.toString=function(){var i=[],r=this.j;r&&i.push(Hn(r,Et,!0),":");var s=this.i;return(s||"file"==r)&&(i.push("//"),(r=this.s)&&i.push(Hn(r,Et,!0),"@"),i.push(encodeURIComponent(String(s)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(s=this.m)&&i.push(":",String(s))),(s=this.l)&&(this.i&&"/"!=s.charAt(0)&&i.push("/"),i.push(Hn(s,"/"==s.charAt(0)?tc:Io,!0))),(s=this.h.toString())&&i.push("?",s),(s=this.o)&&i.push("#",Hn(s,nc)),i.join("")};var Et=/[#\/\?@]/g,Io=/[#\?:]/g,tc=/[#\?]/g,Eo=/[#\?@]/g,nc=/#/g;function Gn(i,r){this.h=this.g=null,this.i=i||null,this.j=!!r}function Ct(i){i.g||(i.g=new un,i.h=0,i.i&&function(i,r){if(i){i=i.split("&");for(var s=0;s<i.length;s++){var o=i[s].indexOf("="),a=null;if(0<=o){var c=i[s].substring(0,o);a=i[s].substring(o+1)}else c=i[s];r(c,a?decodeURIComponent(a.replace(/\+/g," ")):"")}}}(i.i,function(r,s){i.add(decodeURIComponent(r.replace(/\+/g," ")),s)}))}function Co(i,r){Ct(i),r=ln(i,r),Bt(i.g.h,r)&&(i.i=null,i.h-=i.g.get(r).length,Bt((i=i.g).h,r)&&(delete i.h[r],i.i--,i.g.length>2*i.i&&Ws(i)))}function Ao(i,r){return Ct(i),r=ln(i,r),Bt(i.g.h,r)}function So(i,r,s){Co(i,r),0<s.length&&(i.i=null,i.g.set(ln(i,r),Lt(s)),i.h+=s.length)}function ln(i,r){return r=String(r),i.j&&(r=r.toLowerCase()),r}(P=Gn.prototype).add=function(i,r){Ct(this),this.i=null,i=ln(this,i);var s=this.g.get(i);return s||this.g.set(i,s=[]),s.push(r),this.h+=1,this},P.forEach=function(i,r){Ct(this),this.g.forEach(function(s,o){z(s,function(a){i.call(r,a,o,this)},this)},this)},P.T=function(){Ct(this);for(var i=this.g.R(),r=this.g.T(),s=[],o=0;o<r.length;o++)for(var a=i[o],c=0;c<a.length;c++)s.push(r[o]);return s},P.R=function(i){Ct(this);var r=[];if("string"==typeof i)Ao(this,i)&&(r=rt(r,this.g.get(ln(this,i))));else{i=this.g.R();for(var s=0;s<i.length;s++)r=rt(r,i[s])}return r},P.set=function(i,r){return Ct(this),this.i=null,Ao(this,i=ln(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[r]),this.h+=1,this},P.get=function(i,r){return i&&0<(i=this.R(i)).length?String(i[0]):r},P.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var i=[],r=this.g.T(),s=0;s<r.length;s++){var o=r[s],a=encodeURIComponent(String(o));o=this.R(o);for(var c=0;c<o.length;c++){var l=a;""!==o[c]&&(l+="="+encodeURIComponent(String(o[c]))),i.push(l)}}return this.i=i.join("&")};var sc=function(r,s){this.h=r,this.g=s};function ko(i){this.l=i||ic,i=F.PerformanceNavigationTiming?0<(i=F.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(F.g&&F.g.Ea&&F.g.Ea()&&F.g.Ea().Zb),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var ic=10;function Lr(i){return!!i.h||!!i.g&&i.g.size>=i.j}function Ys(i){return i.h?1:i.g?i.g.size:0}function Xs(i,r){return i.h?i.h==r:!!i.g&&i.g.has(r)}function ei(i,r){i.g?i.g.add(r):i.h=r}function No(i,r){i.h&&i.h==r?i.h=null:i.g&&i.g.has(r)&&i.g.delete(r)}function ti(i){var r,s;if(null!=i.h)return i.i.concat(i.h.D);if(null!=i.g&&0!==i.g.size){var o=i.i;try{for(var a=Gi(i.g.values()),c=a.next();!c.done;c=a.next())o=o.concat(c.value.D)}catch(f){r={error:f}}finally{try{c&&!c.done&&(s=a.return)&&s.call(a)}finally{if(r)throw r.error}}return o}return Lt(i.i)}function ni(){}function ri(){this.g=new ni}function Do(i,r,s){var o=s||"";try{Js(i,function(a,c){var l=a;Sn(a)&&(l=qs(a)),r.push(o+c+"="+encodeURIComponent(l))})}catch(a){throw r.push(o+"type="+encodeURIComponent("_badmap")),a}}function qr(i,r,s,o,a){try{r.onload=null,r.onerror=null,r.onabort=null,r.ontimeout=null,a(o)}catch(c){}}function Vt(i){this.l=i.$b||null,this.j=i.ib||!1}function $n(i,r){pe.call(this),this.D=i,this.u=r,this.m=void 0,this.readyState=ii,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ko.prototype.cancel=function(){var i,r;if(this.i=ti(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){try{for(var s=Gi(this.g.values()),o=s.next();!o.done;o=s.next())o.value.cancel()}catch(c){i={error:c}}finally{try{o&&!o.done&&(r=s.return)&&r.call(s)}finally{if(i)throw i.error}}this.g.clear()}},ni.prototype.stringify=function(i){return F.JSON.stringify(i,void 0)},ni.prototype.parse=function(i){return F.JSON.parse(i,void 0)},xe(Vt,js),Vt.prototype.g=function(){return new $n(this.l,this.j)},Vt.prototype.i=function(i){return function(){return i}}({}),xe($n,pe);var ii=0;function Po(i){i.j.read().then(i.Sa.bind(i)).catch(i.ha.bind(i))}function Qn(i){i.readyState=4,i.l=null,i.j=null,i.A=null,Jn(i)}function Jn(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(P=$n.prototype).open=function(i,r){if(this.readyState!=ii)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=r,this.readyState=1,Jn(this)},P.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var r={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(r.body=i),(this.D||F).fetch(new Request(this.B,r)).then(this.Va.bind(this),this.ha.bind(this))},P.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Qn(this)),this.readyState=ii},P.Va=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,Jn(this)),this.g&&(this.readyState=3,Jn(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==F.ReadableStream&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Po(this)}else i.text().then(this.Ua.bind(this),this.ha.bind(this))},P.Sa=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var r=i.value?i.value:new Uint8Array(0);(r=this.A.decode(r,{stream:!i.done}))&&(this.response=this.responseText+=r)}i.done?Qn(this):Jn(this),3==this.readyState&&Po(this)}},P.Ua=function(i){this.g&&(this.response=this.responseText=i,Qn(this))},P.Ta=function(i){this.g&&(this.response=i,Qn(this))},P.ha=function(){this.g&&Qn(this)},P.setRequestHeader=function(i,r){this.v.append(i,r)},P.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},P.getAllResponseHeaders=function(){if(!this.h)return"";for(var i=[],r=this.h.entries(),s=r.next();!s.done;)i.push((s=s.value)[0]+": "+s[1]),s=r.next();return i.join("\r\n")},Object.defineProperty($n.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var oc=F.JSON.parse;function ue(i){pe.call(this),this.headers=new un,this.u=i||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Oo,this.K=this.L=!1}xe(ue,pe);var Oo="",ac=/^https?$/i,Fr=["POST","PUT"];function uc(i){return"content-type"==i.toLowerCase()}function Mo(i,r){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=r,i.m=5,Lo(i),Rr(i)}function Lo(i){i.D||(i.D=!0,Ie(i,"complete"),Ie(i,"error"))}function qo(i){if(i.h&&void 0!==en&&(!i.C[1]||4!=ft(i)||2!=i.ba()))if(i.v&&4==ft(i))Zs(i.Fa,0,i);else if(Ie(i,"readystatechange"),4==ft(i)){i.h=!1;try{var o,r=i.ba();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var s=!0;break e;default:s=!1}if(!(o=s)){var a;if(a=0===r){var c=String(i.H).match(xo)[1]||null;if(!c&&F.self&&F.self.location){var l=F.self.location.protocol;c=l.substr(0,l.length-1)}a=!ac.test(c?c.toLowerCase():"")}o=a}if(o)Ie(i,"complete"),Ie(i,"success");else{i.m=6;try{var f=2<ft(i)?i.g.statusText:""}catch(m){f=""}i.j=f+" ["+i.ba()+"]",Lo(i)}}finally{Rr(i)}}}function Rr(i,r){if(i.g){Fo(i);var s=i.g,o=i.C[0]?Mt:null;i.g=null,i.C=null,r||Ie(i,"ready");try{s.onreadystatechange=o}catch(a){}}}function Fo(i){i.g&&i.K&&(i.g.ontimeout=null),i.A&&(F.clearTimeout(i.A),i.A=null)}function ft(i){return i.g?i.g.readyState:0}function Ro(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.J){case Oo:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch(r){return null}}function oi(i,r,s){e:{for(o in s){var o=!1;break e}o=!0}o||(s=function(i){var r="";return _r(i,function(s,o){r+=o,r+=":",r+=s,r+="\r\n"}),r}(s),"string"==typeof i?null!=s&&encodeURIComponent(String(s)):te(i,r,s))}function Wn(i,r,s){return s&&s.internalChannelParams&&s.internalChannelParams[i]||r}function Uo(i){this.za=0,this.l=[],this.h=new Mn,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Wn("failFast",!1,i),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Wn("baseRetryDelayMs",5e3,i),this.$a=Wn("retryDelaySeedMs",1e4,i),this.Ya=Wn("forwardChannelMaxRetries",2,i),this.ra=Wn("forwardChannelRequestTimeoutMs",2e4,i),this.qa=i&&i.xmlHttpFactory||void 0,this.Ba=i&&i.Yb||!1,this.K=void 0,this.H=i&&i.supportsCrossDomainXhr||!1,this.J="",this.i=new ko(i&&i.concurrentRequestLimit),this.Ca=new ri,this.ja=i&&i.fastHandshake||!1,this.Ra=i&&i.Wb||!1,i&&i.Aa&&this.h.Aa(),i&&i.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&i&&i.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!i||!1!==i.Xb}function ai(i){if(ci(i),3==i.G){var r=i.V++,s=dt(i.F);te(s,"SID",i.J),te(s,"RID",r),te(s,"TYPE","terminate"),h(i,s),(r=new Rn(i,i.h,r,void 0)).K=2,r.v=Mr(dt(s)),s=!1,F.navigator&&F.navigator.sendBeacon&&(s=F.navigator.sendBeacon(r.v.toString(),"")),!s&&F.Image&&((new Image).src=r.v,s=!0),s||(r.g=xl(r.l,null),r.g.ea(r.v)),r.F=Date.now(),Vn(r)}bl(i)}function Yn(i){i.g&&(q(i),i.g.cancel(),i.g=null)}function ci(i){Yn(i),i.u&&(F.clearTimeout(i.u),i.u=null),Ne(i),i.i.cancel(),i.m&&("number"==typeof i.m&&F.clearTimeout(i.m),i.m=null)}function Xn(i,r){i.l.push(new sc(i.Za++,r)),3==i.G&&mt(i)}function mt(i){Lr(i.i)||i.m||(i.m=!0,Fs(i.Ha,i),i.C=0)}function d(i,r){var s;s=r?r.m:i.V++;var o=dt(i.F);te(o,"SID",i.J),te(o,"RID",s),te(o,"AID",i.U),h(i,o),i.o&&i.s&&oi(o,i.o,i.s),s=new Rn(i,i.h,s,i.C+1),null===i.o&&(s.H=i.s),r&&(i.l=r.D.concat(i.l)),r=g(i,s,1e3),s.setTimeout(Math.round(.5*i.ra)+Math.round(.5*i.ra*Math.random())),ei(i.i,s),Zn(s,o,r)}function h(i,r){i.j&&Js({},function(s,o){te(r,o,s)})}function g(i,r,s){s=Math.min(i.l.length,s);var o=i.j?G(i.j.Oa,i.j,i):null;e:for(var a=i.l,c=-1;;){var l=["count="+s];-1==c?0<s?l.push("ofs="+(c=a[0].h)):c=0:l.push("ofs="+c);for(var f=!0,m=0;m<s;m++){var y=a[m].h,w=a[m].g;if(0>(y-=c))c=Math.max(0,a[m].h-100),f=!1;else try{Do(w,l,"req"+y+"_")}catch(b){o&&o(w)}}if(f){o=l.join("&");break e}}return i=i.l.splice(0,s),r.D=i,o}function v(i){i.g||i.u||(i.Y=1,Fs(i.Ga,i),i.A=0)}function C(i){return!(i.g||i.u||3<=i.A||(i.Y++,i.u=qn(G(i.Ga,i),zt(i,i.A)),i.A++,0))}function q(i){null!=i.B&&(F.clearTimeout(i.B),i.B=null)}function ae(i){i.g=new Rn(i,i.h,"rpc",i.Y),null===i.o&&(i.g.H=i.s),i.g.O=0;var r=dt(i.oa);te(r,"RID","rpc"),te(r,"SID",i.J),te(r,"CI",i.N?"0":"1"),te(r,"AID",i.U),h(i,r),te(r,"TYPE","xmlhttp"),i.o&&i.s&&oi(r,i.o,i.s),i.K&&i.g.setTimeout(i.K);var s=i.g;i=i.la,s.K=1,s.v=Mr(dt(r)),s.s=null,s.U=!0,$s(s,i)}function Ne(i){null!=i.v&&(F.clearTimeout(i.v),i.v=null)}function De(i,r){var s=null;if(i.g==r){Ne(i),q(i),i.g=null;var o=2}else{if(!Xs(i.i,r))return;s=r.D,No(i.i,r),o=1}if(i.I=r.N,0!=i.G)if(r.i)if(1==o){s=r.s?r.s.length:0,r=Date.now()-r.F;var a=i.C;Ie(o=Ln(),new go(o,s,r,a)),mt(i)}else v(i);else if(3==(a=r.o)||0==a&&0<i.I||!(1==o&&function(i,r){return!(Ys(i.i)>=i.i.j-(i.m?1:0)||(i.m?(i.l=r.D.concat(i.l),0):1==i.G||2==i.G||i.C>=(i.Xa?0:i.Ya)||(i.m=qn(G(i.Ha,i,r),zt(i,i.C)),i.C++,0)))}(i,r)||2==o&&C(i)))switch(s&&0<s.length&&(r=i.i,r.i=r.i.concat(s)),a){case 1:pt(i,5);break;case 4:pt(i,10);break;case 3:pt(i,6);break;default:pt(i,2)}}function zt(i,r){var s=i.Pa+Math.floor(Math.random()*i.$a);return i.j||(s*=2),s*r}function pt(i,r){if(i.h.info("Error code "+r),2==r){var s=null;i.j&&(s=null);var o=G(i.jb,i);s||(s=new It("//www.google.com/images/cleardot.gif"),F.location&&"http"==F.location.protocol||Pr(s,"https"),Mr(s)),function(i,r){var s=new Mn;if(F.Image){var o=new Image;o.onload=_t(qr,s,o,"TestLoadImage: loaded",!0,r),o.onerror=_t(qr,s,o,"TestLoadImage: error",!1,r),o.onabort=_t(qr,s,o,"TestLoadImage: abort",!1,r),o.ontimeout=_t(qr,s,o,"TestLoadImage: timeout",!1,r),F.setTimeout(function(){o.ontimeout&&o.ontimeout()},1e4),o.src=i}else r(!1)}(s.toString(),o)}else Fe(2);i.G=0,i.j&&i.j.va(r),bl(i),ci(i)}function bl(i){i.G=0,i.I=-1,i.j&&((0!=ti(i.i).length||0!=i.l.length)&&(i.i.i.length=0,Lt(i.l),i.l.length=0),i.j.ua())}function _l(i,r,s){var o=function(i){return i instanceof It?dt(i):new It(i,void 0)}(s);if(""!=o.i)r&&Or(o,r+"."+o.i),zn(o,o.m);else{var a=F.location;o=function(i,r,s,o){var a=new It(null,void 0);return i&&Pr(a,i),r&&Or(a,r),s&&zn(a,s),o&&(a.l=o),a}(a.protocol,r?r+"."+a.hostname:a.hostname,+a.port,s)}return i.aa&&_r(i.aa,function(c,l){te(o,l,c)}),s=i.sa,(r=i.D)&&s&&te(o,r,s),te(o,"VER",i.ma),h(i,o),o}function xl(i,r,s){if(r&&!i.H)throw Error("Can't create secondary domain capable XhrIo object.");return(r=new ue(s&&i.Ba&&!i.qa?new Vt({ib:!0}):i.qa)).L=i.H,r}function Tl(){}function Zo(){if(rn&&!(10<=Number(La)))throw Error("Environmental error: no available transport.")}function st(i,r){pe.call(this),this.g=new Uo(r),this.l=i,this.h=r&&r.messageUrlParams||null,i=r&&r.messageHeaders||null,r&&r.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=r&&r.initMessageHeaders||null,r&&r.messageContentType&&(i?i["X-WebChannel-Content-Type"]=r.messageContentType:i={"X-WebChannel-Content-Type":r.messageContentType}),r&&r.ya&&(i?i["X-WebChannel-Client-Profile"]=r.ya:i={"X-WebChannel-Client-Profile":r.ya}),this.g.P=i,(i=r&&r.httpHeadersOverwriteParam)&&!ce(i)&&(this.g.o=i),this.A=r&&r.supportsCrossDomainXhr||!1,this.v=r&&r.sendRawJson||!1,(r=r&&r.httpSessionIdParam)&&!ce(r)&&(this.g.D=r,null!==(i=this.h)&&r in i&&r in(i=this.h)&&delete i[r]),this.j=new Ur(this)}function Il(i){zs.call(this);var r=i.__sm__;if(r){e:{for(var s in r){i=s;break e}i=void 0}(this.i=i)&&(i=this.i,r=null!==r&&i in r?r[i]:void 0),this.data=r}else this.data=i}function El(){Ks.call(this),this.status=1}function Ur(i){this.g=i}(P=ue.prototype).ea=function(i,r,s,o){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+i);r=r?r.toUpperCase():"GET",this.H=i,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Hs.g(),this.C=function(i){return i.h||(i.h=i.i())}(this.u?this.u:Hs),this.g.onreadystatechange=G(this.Fa,this);try{this.F=!0,this.g.open(r,String(i),!0),this.F=!1}catch(c){return void Mo(this,c)}i=s||"";var a=new un(this.headers);o&&Js(o,function(c,l){a.set(l,c)}),o=function(i){e:{for(var r=uc,s=i.length,o="string"==typeof i?i.split(""):i,a=0;a<s;a++)if(a in o&&r.call(void 0,o[a],a,i)){r=a;break e}r=-1}return 0>r?null:"string"==typeof i?i.charAt(r):i[r]}(a.T()),s=F.FormData&&i instanceof F.FormData,!(0<=Is(Fr,r))||o||s||a.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),a.forEach(function(c,l){this.g.setRequestHeader(l,c)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Fo(this),0<this.B&&((this.K=function(i){return rn&&Ma()&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=G(this.pa,this)):this.A=Zs(this.pa,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(c){Mo(this,c)}},P.pa=function(){void 0!==en&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ie(this,"timeout"),this.abort(8))},P.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,Ie(this,"complete"),Ie(this,"abort"),Rr(this))},P.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Rr(this,!0)),ue.Z.M.call(this)},P.Fa=function(){this.s||(this.F||this.v||this.l?qo(this):this.cb())},P.cb=function(){qo(this)},P.ba=function(){try{return 2<ft(this)?this.g.status:-1}catch(i){return-1}},P.ga=function(){try{return this.g?this.g.responseText:""}catch(i){return""}},P.Qa=function(i){if(this.g){var r=this.g.responseText;return i&&0==r.indexOf(i)&&(r=r.substring(i.length)),oc(r)}},P.Da=function(){return this.m},P.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(P=Uo.prototype).ma=8,P.G=1,P.hb=function(i){try{this.h.info("Origin Trials invoked: "+i)}catch(r){}},P.Ha=function(i){if(this.m)if(this.m=null,1==this.G){if(!i){this.V=Math.floor(1e5*Math.random()),i=this.V++;var r=new Rn(this,this.h,i,void 0),s=this.s;if(this.P&&(s?Cs(s=xr(s),this.P):s=this.P),null===this.o&&(r.H=s),this.ja)e:{for(var o=0,a=0;a<this.l.length;a++){var c=this.l[a];if(void 0===(c="__data__"in c.g&&"string"==typeof(c=c.g.__data__)?c.length:void 0))break;if(4096<(o+=c)){o=a;break e}if(4096===o||a===this.l.length-1){o=a+1;break e}}o=1e3}else o=1e3;o=g(this,r,o),te(a=dt(this.F),"RID",i),te(a,"CVER",22),this.D&&te(a,"X-HTTP-Session-Id",this.D),h(this,a),this.o&&s&&oi(a,this.o,s),ei(this.i,r),this.Ra&&te(a,"TYPE","init"),this.ja?(te(a,"$req",o),te(a,"SID","null"),r.$=!0,Zn(r,a,null)):Zn(r,a,o),this.G=2}}else 3==this.G&&(i?d(this,i):0==this.l.length||Lr(this.i)||d(this))},P.Ga=function(){if(this.u=null,ae(this),this.$&&!(this.L||null==this.g||0>=this.O)){var i=2*this.O;this.h.info("BP detection timer enabled: "+i),this.B=qn(G(this.bb,this),i)}},P.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Fe(10),Yn(this),ae(this))},P.ab=function(){null!=this.v&&(this.v=null,Yn(this),C(this),Fe(19))},P.jb=function(i){i?(this.h.info("Successfully pinged google.com"),Fe(2)):(this.h.info("Failed to ping google.com"),Fe(1))},(P=Tl.prototype).xa=function(){},P.wa=function(){},P.va=function(){},P.ua=function(){},P.Oa=function(){},Zo.prototype.g=function(i,r){return new st(i,r)},xe(st,pe),st.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var i=this.g,r=this.l,s=this.h||void 0;i.Wa&&(i.h.info("Origin Trials enabled."),Fs(G(i.hb,i,r))),Fe(0),i.W=r,i.aa=s||{},i.N=i.X,i.F=_l(i,null,i.W),mt(i)},st.prototype.close=function(){ai(this.g)},st.prototype.u=function(i){if("string"==typeof i){var r={};r.__data__=i,Xn(this.g,r)}else this.v?((r={}).__data__=qs(i),Xn(this.g,r)):Xn(this.g,i)},st.prototype.M=function(){this.g.j=null,delete this.j,ai(this.g),delete this.g,st.Z.M.call(this)},xe(Il,zs),xe(El,Ks),xe(Ur,Tl),Ur.prototype.xa=function(){Ie(this.g,"a")},Ur.prototype.wa=function(i){Ie(this.g,new Il(i))},Ur.prototype.va=function(i){Ie(this.g,new El(i))},Ur.prototype.ua=function(){Ie(this.g,"b")},Zo.prototype.createWebChannel=Zo.prototype.g,st.prototype.send=st.prototype.u,st.prototype.open=st.prototype.m,st.prototype.close=st.prototype.close,Nr.NO_ERROR=0,Nr.TIMEOUT=8,Nr.HTTP_ERROR=6,Vs.COMPLETE="complete",wo.EventType=Fn,Fn.OPEN="a",Fn.CLOSE="b",Fn.ERROR="c",Fn.MESSAGE="d",pe.prototype.listen=pe.prototype.N,ue.prototype.listenOnce=ue.prototype.O,ue.prototype.getLastError=ue.prototype.La,ue.prototype.getLastErrorCode=ue.prototype.Da,ue.prototype.getStatus=ue.prototype.ba,ue.prototype.getResponseJson=ue.prototype.Qa,ue.prototype.getResponseText=ue.prototype.ga,ue.prototype.send=ue.prototype.ea;var Bo=Nr,Sl=Vs,kl=Ut,hc_PROXY=10,hc_NOPROXY=11,Nl=Vt,ui=wo,Dl=ue;class Re{constructor(r){this.uid=r}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(r){return r.uid===this.uid}}Re.UNAUTHENTICATED=new Re(null),Re.GOOGLE_CREDENTIALS=new Re("google-credentials-uid"),Re.FIRST_PARTY=new Re("first-party-uid"),Re.MOCK_USER=new Re("mock-user");let Zr="9.0.1";const hn=new vt.Yd("@firebase/firestore");function dc(){return hn.logLevel}function N(i,...r){if(hn.logLevel<=vt.in.DEBUG){const s=r.map(fc);hn.debug(`Firestore (${Zr}): ${i}`,...s)}}function ge(i,...r){if(hn.logLevel<=vt.in.ERROR){const s=r.map(fc);hn.error(`Firestore (${Zr}): ${i}`,...s)}}function li(i,...r){if(hn.logLevel<=vt.in.WARN){const s=r.map(fc);hn.warn(`Firestore (${Zr}): ${i}`,...s)}}function fc(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch(s){return i}}function M(i="Unexpected state"){const r=`FIRESTORE (${Zr}) INTERNAL ASSERTION FAILED: `+i;throw ge(r),new Error(r)}function U(i,r){i||M()}function D(i,r){return i}const x={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class S extends Error{constructor(r,s){super(s),this.code=r,this.message=s,this.name="FirebaseError",this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Pe{constructor(){this.promise=new Promise((r,s)=>{this.resolve=r,this.reject=s})}}class Pl{constructor(r,s){this.user=s,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization=`Bearer ${r}`}}class Lf{getToken(){return Promise.resolve(null)}invalidateToken(){}start(r,s){r.enqueueRetryable(()=>s(Re.UNAUTHENTICATED))}shutdown(){}}class qf{constructor(r){this.token=r,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(r,s){this.changeListener=s,r.enqueueRetryable(()=>s(this.token.user))}shutdown(){this.changeListener=null}}class Ff{constructor(r){this.t=r,this.currentUser=Re.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(r,s){var o=this;let a=this.i;const c=m=>this.i!==a?(a=this.i,s(m)):Promise.resolve();let l=new Pe;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Pe,r.enqueueRetryable(()=>c(this.currentUser))};const f=m=>{r.enqueueRetryable((0,I.Z)(function*(){N("FirebaseCredentialsProvider","Auth detected"),o.auth=m,o.auth.addAuthTokenListener(o.o),yield l.promise,yield c(o.currentUser)}))};this.t.onInit(m=>f(m)),setTimeout(()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?f(m):(N("FirebaseCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Pe)}},0),r.enqueueRetryable((0,I.Z)(function*(){0===o.i&&(yield l.promise,yield c(o.currentUser))}))}getToken(){const r=this.i,s=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(s).then(o=>this.i!==r?(N("FirebaseCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(U("string"==typeof o.accessToken),new Pl(o.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const r=this.auth&&this.auth.getUid();return U(null===r||"string"==typeof r),new Re(r)}}class Rf{constructor(r,s,o){this.h=r,this.l=s,this.m=o,this.type="FirstParty",this.user=Re.FIRST_PARTY}get authHeaders(){const r={"X-Goog-AuthUser":this.l},s=this.h.auth.getAuthHeaderValueForFirstParty([]);return s&&(r.Authorization=s),this.m&&(r["X-Goog-Iam-Authorization-Token"]=this.m),r}}class Uf{constructor(r,s,o){this.h=r,this.l=s,this.m=o}getToken(){return Promise.resolve(new Rf(this.h,this.l,this.m))}start(r,s){r.enqueueRetryable(()=>s(Re.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class it{constructor(r,s){this.previousValue=r,s&&(s.sequenceNumberHandler=o=>this.g(o),this.p=o=>s.writeSequenceNumber(o))}g(r){return this.previousValue=Math.max(r,this.previousValue),this.previousValue}next(){const r=++this.previousValue;return this.p&&this.p(r),r}}function Zf(i){const r="undefined"!=typeof self&&(self.crypto||self.msCrypto),s=new Uint8Array(i);if(r&&"function"==typeof r.getRandomValues)r.getRandomValues(s);else for(let o=0;o<i;o++)s[o]=Math.floor(256*Math.random());return s}it.T=-1;class Ol{static I(){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=Math.floor(256/r.length)*r.length;let o="";for(;o.length<20;){const a=Zf(40);for(let c=0;c<a.length;++c)o.length<20&&a[c]<s&&(o+=r.charAt(a[c]%r.length))}return o}}function H(i,r){return i<r?-1:i>r?1:0}function Br(i,r,s){return i.length===r.length&&i.every((o,a)=>s(o,r[a]))}function Ml(i){return i+"\0"}class Oe{constructor(r,s){if(this.seconds=r,this.nanoseconds=s,s<0)throw new S(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(s>=1e9)throw new S(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(r<-62135596800)throw new S(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+r);if(r>=253402300800)throw new S(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+r)}static now(){return Oe.fromMillis(Date.now())}static fromDate(r){return Oe.fromMillis(r.getTime())}static fromMillis(r){const s=Math.floor(r/1e3),o=Math.floor(1e6*(r-1e3*s));return new Oe(s,o)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(r){return this.seconds===r.seconds?H(this.nanoseconds,r.nanoseconds):H(this.seconds,r.seconds)}isEqual(r){return r.seconds===this.seconds&&r.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class V{constructor(r){this.timestamp=r}static fromTimestamp(r){return new V(r)}static min(){return new V(new Oe(0,0))}compareTo(r){return this.timestamp._compareTo(r.timestamp)}isEqual(r){return this.timestamp.isEqual(r.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function Ll(i){let r=0;for(const s in i)Object.prototype.hasOwnProperty.call(i,s)&&r++;return r}function er(i,r){for(const s in i)Object.prototype.hasOwnProperty.call(i,s)&&r(s,i[s])}function ql(i){for(const r in i)if(Object.prototype.hasOwnProperty.call(i,r))return!1;return!0}class hi{constructor(r,s,o){void 0===s?s=0:s>r.length&&M(),void 0===o?o=r.length-s:o>r.length-s&&M(),this.segments=r,this.offset=s,this.len=o}get length(){return this.len}isEqual(r){return 0===hi.comparator(this,r)}child(r){const s=this.segments.slice(this.offset,this.limit());return r instanceof hi?r.forEach(o=>{s.push(o)}):s.push(r),this.construct(s)}limit(){return this.offset+this.length}popFirst(r){return this.construct(this.segments,this.offset+(r=void 0===r?1:r),this.length-r)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(r){return this.segments[this.offset+r]}isEmpty(){return 0===this.length}isPrefixOf(r){if(r.length<this.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==r.get(s))return!1;return!0}isImmediateParentOf(r){if(this.length+1!==r.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==r.get(s))return!1;return!0}forEach(r){for(let s=this.offset,o=this.limit();s<o;s++)r(this.segments[s])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(r,s){const o=Math.min(r.length,s.length);for(let a=0;a<o;a++){const c=r.get(a),l=s.get(a);if(c<l)return-1;if(c>l)return 1}return r.length<s.length?-1:r.length>s.length?1:0}}class J extends hi{construct(r,s,o){return new J(r,s,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...r){const s=[];for(const o of r){if(o.indexOf("//")>=0)throw new S(x.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);s.push(...o.split("/").filter(a=>a.length>0))}return new J(s)}static emptyPath(){return new J([])}}const Bf=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ue extends hi{construct(r,s,o){return new Ue(r,s,o)}static isValidIdentifier(r){return Bf.test(r)}canonicalString(){return this.toArray().map(r=>(r=r.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ue.isValidIdentifier(r)||(r="`"+r+"`"),r)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Ue(["__name__"])}static fromServerFormat(r){const s=[];let o="",a=0;const c=()=>{if(0===o.length)throw new S(x.INVALID_ARGUMENT,`Invalid field path (${r}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);s.push(o),o=""};let l=!1;for(;a<r.length;){const f=r[a];if("\\"===f){if(a+1===r.length)throw new S(x.INVALID_ARGUMENT,"Path has trailing escape character: "+r);const m=r[a+1];if("\\"!==m&&"."!==m&&"`"!==m)throw new S(x.INVALID_ARGUMENT,"Path has invalid escape sequence: "+r);o+=m,a+=2}else"`"===f?(l=!l,a++):"."!==f||l?(o+=f,a++):(c(),a++)}if(c(),l)throw new S(x.INVALID_ARGUMENT,"Unterminated ` in path: "+r);return new Ue(s)}static emptyPath(){return new Ue([])}}class Vr{constructor(r){this.fields=r,r.sort(Ue.comparator)}covers(r){for(const s of this.fields)if(s.isPrefixOf(r))return!0;return!1}isEqual(r){return Br(this.fields,r.fields,(s,o)=>s.isEqual(o))}}class Me{constructor(r){this.binaryString=r}static fromBase64String(r){const s=atob(r);return new Me(s)}static fromUint8Array(r){const s=function(o){let a="";for(let c=0;c<o.length;++c)a+=String.fromCharCode(o[c]);return a}(r);return new Me(s)}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(r){const s=new Uint8Array(r.length);for(let o=0;o<r.length;o++)s[o]=r.charCodeAt(o);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(r){return H(this.binaryString,r.binaryString)}isEqual(r){return this.binaryString===r.binaryString}}Me.EMPTY_BYTE_STRING=new Me("");const jf=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function dn(i){if(U(!!i),"string"==typeof i){let r=0;const s=jf.exec(i);if(U(!!s),s[1]){let a=s[1];a=(a+"000000000").substr(0,9),r=Number(a)}const o=new Date(i);return{seconds:Math.floor(o.getTime()/1e3),nanos:r}}return{seconds:ye(i.seconds),nanos:ye(i.nanos)}}function ye(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function jr(i){return"string"==typeof i?Me.fromBase64String(i):Me.fromUint8Array(i)}function mc(i){var r,s;return"server_timestamp"===(null===(s=((null===(r=null==i?void 0:i.mapValue)||void 0===r?void 0:r.fields)||{}).__type__)||void 0===s?void 0:s.stringValue)}function Fl(i){const r=i.mapValue.fields.__previous_value__;return mc(r)?Fl(r):r}function di(i){const r=dn(i.mapValue.fields.__local_write_time__.timestampValue);return new Oe(r.seconds,r.nanos)}function tr(i){return null==i}function Vo(i){return 0===i&&1/i==-1/0}function Rl(i){return"number"==typeof i&&Number.isInteger(i)&&!Vo(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}class O{constructor(r){this.path=r}static fromPath(r){return new O(J.fromString(r))}static fromName(r){return new O(J.fromString(r).popFirst(5))}hasCollectionId(r){return this.path.length>=2&&this.path.get(this.path.length-2)===r}isEqual(r){return null!==r&&0===J.comparator(this.path,r.path)}toString(){return this.path.toString()}static comparator(r,s){return J.comparator(r.path,s.path)}static isDocumentKey(r){return r.length%2==0}static fromSegments(r){return new O(new J(r.slice()))}}function nr(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?mc(i)?4:10:M()}function At(i,r){const s=nr(i);if(s!==nr(r))return!1;switch(s){case 0:return!0;case 1:return i.booleanValue===r.booleanValue;case 4:return di(i).isEqual(di(r));case 3:return function(o,a){if("string"==typeof o.timestampValue&&"string"==typeof a.timestampValue&&o.timestampValue.length===a.timestampValue.length)return o.timestampValue===a.timestampValue;const c=dn(o.timestampValue),l=dn(a.timestampValue);return c.seconds===l.seconds&&c.nanos===l.nanos}(i,r);case 5:return i.stringValue===r.stringValue;case 6:return a=r,jr(i.bytesValue).isEqual(jr(a.bytesValue));case 7:return i.referenceValue===r.referenceValue;case 8:return function(o,a){return ye(o.geoPointValue.latitude)===ye(a.geoPointValue.latitude)&&ye(o.geoPointValue.longitude)===ye(a.geoPointValue.longitude)}(i,r);case 2:return function(o,a){if("integerValue"in o&&"integerValue"in a)return ye(o.integerValue)===ye(a.integerValue);if("doubleValue"in o&&"doubleValue"in a){const c=ye(o.doubleValue),l=ye(a.doubleValue);return c===l?Vo(c)===Vo(l):isNaN(c)&&isNaN(l)}return!1}(i,r);case 9:return Br(i.arrayValue.values||[],r.arrayValue.values||[],At);case 10:return function(o,a){const c=o.mapValue.fields||{},l=a.mapValue.fields||{};if(Ll(c)!==Ll(l))return!1;for(const f in c)if(c.hasOwnProperty(f)&&(void 0===l[f]||!At(c[f],l[f])))return!1;return!0}(i,r);default:return M()}var a}function fi(i,r){return void 0!==(i.values||[]).find(s=>At(s,r))}function zr(i,r){const s=nr(i),o=nr(r);if(s!==o)return H(s,o);switch(s){case 0:return 0;case 1:return H(i.booleanValue,r.booleanValue);case 2:return function(a,c){const l=ye(a.integerValue||a.doubleValue),f=ye(c.integerValue||c.doubleValue);return l<f?-1:l>f?1:l===f?0:isNaN(l)?isNaN(f)?0:-1:1}(i,r);case 3:return Ul(i.timestampValue,r.timestampValue);case 4:return Ul(di(i),di(r));case 5:return H(i.stringValue,r.stringValue);case 6:return function(a,c){const l=jr(a),f=jr(c);return l.compareTo(f)}(i.bytesValue,r.bytesValue);case 7:return function(a,c){const l=a.split("/"),f=c.split("/");for(let m=0;m<l.length&&m<f.length;m++){const y=H(l[m],f[m]);if(0!==y)return y}return H(l.length,f.length)}(i.referenceValue,r.referenceValue);case 8:return function(a,c){const l=H(ye(a.latitude),ye(c.latitude));return 0!==l?l:H(ye(a.longitude),ye(c.longitude))}(i.geoPointValue,r.geoPointValue);case 9:return function(a,c){const l=a.values||[],f=c.values||[];for(let m=0;m<l.length&&m<f.length;++m){const y=zr(l[m],f[m]);if(y)return y}return H(l.length,f.length)}(i.arrayValue,r.arrayValue);case 10:return function(a,c){const l=a.fields||{},f=Object.keys(l),m=c.fields||{},y=Object.keys(m);f.sort(),y.sort();for(let w=0;w<f.length&&w<y.length;++w){const b=H(f[w],y[w]);if(0!==b)return b;const _=zr(l[f[w]],m[y[w]]);if(0!==_)return _}return H(f.length,y.length)}(i.mapValue,r.mapValue);default:throw M()}}function Ul(i,r){if("string"==typeof i&&"string"==typeof r&&i.length===r.length)return H(i,r);const s=dn(i),o=dn(r),a=H(s.seconds,o.seconds);return 0!==a?a:H(s.nanos,o.nanos)}function pc(i){return gc(i)}function gc(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(o){const a=dn(o);return`time(${a.seconds},${a.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?jr(i.bytesValue).toBase64():"referenceValue"in i?O.fromName(i.referenceValue).toString():"geoPointValue"in i?`geo(${(r=i.geoPointValue).latitude},${r.longitude})`:"arrayValue"in i?function(o){let a="[",c=!0;for(const l of o.values||[])c?c=!1:a+=",",a+=gc(l);return a+"]"}(i.arrayValue):"mapValue"in i?function(o){const a=Object.keys(o.fields||{}).sort();let c="{",l=!0;for(const f of a)l?l=!1:c+=",",c+=`${f}:${gc(o.fields[f])}`;return c+"}"}(i.mapValue):M();var r}function jo(i,r){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${r.path.canonicalString()}`}}function yc(i){return!!i&&"integerValue"in i}function wc(i){return!!i&&"arrayValue"in i}function Zl(i){return!!i&&"nullValue"in i}function Bl(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function zo(i){return!!i&&"mapValue"in i}function mi(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const r={mapValue:{fields:{}}};return er(i.mapValue.fields,(s,o)=>r.mapValue.fields[s]=mi(o)),r}if(i.arrayValue){const r={arrayValue:{values:[]}};for(let s=0;s<(i.arrayValue.values||[]).length;++s)r.arrayValue.values[s]=mi(i.arrayValue.values[s]);return r}return Object.assign({},i)}class Ke{constructor(r){this.value=r}static empty(){return new Ke({mapValue:{}})}field(r){if(r.isEmpty())return this.value;{let s=this.value;for(let o=0;o<r.length-1;++o)if(s=(s.mapValue.fields||{})[r.get(o)],!zo(s))return null;return s=(s.mapValue.fields||{})[r.lastSegment()],s||null}}set(r,s){this.getFieldsMap(r.popLast())[r.lastSegment()]=mi(s)}setAll(r){let s=Ue.emptyPath(),o={},a=[];r.forEach((l,f)=>{if(!s.isImmediateParentOf(f)){const m=this.getFieldsMap(s);this.applyChanges(m,o,a),o={},a=[],s=f.popLast()}l?o[f.lastSegment()]=mi(l):a.push(f.lastSegment())});const c=this.getFieldsMap(s);this.applyChanges(c,o,a)}delete(r){const s=this.field(r.popLast());zo(s)&&s.mapValue.fields&&delete s.mapValue.fields[r.lastSegment()]}isEqual(r){return At(this.value,r.value)}getFieldsMap(r){let s=this.value;s.mapValue.fields||(s.mapValue={fields:{}});for(let o=0;o<r.length;++o){let a=s.mapValue.fields[r.get(o)];zo(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},s.mapValue.fields[r.get(o)]=a),s=a}return s.mapValue.fields}applyChanges(r,s,o){er(s,(a,c)=>r[a]=c);for(const a of o)delete r[a]}clone(){return new Ke(mi(this.value))}}function Vl(i){const r=[];return er(i.fields,(s,o)=>{const a=new Ue([s]);if(zo(o)){const c=Vl(o.mapValue).fields;if(0===c.length)r.push(a);else for(const l of c)r.push(a.child(l))}else r.push(a)}),new Vr(r)}class se{constructor(r,s,o,a,c){this.key=r,this.documentType=s,this.version=o,this.data=a,this.documentState=c}static newInvalidDocument(r){return new se(r,0,V.min(),Ke.empty(),0)}static newFoundDocument(r,s,o){return new se(r,1,s,o,0)}static newNoDocument(r,s){return new se(r,2,s,Ke.empty(),0)}static newUnknownDocument(r,s){return new se(r,3,s,Ke.empty(),2)}convertToFoundDocument(r,s){return this.version=r,this.documentType=1,this.data=s,this.documentState=0,this}convertToNoDocument(r){return this.version=r,this.documentType=2,this.data=Ke.empty(),this.documentState=0,this}convertToUnknownDocument(r){return this.version=r,this.documentType=3,this.data=Ke.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(r){return r instanceof se&&this.key.isEqual(r.key)&&this.version.isEqual(r.version)&&this.documentType===r.documentType&&this.documentState===r.documentState&&this.data.isEqual(r.data)}clone(){return new se(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class zf{constructor(r,s=null,o=[],a=[],c=null,l=null,f=null){this.path=r,this.collectionGroup=s,this.orderBy=o,this.filters=a,this.limit=c,this.startAt=l,this.endAt=f,this.A=null}}function jl(i,r=null,s=[],o=[],a=null,c=null,l=null){return new zf(i,r,s,o,a,c,l)}function pi(i){const r=D(i);if(null===r.A){let s=r.path.canonicalString();null!==r.collectionGroup&&(s+="|cg:"+r.collectionGroup),s+="|f:",s+=r.filters.map(o=>function(i){return i.field.canonicalString()+i.op.toString()+pc(i.value)}(o)).join(","),s+="|ob:",s+=r.orderBy.map(o=>{return(a=o).field.canonicalString()+a.dir;var a}).join(","),tr(r.limit)||(s+="|l:",s+=r.limit),r.startAt&&(s+="|lb:",s+=Go(r.startAt)),r.endAt&&(s+="|ub:",s+=Go(r.endAt)),r.A=s}return r.A}function Ko(i,r){if(i.limit!==r.limit||i.orderBy.length!==r.orderBy.length)return!1;for(let a=0;a<i.orderBy.length;a++)if(!em(i.orderBy[a],r.orderBy[a]))return!1;if(i.filters.length!==r.filters.length)return!1;for(let a=0;a<i.filters.length;a++)if((s=i.filters[a]).op!==(o=r.filters[a]).op||!s.field.isEqual(o.field)||!At(s.value,o.value))return!1;var s,o;return i.collectionGroup===r.collectionGroup&&!!i.path.isEqual(r.path)&&!!Hl(i.startAt,r.startAt)&&Hl(i.endAt,r.endAt)}function Ho(i){return O.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}class Je extends class{}{constructor(r,s,o){super(),this.field=r,this.op=s,this.value=o}static create(r,s,o){return r.isKeyField()?"in"===s||"not-in"===s?this.R(r,s,o):new Gf(r,s,o):"array-contains"===s?new Jf(r,o):"in"===s?new Wf(r,o):"not-in"===s?new Yf(r,o):"array-contains-any"===s?new Xf(r,o):new Je(r,s,o)}static R(r,s,o){return"in"===s?new $f(r,o):new Qf(r,o)}matches(r){const s=r.data.field(this.field);return"!="===this.op?null!==s&&this.P(zr(s,this.value)):null!==s&&nr(this.value)===nr(s)&&this.P(zr(s,this.value))}P(r){switch(this.op){case"<":return r<0;case"<=":return r<=0;case"==":return 0===r;case"!=":return 0!==r;case">":return r>0;case">=":return r>=0;default:return M()}}v(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Gf extends Je{constructor(r,s,o){super(r,s,o),this.key=O.fromName(o.referenceValue)}matches(r){const s=O.comparator(r.key,this.key);return this.P(s)}}class $f extends Je{constructor(r,s){super(r,"in",s),this.keys=zl(0,s)}matches(r){return this.keys.some(s=>s.isEqual(r.key))}}class Qf extends Je{constructor(r,s){super(r,"not-in",s),this.keys=zl(0,s)}matches(r){return!this.keys.some(s=>s.isEqual(r.key))}}function zl(i,r){var s;return((null===(s=r.arrayValue)||void 0===s?void 0:s.values)||[]).map(o=>O.fromName(o.referenceValue))}class Jf extends Je{constructor(r,s){super(r,"array-contains",s)}matches(r){const s=r.data.field(this.field);return wc(s)&&fi(s.arrayValue,this.value)}}class Wf extends Je{constructor(r,s){super(r,"in",s)}matches(r){const s=r.data.field(this.field);return null!==s&&fi(this.value.arrayValue,s)}}class Yf extends Je{constructor(r,s){super(r,"not-in",s)}matches(r){if(fi(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const s=r.data.field(this.field);return null!==s&&!fi(this.value.arrayValue,s)}}class Xf extends Je{constructor(r,s){super(r,"array-contains-any",s)}matches(r){const s=r.data.field(this.field);return!(!wc(s)||!s.arrayValue.values)&&s.arrayValue.values.some(o=>fi(this.value.arrayValue,o))}}class gi{constructor(r,s){this.position=r,this.before=s}}function Go(i){return`${i.before?"b":"a"}:${i.position.map(r=>pc(r)).join(",")}`}class Kr{constructor(r,s="asc"){this.field=r,this.dir=s}}function em(i,r){return i.dir===r.dir&&i.field.isEqual(r.field)}function Kl(i,r,s){let o=0;for(let a=0;a<i.position.length;a++){const c=r[a],l=i.position[a];if(o=c.field.isKeyField()?O.comparator(O.fromName(l.referenceValue),s.key):zr(l,s.data.field(c.field)),"desc"===c.dir&&(o*=-1),0!==o)break}return i.before?o<=0:o<0}function Hl(i,r){if(null===i)return null===r;if(null===r||i.before!==r.before||i.position.length!==r.position.length)return!1;for(let s=0;s<i.position.length;s++)if(!At(i.position[s],r.position[s]))return!1;return!0}class Kt{constructor(r,s=null,o=[],a=[],c=null,l="F",f=null,m=null){this.path=r,this.collectionGroup=s,this.explicitOrderBy=o,this.filters=a,this.limit=c,this.limitType=l,this.startAt=f,this.endAt=m,this.V=null,this.S=null}}function Gl(i,r,s,o,a,c,l,f){return new Kt(i,r,s,o,a,c,l,f)}function Hr(i){return new Kt(i)}function $o(i){return!tr(i.limit)&&"F"===i.limitType}function Qo(i){return!tr(i.limit)&&"L"===i.limitType}function vc(i){return i.explicitOrderBy.length>0?i.explicitOrderBy[0].field:null}function bc(i){for(const r of i.filters)if(r.v())return r.field;return null}function _c(i){return null!==i.collectionGroup}function Gr(i){const r=D(i);if(null===r.V){r.V=[];const s=bc(r),o=vc(r);if(null!==s&&null===o)s.isKeyField()||r.V.push(new Kr(s)),r.V.push(new Kr(Ue.keyField(),"asc"));else{let a=!1;for(const c of r.explicitOrderBy)r.V.push(c),c.field.isKeyField()&&(a=!0);if(!a){const c=r.explicitOrderBy.length>0?r.explicitOrderBy[r.explicitOrderBy.length-1].dir:"asc";r.V.push(new Kr(Ue.keyField(),c))}}}return r.V}function ut(i){const r=D(i);if(!r.S)if("F"===r.limitType)r.S=jl(r.path,r.collectionGroup,Gr(r),r.filters,r.limit,r.startAt,r.endAt);else{const s=[];for(const c of Gr(r))s.push(new Kr(c.field,"desc"===c.dir?"asc":"desc"));const o=r.endAt?new gi(r.endAt.position,!r.endAt.before):null,a=r.startAt?new gi(r.startAt.position,!r.startAt.before):null;r.S=jl(r.path,r.collectionGroup,s,r.filters,r.limit,o,a)}return r.S}function $l(i,r,s){return new Kt(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),r,s,i.startAt,i.endAt)}function yi(i,r){return Ko(ut(i),ut(r))&&i.limitType===r.limitType}function Ql(i){return`${pi(ut(i))}|lt:${i.limitType}`}function xc(i){return`Query(target=${function(i){let r=i.path.canonicalString();return null!==i.collectionGroup&&(r+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(r+=`, filters: [${i.filters.map(s=>{return`${(o=s).field.canonicalString()} ${o.op} ${pc(o.value)}`;var o}).join(", ")}]`),tr(i.limit)||(r+=", limit: "+i.limit),i.orderBy.length>0&&(r+=`, orderBy: [${i.orderBy.map(s=>{return`${(o=s).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),i.startAt&&(r+=", startAt: "+Go(i.startAt)),i.endAt&&(r+=", endAt: "+Go(i.endAt)),`Target(${r})`}(ut(i))}; limitType=${i.limitType})`}function wi(i,r){return r.isFoundDocument()&&function(s,o){const a=o.key.path;return null!==s.collectionGroup?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(a):O.isDocumentKey(s.path)?s.path.isEqual(a):s.path.isImmediateParentOf(a)}(i,r)&&function(s,o){for(const a of s.explicitOrderBy)if(!a.field.isKeyField()&&null===o.data.field(a.field))return!1;return!0}(i,r)&&function(s,o){for(const a of s.filters)if(!a.matches(o))return!1;return!0}(i,r)&&(o=r,!((s=i).startAt&&!Kl(s.startAt,Gr(s),o)||s.endAt&&Kl(s.endAt,Gr(s),o)));var s,o}function Jl(i){return(r,s)=>{let o=!1;for(const a of Gr(i)){const c=tm(a,r,s);if(0!==c)return c;o=o||a.field.isKeyField()}return 0}}function tm(i,r,s){const o=i.field.isKeyField()?O.comparator(r.key,s.key):function(a,c,l){const f=c.data.field(a),m=l.data.field(a);return null!==f&&null!==m?zr(f,m):M()}(i.field,r,s);switch(i.dir){case"asc":return o;case"desc":return-1*o;default:return M()}}function Wl(i,r){if(i.D){if(isNaN(r))return{doubleValue:"NaN"};if(r===1/0)return{doubleValue:"Infinity"};if(r===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Vo(r)?"-0":r}}function Yl(i){return{integerValue:""+i}}function Xl(i,r){return Rl(r)?Yl(r):Wl(i,r)}class Jo{constructor(){this._=void 0}}function nm(i,r,s){return i instanceof $r?function(o,a){const c={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return a&&(c.fields.__previous_value__=a),{mapValue:c}}(s,r):i instanceof rr?th(i,r):i instanceof sr?nh(i,r):function(o,a){const c=eh(o,a),l=rh(c)+rh(o.C);return yc(c)&&yc(o.C)?Yl(l):Wl(o.N,l)}(i,r)}function rm(i,r,s){return i instanceof rr?th(i,r):i instanceof sr?nh(i,r):s}function eh(i,r){return i instanceof Qr?yc(s=r)||(o=s)&&"doubleValue"in o?r:{integerValue:0}:null;var o,s}class $r extends Jo{}class rr extends Jo{constructor(r){super(),this.elements=r}}function th(i,r){const s=sh(r);for(const o of i.elements)s.some(a=>At(a,o))||s.push(o);return{arrayValue:{values:s}}}class sr extends Jo{constructor(r){super(),this.elements=r}}function nh(i,r){let s=sh(r);for(const o of i.elements)s=s.filter(a=>!At(a,o));return{arrayValue:{values:s}}}class Qr extends Jo{constructor(r,s){super(),this.N=r,this.C=s}}function rh(i){return ye(i.integerValue||i.doubleValue)}function sh(i){return wc(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class vi{constructor(r,s){this.field=r,this.transform=s}}class im{constructor(r,s){this.version=r,this.transformResults=s}}class we{constructor(r,s){this.updateTime=r,this.exists=s}static none(){return new we}static exists(r){return new we(void 0,r)}static updateTime(r){return new we(r)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(r){return this.exists===r.exists&&(this.updateTime?!!r.updateTime&&this.updateTime.isEqual(r.updateTime):!r.updateTime)}}function Wo(i,r){return void 0!==i.updateTime?r.isFoundDocument()&&r.version.isEqual(i.updateTime):void 0===i.exists||i.exists===r.isFoundDocument()}class Yo{}function om(i,r,s){i instanceof bi?function(o,a,c){const l=o.value.clone(),f=ch(o.fieldTransforms,a,c.transformResults);l.setAll(f),a.convertToFoundDocument(c.version,l).setHasCommittedMutations()}(i,r,s):i instanceof fn?function(o,a,c){if(!Wo(o.precondition,a))return void a.convertToUnknownDocument(c.version);const l=ch(o.fieldTransforms,a,c.transformResults),f=a.data;f.setAll(ah(o)),f.setAll(l),a.convertToFoundDocument(c.version,f).setHasCommittedMutations()}(i,r,s):r.convertToNoDocument(s.version).setHasCommittedMutations()}function Tc(i,r,s){var a;i instanceof bi?function(o,a,c){if(!Wo(o.precondition,a))return;const l=o.value.clone(),f=uh(o.fieldTransforms,c,a);l.setAll(f),a.convertToFoundDocument(oh(a),l).setHasLocalMutations()}(i,r,s):i instanceof fn?function(o,a,c){if(!Wo(o.precondition,a))return;const l=uh(o.fieldTransforms,c,a),f=a.data;f.setAll(ah(o)),f.setAll(l),a.convertToFoundDocument(oh(a),f).setHasLocalMutations()}(i,r,s):Wo(i.precondition,a=r)&&a.convertToNoDocument(V.min())}function am(i,r){let s=null;for(const o of i.fieldTransforms){const a=r.data.field(o.field),c=eh(o.transform,a||null);null!=c&&(null==s&&(s=Ke.empty()),s.set(o.field,c))}return s||null}function ih(i,r){return i.type===r.type&&!!i.key.isEqual(r.key)&&!!i.precondition.isEqual(r.precondition)&&(o=r.fieldTransforms,!!(void 0===(s=i.fieldTransforms)&&void 0===o||s&&o&&Br(s,o,(a,c)=>function(i,r){return i.field.isEqual(r.field)&&(o=r.transform,(s=i.transform)instanceof rr&&o instanceof rr||s instanceof sr&&o instanceof sr?Br(s.elements,o.elements,At):s instanceof Qr&&o instanceof Qr?At(s.C,o.C):s instanceof $r&&o instanceof $r);var s,o}(a,c))))&&(0===i.type?i.value.isEqual(r.value):1!==i.type||i.data.isEqual(r.data)&&i.fieldMask.isEqual(r.fieldMask));var s,o}function oh(i){return i.isFoundDocument()?i.version:V.min()}class bi extends Yo{constructor(r,s,o,a=[]){super(),this.key=r,this.value=s,this.precondition=o,this.fieldTransforms=a,this.type=0}}class fn extends Yo{constructor(r,s,o,a,c=[]){super(),this.key=r,this.data=s,this.fieldMask=o,this.precondition=a,this.fieldTransforms=c,this.type=1}}function ah(i){const r=new Map;return i.fieldMask.fields.forEach(s=>{if(!s.isEmpty()){const o=i.data.field(s);r.set(s,o)}}),r}function ch(i,r,s){const o=new Map;U(i.length===s.length);for(let a=0;a<s.length;a++){const c=i[a],l=c.transform,f=r.data.field(c.field);o.set(c.field,rm(l,f,s[a]))}return o}function uh(i,r,s){const o=new Map;for(const a of i){const c=a.transform,l=s.data.field(a.field);o.set(a.field,nm(c,l,r))}return o}class _i extends Yo{constructor(r,s){super(),this.key=r,this.precondition=s,this.type=2,this.fieldTransforms=[]}}class Ic extends Yo{constructor(r,s){super(),this.key=r,this.precondition=s,this.type=3,this.fieldTransforms=[]}}class cm{constructor(r){this.count=r}}var ve,$;function lh(i){switch(i){case x.OK:return M();case x.CANCELLED:case x.UNKNOWN:case x.DEADLINE_EXCEEDED:case x.RESOURCE_EXHAUSTED:case x.INTERNAL:case x.UNAVAILABLE:case x.UNAUTHENTICATED:return!1;case x.INVALID_ARGUMENT:case x.NOT_FOUND:case x.ALREADY_EXISTS:case x.PERMISSION_DENIED:case x.FAILED_PRECONDITION:case x.ABORTED:case x.OUT_OF_RANGE:case x.UNIMPLEMENTED:case x.DATA_LOSS:return!0;default:return M()}}function hh(i){if(void 0===i)return ge("GRPC error has no .code"),x.UNKNOWN;switch(i){case ve.OK:return x.OK;case ve.CANCELLED:return x.CANCELLED;case ve.UNKNOWN:return x.UNKNOWN;case ve.DEADLINE_EXCEEDED:return x.DEADLINE_EXCEEDED;case ve.RESOURCE_EXHAUSTED:return x.RESOURCE_EXHAUSTED;case ve.INTERNAL:return x.INTERNAL;case ve.UNAVAILABLE:return x.UNAVAILABLE;case ve.UNAUTHENTICATED:return x.UNAUTHENTICATED;case ve.INVALID_ARGUMENT:return x.INVALID_ARGUMENT;case ve.NOT_FOUND:return x.NOT_FOUND;case ve.ALREADY_EXISTS:return x.ALREADY_EXISTS;case ve.PERMISSION_DENIED:return x.PERMISSION_DENIED;case ve.FAILED_PRECONDITION:return x.FAILED_PRECONDITION;case ve.ABORTED:return x.ABORTED;case ve.OUT_OF_RANGE:return x.OUT_OF_RANGE;case ve.UNIMPLEMENTED:return x.UNIMPLEMENTED;case ve.DATA_LOSS:return x.DATA_LOSS;default:return M()}}($=ve||(ve={}))[$.OK=0]="OK",$[$.CANCELLED=1]="CANCELLED",$[$.UNKNOWN=2]="UNKNOWN",$[$.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$[$.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$[$.NOT_FOUND=5]="NOT_FOUND",$[$.ALREADY_EXISTS=6]="ALREADY_EXISTS",$[$.PERMISSION_DENIED=7]="PERMISSION_DENIED",$[$.UNAUTHENTICATED=16]="UNAUTHENTICATED",$[$.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$[$.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$[$.ABORTED=10]="ABORTED",$[$.OUT_OF_RANGE=11]="OUT_OF_RANGE",$[$.UNIMPLEMENTED=12]="UNIMPLEMENTED",$[$.INTERNAL=13]="INTERNAL",$[$.UNAVAILABLE=14]="UNAVAILABLE",$[$.DATA_LOSS=15]="DATA_LOSS";class Ee{constructor(r,s){this.comparator=r,this.root=s||Ze.EMPTY}insert(r,s){return new Ee(this.comparator,this.root.insert(r,s,this.comparator).copy(null,null,Ze.BLACK,null,null))}remove(r){return new Ee(this.comparator,this.root.remove(r,this.comparator).copy(null,null,Ze.BLACK,null,null))}get(r){let s=this.root;for(;!s.isEmpty();){const o=this.comparator(r,s.key);if(0===o)return s.value;o<0?s=s.left:o>0&&(s=s.right)}return null}indexOf(r){let s=0,o=this.root;for(;!o.isEmpty();){const a=this.comparator(r,o.key);if(0===a)return s+o.left.size;a<0?o=o.left:(s+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(r){return this.root.inorderTraversal(r)}forEach(r){this.inorderTraversal((s,o)=>(r(s,o),!1))}toString(){const r=[];return this.inorderTraversal((s,o)=>(r.push(`${s}:${o}`),!1)),`{${r.join(", ")}}`}reverseTraversal(r){return this.root.reverseTraversal(r)}getIterator(){return new Xo(this.root,null,this.comparator,!1)}getIteratorFrom(r){return new Xo(this.root,r,this.comparator,!1)}getReverseIterator(){return new Xo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(r){return new Xo(this.root,r,this.comparator,!0)}}class Xo{constructor(r,s,o,a){this.isReverse=a,this.nodeStack=[];let c=1;for(;!r.isEmpty();)if(c=s?o(r.key,s):1,a&&(c*=-1),c<0)r=this.isReverse?r.left:r.right;else{if(0===c){this.nodeStack.push(r);break}this.nodeStack.push(r),r=this.isReverse?r.right:r.left}}getNext(){let r=this.nodeStack.pop();const s={key:r.key,value:r.value};if(this.isReverse)for(r=r.left;!r.isEmpty();)this.nodeStack.push(r),r=r.right;else for(r=r.right;!r.isEmpty();)this.nodeStack.push(r),r=r.left;return s}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const r=this.nodeStack[this.nodeStack.length-1];return{key:r.key,value:r.value}}}class Ze{constructor(r,s,o,a,c){this.key=r,this.value=s,this.color=null!=o?o:Ze.RED,this.left=null!=a?a:Ze.EMPTY,this.right=null!=c?c:Ze.EMPTY,this.size=this.left.size+1+this.right.size}copy(r,s,o,a,c){return new Ze(null!=r?r:this.key,null!=s?s:this.value,null!=o?o:this.color,null!=a?a:this.left,null!=c?c:this.right)}isEmpty(){return!1}inorderTraversal(r){return this.left.inorderTraversal(r)||r(this.key,this.value)||this.right.inorderTraversal(r)}reverseTraversal(r){return this.right.reverseTraversal(r)||r(this.key,this.value)||this.left.reverseTraversal(r)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(r,s,o){let a=this;const c=o(r,a.key);return a=c<0?a.copy(null,null,null,a.left.insert(r,s,o),null):0===c?a.copy(null,s,null,null,null):a.copy(null,null,null,null,a.right.insert(r,s,o)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Ze.EMPTY;let r=this;return r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.removeMin(),null),r.fixUp()}remove(r,s){let o,a=this;if(s(r,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(r,s),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),0===s(r,a.key)){if(a.right.isEmpty())return Ze.EMPTY;o=a.right.min(),a=a.copy(o.key,o.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(r,s))}return a.fixUp()}isRed(){return this.color}fixUp(){let r=this;return r.right.isRed()&&!r.left.isRed()&&(r=r.rotateLeft()),r.left.isRed()&&r.left.left.isRed()&&(r=r.rotateRight()),r.left.isRed()&&r.right.isRed()&&(r=r.colorFlip()),r}moveRedLeft(){let r=this.colorFlip();return r.right.left.isRed()&&(r=r.copy(null,null,null,null,r.right.rotateRight()),r=r.rotateLeft(),r=r.colorFlip()),r}moveRedRight(){let r=this.colorFlip();return r.left.left.isRed()&&(r=r.rotateRight(),r=r.colorFlip()),r}rotateLeft(){const r=this.copy(null,null,Ze.RED,null,this.right.left);return this.right.copy(null,null,this.color,r,null)}rotateRight(){const r=this.copy(null,null,Ze.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,r)}colorFlip(){const r=this.left.copy(null,null,!this.left.color,null,null),s=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,r,s)}checkMaxDepth(){const r=this.check();return Math.pow(2,r)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw M();const r=this.left.check();if(r!==this.right.check())throw M();return r+(this.isRed()?0:1)}}Ze.EMPTY=null,Ze.RED=!0,Ze.BLACK=!1,Ze.EMPTY=new class{constructor(){this.size=0}get key(){throw M()}get value(){throw M()}get color(){throw M()}get left(){throw M()}get right(){throw M()}copy(i,r,s,o,a){return this}insert(i,r,s){return new Ze(i,r)}remove(i,r){return this}isEmpty(){return!0}inorderTraversal(i){return!1}reverseTraversal(i){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class le{constructor(r){this.comparator=r,this.data=new Ee(this.comparator)}has(r){return null!==this.data.get(r)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(r){return this.data.indexOf(r)}forEach(r){this.data.inorderTraversal((s,o)=>(r(s),!1))}forEachInRange(r,s){const o=this.data.getIteratorFrom(r[0]);for(;o.hasNext();){const a=o.getNext();if(this.comparator(a.key,r[1])>=0)return;s(a.key)}}forEachWhile(r,s){let o;for(o=void 0!==s?this.data.getIteratorFrom(s):this.data.getIterator();o.hasNext();)if(!r(o.getNext().key))return}firstAfterOrEqual(r){const s=this.data.getIteratorFrom(r);return s.hasNext()?s.getNext().key:null}getIterator(){return new dh(this.data.getIterator())}getIteratorFrom(r){return new dh(this.data.getIteratorFrom(r))}add(r){return this.copy(this.data.remove(r).insert(r,!0))}delete(r){return this.has(r)?this.copy(this.data.remove(r)):this}isEmpty(){return this.data.isEmpty()}unionWith(r){let s=this;return s.size<r.size&&(s=r,r=this),r.forEach(o=>{s=s.add(o)}),s}isEqual(r){if(!(r instanceof le)||this.size!==r.size)return!1;const s=this.data.getIterator(),o=r.data.getIterator();for(;s.hasNext();){const a=s.getNext().key,c=o.getNext().key;if(0!==this.comparator(a,c))return!1}return!0}toArray(){const r=[];return this.forEach(s=>{r.push(s)}),r}toString(){const r=[];return this.forEach(s=>r.push(s)),"SortedSet("+r.toString()+")"}copy(r){const s=new le(this.comparator);return s.data=r,s}}class dh{constructor(r){this.iter=r}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}const um=new Ee(O.comparator);function lt(){return um}const lm=new Ee(O.comparator);function Ec(){return lm}const hm=new Ee(O.comparator);function fh(){return hm}const dm=new le(O.comparator);function Y(...i){let r=dm;for(const s of i)r=r.add(s);return r}const fm=new le(H);function ea(){return fm}class xi{constructor(r,s,o,a,c){this.snapshotVersion=r,this.targetChanges=s,this.targetMismatches=o,this.documentUpdates=a,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(r,s){const o=new Map;return o.set(r,Ti.createSynthesizedTargetChangeForCurrentChange(r,s)),new xi(V.min(),o,ea(),lt(),Y())}}class Ti{constructor(r,s,o,a,c){this.resumeToken=r,this.current=s,this.addedDocuments=o,this.modifiedDocuments=a,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(r,s){return new Ti(Me.EMPTY_BYTE_STRING,s,Y(),Y(),Y())}}class ta{constructor(r,s,o,a){this.k=r,this.removedTargetIds=s,this.key=o,this.$=a}}class mh{constructor(r,s){this.targetId=r,this.O=s}}class ph{constructor(r,s,o=Me.EMPTY_BYTE_STRING,a=null){this.state=r,this.targetIds=s,this.resumeToken=o,this.cause=a}}class gh{constructor(){this.F=0,this.M=wh(),this.L=Me.EMPTY_BYTE_STRING,this.B=!1,this.U=!0}get current(){return this.B}get resumeToken(){return this.L}get q(){return 0!==this.F}get K(){return this.U}j(r){r.approximateByteSize()>0&&(this.U=!0,this.L=r)}W(){let r=Y(),s=Y(),o=Y();return this.M.forEach((a,c)=>{switch(c){case 0:r=r.add(a);break;case 2:s=s.add(a);break;case 1:o=o.add(a);break;default:M()}}),new Ti(this.L,this.B,r,s,o)}G(){this.U=!1,this.M=wh()}H(r,s){this.U=!0,this.M=this.M.insert(r,s)}J(r){this.U=!0,this.M=this.M.remove(r)}Y(){this.F+=1}X(){this.F-=1}Z(){this.U=!0,this.B=!0}}class mm{constructor(r){this.tt=r,this.et=new Map,this.nt=lt(),this.st=yh(),this.it=new le(H)}rt(r){for(const s of r.k)r.$&&r.$.isFoundDocument()?this.ot(s,r.$):this.at(s,r.key,r.$);for(const s of r.removedTargetIds)this.at(s,r.key,r.$)}ct(r){this.forEachTarget(r,s=>{const o=this.ut(s);switch(r.state){case 0:this.ht(s)&&o.j(r.resumeToken);break;case 1:o.X(),o.q||o.G(),o.j(r.resumeToken);break;case 2:o.X(),o.q||this.removeTarget(s);break;case 3:this.ht(s)&&(o.Z(),o.j(r.resumeToken));break;case 4:this.ht(s)&&(this.lt(s),o.j(r.resumeToken));break;default:M()}})}forEachTarget(r,s){r.targetIds.length>0?r.targetIds.forEach(s):this.et.forEach((o,a)=>{this.ht(a)&&s(a)})}ft(r){const s=r.targetId,o=r.O.count,a=this.dt(s);if(a){const c=a.target;if(Ho(c))if(0===o){const l=new O(c.path);this.at(s,l,se.newNoDocument(l,V.min()))}else U(1===o);else this.wt(s)!==o&&(this.lt(s),this.it=this.it.add(s))}}_t(r){const s=new Map;this.et.forEach((c,l)=>{const f=this.dt(l);if(f){if(c.current&&Ho(f.target)){const m=new O(f.target.path);null!==this.nt.get(m)||this.gt(l,m)||this.at(l,m,se.newNoDocument(m,r))}c.K&&(s.set(l,c.W()),c.G())}});let o=Y();this.st.forEach((c,l)=>{let f=!0;l.forEachWhile(m=>{const y=this.dt(m);return!y||2===y.purpose||(f=!1,!1)}),f&&(o=o.add(c))});const a=new xi(r,s,this.it,this.nt,o);return this.nt=lt(),this.st=yh(),this.it=new le(H),a}ot(r,s){if(!this.ht(r))return;const o=this.gt(r,s.key)?2:0;this.ut(r).H(s.key,o),this.nt=this.nt.insert(s.key,s),this.st=this.st.insert(s.key,this.yt(s.key).add(r))}at(r,s,o){if(!this.ht(r))return;const a=this.ut(r);this.gt(r,s)?a.H(s,1):a.J(s),this.st=this.st.insert(s,this.yt(s).delete(r)),o&&(this.nt=this.nt.insert(s,o))}removeTarget(r){this.et.delete(r)}wt(r){const s=this.ut(r).W();return this.tt.getRemoteKeysForTarget(r).size+s.addedDocuments.size-s.removedDocuments.size}Y(r){this.ut(r).Y()}ut(r){let s=this.et.get(r);return s||(s=new gh,this.et.set(r,s)),s}yt(r){let s=this.st.get(r);return s||(s=new le(H),this.st=this.st.insert(r,s)),s}ht(r){const s=null!==this.dt(r);return s||N("WatchChangeAggregator","Detected inactive target",r),s}dt(r){const s=this.et.get(r);return s&&s.q?null:this.tt.Et(r)}lt(r){this.et.set(r,new gh),this.tt.getRemoteKeysForTarget(r).forEach(s=>{this.at(r,s,null)})}gt(r,s){return this.tt.getRemoteKeysForTarget(r).has(s)}}function yh(){return new Ee(O.comparator)}function wh(){return new Ee(O.comparator)}const pm={asc:"ASCENDING",desc:"DESCENDING"},gm={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class ym{constructor(r,s){this.databaseId=r,this.D=s}}function Ii(i,r){return i.D?`${new Date(1e3*r.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+r.nanoseconds).slice(-9)}Z`:{seconds:""+r.seconds,nanos:r.nanoseconds}}function vh(i,r){return i.D?r.toBase64():r.toUint8Array()}function wm(i,r){return Ii(i,r.toTimestamp())}function Le(i){return U(!!i),V.fromTimestamp(function(r){const s=dn(r);return new Oe(s.seconds,s.nanos)}(i))}function Cc(i,r){return(s=i,new J(["projects",s.projectId,"databases",s.database])).child("documents").child(r).canonicalString();var s}function bh(i){const r=J.fromString(i);return U(Ph(r)),r}function Ei(i,r){return Cc(i.databaseId,r.path)}function St(i,r){const s=bh(r);if(s.get(1)!==i.databaseId.projectId)throw new S(x.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+s.get(1)+" vs "+i.databaseId.projectId);if(s.get(3)!==i.databaseId.database)throw new S(x.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+s.get(3)+" vs "+i.databaseId.database);return new O(xh(s))}function Ac(i,r){return Cc(i.databaseId,r)}function _h(i){const r=bh(i);return 4===r.length?J.emptyPath():xh(r)}function Ci(i){return new J(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function xh(i){return U(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function Th(i,r,s){return{name:Ei(i,r),fields:s.value.mapValue.fields}}function Ih(i,r,s){const o=St(i,r.name),a=Le(r.updateTime),c=new Ke({mapValue:{fields:r.fields}}),l=se.newFoundDocument(o,a,c);return s&&l.setHasCommittedMutations(),s?l.setHasCommittedMutations():l}function na(i,r){let s;if(r instanceof bi)s={update:Th(i,r.key,r.value)};else if(r instanceof _i)s={delete:Ei(i,r.key)};else if(r instanceof fn)s={update:Th(i,r.key,r.data),updateMask:Am(r.fieldMask)};else{if(!(r instanceof Ic))return M();s={verify:Ei(i,r.key)}}return r.fieldTransforms.length>0&&(s.updateTransforms=r.fieldTransforms.map(o=>function(a,c){const l=c.transform;if(l instanceof $r)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof rr)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof sr)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Qr)return{fieldPath:c.field.canonicalString(),increment:l.C};throw M()}(0,o))),r.precondition.isNone||(s.currentDocument=void 0!==(a=r.precondition).updateTime?{updateTime:wm(i,a.updateTime)}:void 0!==a.exists?{exists:a.exists}:M()),s;var a}function Eh(i,r){const s=r.currentDocument?void 0!==(a=r.currentDocument).updateTime?we.updateTime(Le(a.updateTime)):void 0!==a.exists?we.exists(a.exists):we.none():we.none(),o=r.updateTransforms?r.updateTransforms.map(a=>function(c,l){let f=null;"setToServerValue"in l?(U("REQUEST_TIME"===l.setToServerValue),f=new $r):"appendMissingElements"in l?f=new rr(l.appendMissingElements.values||[]):"removeAllFromArray"in l?f=new sr(l.removeAllFromArray.values||[]):"increment"in l?f=new Qr(c,l.increment):M();const m=Ue.fromServerFormat(l.fieldPath);return new vi(m,f)}(i,a)):[];var a;if(r.update){const a=St(i,r.update.name),c=new Ke({mapValue:{fields:r.update.fields}});if(r.updateMask){const l=new Vr((r.updateMask.fieldPaths||[]).map(y=>Ue.fromServerFormat(y)));return new fn(a,c,l,s,o)}return new bi(a,c,s,o)}if(r.delete){const a=St(i,r.delete);return new _i(a,s)}if(r.verify){const a=St(i,r.verify);return new Ic(a,s)}return M()}function Ch(i,r){return{documents:[Ac(i,r.path)]}}function Ah(i,r){const s={structuredQuery:{}},o=r.path;null!==r.collectionGroup?(s.parent=Ac(i,o),s.structuredQuery.from=[{collectionId:r.collectionGroup,allDescendants:!0}]):(s.parent=Ac(i,o.popLast()),s.structuredQuery.from=[{collectionId:o.lastSegment()}]);const a=function(f){if(0===f.length)return;const m=f.map(y=>function(w){if("=="===w.op){if(Bl(w.value))return{unaryFilter:{field:Jr(w.field),op:"IS_NAN"}};if(Zl(w.value))return{unaryFilter:{field:Jr(w.field),op:"IS_NULL"}}}else if("!="===w.op){if(Bl(w.value))return{unaryFilter:{field:Jr(w.field),op:"IS_NOT_NAN"}};if(Zl(w.value))return{unaryFilter:{field:Jr(w.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Jr(w.field),op:Im(w.op),value:w.value}}}(y));return 1===m.length?m[0]:{compositeFilter:{op:"AND",filters:m}}}(r.filters);a&&(s.structuredQuery.where=a);const c=function(f){if(0!==f.length)return f.map(m=>{return{field:Jr((y=m).field),direction:Tm(y.dir)};var y})}(r.orderBy);c&&(s.structuredQuery.orderBy=c);const l=(m=r.limit,i.D||tr(m)?m:{value:m});var m;return null!==l&&(s.structuredQuery.limit=l),r.startAt&&(s.structuredQuery.startAt=Nh(r.startAt)),r.endAt&&(s.structuredQuery.endAt=Nh(r.endAt)),s}function Sh(i){let r=_h(i.parent);const s=i.structuredQuery,o=s.from?s.from.length:0;let a=null;if(o>0){U(1===o);const w=s.from[0];w.allDescendants?a=w.collectionId:r=r.child(w.collectionId)}let c=[];s.where&&(c=kh(s.where));let l=[];s.orderBy&&(l=s.orderBy.map(w=>{return new Kr(Wr((b=w).field),function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction));var b}));let f=null;s.limit&&(f=function(w){let b;return b="object"==typeof w?w.value:w,tr(b)?null:b}(s.limit));let m=null;s.startAt&&(m=Dh(s.startAt));let y=null;return s.endAt&&(y=Dh(s.endAt)),Gl(r,a,l,c,f,"F",m,y)}function kh(i){return i?void 0!==i.unaryFilter?[Cm(i)]:void 0!==i.fieldFilter?[Em(i)]:void 0!==i.compositeFilter?i.compositeFilter.filters.map(r=>kh(r)).reduce((r,s)=>r.concat(s)):M():[]}function Nh(i){return{before:i.before,values:i.position}}function Dh(i){return new gi(i.values||[],!!i.before)}function Tm(i){return pm[i]}function Im(i){return gm[i]}function Jr(i){return{fieldPath:i.canonicalString()}}function Wr(i){return Ue.fromServerFormat(i.fieldPath)}function Em(i){return Je.create(Wr(i.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return M()}}(i.fieldFilter.op),i.fieldFilter.value)}function Cm(i){switch(i.unaryFilter.op){case"IS_NAN":const r=Wr(i.unaryFilter.field);return Je.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Wr(i.unaryFilter.field);return Je.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Wr(i.unaryFilter.field);return Je.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Wr(i.unaryFilter.field);return Je.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return M()}}function Am(i){const r=[];return i.fields.forEach(s=>r.push(s.canonicalString())),{fieldPaths:r}}function Ph(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}function gt(i){let r="";for(let s=0;s<i.length;s++)r.length>0&&(r=Oh(r)),r=Sm(i.get(s),r);return Oh(r)}function Sm(i,r){let s=r;const o=i.length;for(let a=0;a<o;a++){const c=i.charAt(a);switch(c){case"\0":s+="\x01\x10";break;case"\x01":s+="\x01\x11";break;default:s+=c}}return s}function Oh(i){return i+"\x01\x01"}function Ht(i){const r=i.length;if(U(r>=2),2===r)return U("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),J.emptyPath();const s=r-2,o=[];let a="";for(let c=0;c<r;){const l=i.indexOf("\x01",c);switch((l<0||l>s)&&M(),i.charAt(l+1)){case"\x01":const f=i.substring(c,l);let m;0===a.length?m=f:(a+=f,m=a,a=""),o.push(m);break;case"\x10":a+=i.substring(c,l),a+="\0";break;case"\x11":a+=i.substring(c,l+1);break;default:M()}c=l+2}return new J(o)}class km{constructor(r,s){this.seconds=r,this.nanoseconds=s}}class ot{constructor(r,s,o){this.ownerId=r,this.allowTabSynchronization=s,this.leaseTimestampMs=o}}ot.store="owner",ot.key="owner";class mn{constructor(r,s,o){this.userId=r,this.lastAcknowledgedBatchId=s,this.lastStreamToken=o}}mn.store="mutationQueues",mn.keyPath="userId";class ne{constructor(r,s,o,a,c){this.userId=r,this.batchId=s,this.localWriteTimeMs=o,this.baseMutations=a,this.mutations=c}}ne.store="mutations",ne.keyPath="batchId",ne.userMutationsIndex="userMutationsIndex",ne.userMutationsKeyPath=["userId","batchId"];class He{constructor(){}static prefixForUser(r){return[r]}static prefixForPath(r,s){return[r,gt(s)]}static key(r,s,o){return[r,gt(s),o]}}He.store="documentMutations",He.PLACEHOLDER=new He;class Nm{constructor(r,s){this.path=r,this.readTime=s}}class Dm{constructor(r,s){this.path=r,this.version=s}}class he{constructor(r,s,o,a,c,l){this.unknownDocument=r,this.noDocument=s,this.document=o,this.hasCommittedMutations=a,this.readTime=c,this.parentPath=l}}he.store="remoteDocuments",he.readTimeIndex="readTimeIndex",he.readTimeIndexPath="readTime",he.collectionReadTimeIndex="collectionReadTimeIndex",he.collectionReadTimeIndexPath=["parentPath","readTime"];class kt{constructor(r){this.byteSize=r}}kt.store="remoteDocumentGlobal",kt.key="remoteDocumentGlobalKey";class Xe{constructor(r,s,o,a,c,l,f){this.targetId=r,this.canonicalId=s,this.readTime=o,this.resumeToken=a,this.lastListenSequenceNumber=c,this.lastLimboFreeSnapshotVersion=l,this.query=f}}Xe.store="targets",Xe.keyPath="targetId",Xe.queryTargetsIndexName="queryTargetsIndex",Xe.queryTargetsKeyPath=["canonicalId","targetId"];class Be{constructor(r,s,o){this.targetId=r,this.path=s,this.sequenceNumber=o}}Be.store="targetDocuments",Be.keyPath=["targetId","path"],Be.documentTargetsIndex="documentTargetsIndex",Be.documentTargetsKeyPath=["path","targetId"];class at{constructor(r,s,o,a){this.highestTargetId=r,this.highestListenSequenceNumber=s,this.lastRemoteSnapshotVersion=o,this.targetCount=a}}at.key="targetGlobalKey",at.store="targetGlobal";class ir{constructor(r,s){this.collectionId=r,this.parent=s}}ir.store="collectionParents",ir.keyPath=["collectionId","parent"];class Gt{constructor(r,s,o,a){this.clientId=r,this.updateTimeMs=s,this.networkEnabled=o,this.inForeground=a}}Gt.store="clientMetadata",Gt.keyPath="clientId";class Yr{constructor(r,s,o){this.bundleId=r,this.createTime=s,this.version=o}}Yr.store="bundles",Yr.keyPath="bundleId";class Xr{constructor(r,s,o){this.name=r,this.readTime=s,this.bundledQuery=o}}Xr.store="namedQueries",Xr.keyPath="name";const Pm=[mn.store,ne.store,He.store,he.store,Xe.store,ot.store,at.store,Be.store,Gt.store,kt.store,ir.store,Yr.store,Xr.store],Mh="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Lh{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(r){this.onCommittedListeners.push(r)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(r=>r())}}class A{constructor(r){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,r(s=>{this.isDone=!0,this.result=s,this.nextCallback&&this.nextCallback(s)},s=>{this.isDone=!0,this.error=s,this.catchCallback&&this.catchCallback(s)})}catch(r){return this.next(void 0,r)}next(r,s){return this.callbackAttached&&M(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(s,this.error):this.wrapSuccess(r,this.result):new A((o,a)=>{this.nextCallback=c=>{this.wrapSuccess(r,c).next(o,a)},this.catchCallback=c=>{this.wrapFailure(s,c).next(o,a)}})}toPromise(){return new Promise((r,s)=>{this.next(r,s)})}wrapUserFunction(r){try{const s=r();return s instanceof A?s:A.resolve(s)}catch(s){return A.reject(s)}}wrapSuccess(r,s){return r?this.wrapUserFunction(()=>r(s)):A.resolve(s)}wrapFailure(r,s){return r?this.wrapUserFunction(()=>r(s)):A.reject(s)}static resolve(r){return new A((s,o)=>{s(r)})}static reject(r){return new A((s,o)=>{o(r)})}static waitFor(r){return new A((s,o)=>{let a=0,c=0,l=!1;r.forEach(f=>{++a,f.next(()=>{++c,l&&c===a&&s()},m=>o(m))}),l=!0,c===a&&s()})}static or(r){let s=A.resolve(!1);for(const o of r)s=s.next(a=>a?A.resolve(a):o());return s}static forEach(r,s){const o=[];return r.forEach((a,c)=>{o.push(s.call(this,a,c))}),this.waitFor(o)}}class ra{constructor(r,s){this.action=r,this.transaction=s,this.aborted=!1,this.Tt=new Pe,this.transaction.oncomplete=()=>{this.Tt.resolve()},this.transaction.onabort=()=>{s.error?this.Tt.reject(new Ai(r,s.error)):this.Tt.resolve()},this.transaction.onerror=o=>{const a=Sc(o.target.error);this.Tt.reject(new Ai(r,a))}}static open(r,s,o,a){try{return new ra(s,r.transaction(a,o))}catch(c){throw new Ai(s,c)}}get It(){return this.Tt.promise}abort(r){r&&this.Tt.reject(r),this.aborted||(N("SimpleDb","Aborting transaction:",r?r.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}store(r){const s=this.transaction.objectStore(r);return new Mm(s)}}class yt{constructor(r,s,o){this.name=r,this.version=s,this.At=o,12.2===yt.Rt((0,K.z$)())&&ge("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(r){return N("SimpleDb","Removing database:",r),ar(window.indexedDB.deleteDatabase(r)).toPromise()}static Pt(){if("undefined"==typeof indexedDB)return!1;if(yt.bt())return!0;const r=(0,K.z$)(),s=yt.Rt(r),o=0<s&&s<10,a=yt.vt(r),c=0<a&&a<4.5;return!(r.indexOf("MSIE ")>0||r.indexOf("Trident/")>0||r.indexOf("Edge/")>0||o||c)}static bt(){var r;return"undefined"!=typeof process&&"YES"===(null===(r=process.env)||void 0===r?void 0:r.Vt)}static St(r,s){return r.store(s)}static Rt(r){const s=r.match(/i(?:phone|pad|pod) os ([\d_]+)/i),o=s?s[1].split("_").slice(0,2).join("."):"-1";return Number(o)}static vt(r){const s=r.match(/Android ([\d.]+)/i),o=s?s[1].split(".").slice(0,2).join("."):"-1";return Number(o)}Dt(r){var s=this;return(0,I.Z)(function*(){return s.db||(N("SimpleDb","Opening database:",s.name),s.db=yield new Promise((o,a)=>{const c=indexedDB.open(s.name,s.version);c.onsuccess=l=>{o(l.target.result)},c.onblocked=()=>{a(new Ai(r,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},c.onerror=l=>{const f=l.target.error;a("VersionError"===f.name?new S(x.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new Ai(r,f))},c.onupgradeneeded=l=>{N("SimpleDb",'Database "'+s.name+'" requires upgrade from version:',l.oldVersion),s.At.Ct(l.target.result,c.transaction,l.oldVersion,s.version).next(()=>{N("SimpleDb","Database upgrade to version "+s.version+" complete")})}})),s.Nt&&(s.db.onversionchange=o=>s.Nt(o)),s.db})()}xt(r){this.Nt=r,this.db&&(this.db.onversionchange=s=>r(s))}runTransaction(r,s,o,a){var c=this;return(0,I.Z)(function*(){const l="readonly"===s;let f=0;for(;;){++f;try{c.db=yield c.Dt(r);const m=ra.open(c.db,r,l?"readonly":"readwrite",o),y=a(m).catch(w=>(m.abort(w),A.reject(w))).toPromise();return y.catch(()=>{}),yield m.It,y}catch(m){const y="FirebaseError"!==m.name&&f<3;if(N("SimpleDb","Transaction failed with error:",m.message,"Retrying:",y),c.close(),!y)return Promise.reject(m)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Om{constructor(r){this.kt=r,this.$t=!1,this.Ot=null}get isDone(){return this.$t}get Ft(){return this.Ot}set cursor(r){this.kt=r}done(){this.$t=!0}Mt(r){this.Ot=r}delete(){return ar(this.kt.delete())}}class Ai extends S{constructor(r,s){super(x.UNAVAILABLE,`IndexedDB transaction '${r}' failed: ${s}`),this.name="IndexedDbTransactionError"}}function or(i){return"IndexedDbTransactionError"===i.name}class Mm{constructor(r){this.store=r}put(r,s){let o;return void 0!==s?(N("SimpleDb","PUT",this.store.name,r,s),o=this.store.put(s,r)):(N("SimpleDb","PUT",this.store.name,"<auto-key>",r),o=this.store.put(r)),ar(o)}add(r){return N("SimpleDb","ADD",this.store.name,r,r),ar(this.store.add(r))}get(r){return ar(this.store.get(r)).next(s=>(void 0===s&&(s=null),N("SimpleDb","GET",this.store.name,r,s),s))}delete(r){return N("SimpleDb","DELETE",this.store.name,r),ar(this.store.delete(r))}count(){return N("SimpleDb","COUNT",this.store.name),ar(this.store.count())}Lt(r,s){const o=this.cursor(this.options(r,s)),a=[];return this.Bt(o,(c,l)=>{a.push(l)}).next(()=>a)}Ut(r,s){N("SimpleDb","DELETE ALL",this.store.name);const o=this.options(r,s);o.qt=!1;const a=this.cursor(o);return this.Bt(a,(c,l,f)=>f.delete())}Kt(r,s){let o;s?o=r:(o={},s=r);const a=this.cursor(o);return this.Bt(a,s)}jt(r){const s=this.cursor({});return new A((o,a)=>{s.onerror=c=>{const l=Sc(c.target.error);a(l)},s.onsuccess=c=>{const l=c.target.result;l?r(l.primaryKey,l.value).next(f=>{f?l.continue():o()}):o()}})}Bt(r,s){const o=[];return new A((a,c)=>{r.onerror=l=>{c(l.target.error)},r.onsuccess=l=>{const f=l.target.result;if(!f)return void a();const m=new Om(f),y=s(f.primaryKey,f.value,m);if(y instanceof A){const w=y.catch(b=>(m.done(),A.reject(b)));o.push(w)}m.isDone?a():null===m.Ft?f.continue():f.continue(m.Ft)}}).next(()=>A.waitFor(o))}options(r,s){let o;return void 0!==r&&("string"==typeof r?o=r:s=r),{index:o,range:s}}cursor(r){let s="next";if(r.reverse&&(s="prev"),r.index){const o=this.store.index(r.index);return r.qt?o.openKeyCursor(r.range,s):o.openCursor(r.range,s)}return this.store.openCursor(r.range,s)}}function ar(i){return new A((r,s)=>{i.onsuccess=o=>{r(o.target.result)},i.onerror=o=>{const a=Sc(o.target.error);s(a)}})}let qh=!1;function Sc(i){const r=yt.Rt((0,K.z$)());if(r>=12.2&&r<13){const s="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(s)>=0){const o=new S("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${s}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return qh||(qh=!0,setTimeout(()=>{throw o},0)),o}}return i}class Fh extends Lh{constructor(r,s){super(),this.Qt=r,this.currentSequenceNumber=s}}function et(i,r){const s=D(i);return yt.St(s.Qt,r)}class kc{constructor(r,s,o,a){this.batchId=r,this.localWriteTime=s,this.baseMutations=o,this.mutations=a}applyToRemoteDocument(r,s){const o=s.mutationResults;for(let a=0;a<this.mutations.length;a++){const c=this.mutations[a];c.key.isEqual(r.key)&&om(c,r,o[a])}}applyToLocalView(r){for(const s of this.baseMutations)s.key.isEqual(r.key)&&Tc(s,r,this.localWriteTime);for(const s of this.mutations)s.key.isEqual(r.key)&&Tc(s,r,this.localWriteTime)}applyToLocalDocumentSet(r){this.mutations.forEach(s=>{const o=r.get(s.key),a=o;this.applyToLocalView(a),o.isValidDocument()||a.convertToNoDocument(V.min())})}keys(){return this.mutations.reduce((r,s)=>r.add(s.key),Y())}isEqual(r){return this.batchId===r.batchId&&Br(this.mutations,r.mutations,(s,o)=>ih(s,o))&&Br(this.baseMutations,r.baseMutations,(s,o)=>ih(s,o))}}class Nc{constructor(r,s,o,a){this.batch=r,this.commitVersion=s,this.mutationResults=o,this.docVersions=a}static from(r,s,o){U(r.mutations.length===o.length);let a=fh();const c=r.mutations;for(let l=0;l<c.length;l++)a=a.insert(c[l].key,o[l].version);return new Nc(r,s,o,a)}}class pn{constructor(r,s,o,a,c=V.min(),l=V.min(),f=Me.EMPTY_BYTE_STRING){this.target=r,this.targetId=s,this.purpose=o,this.sequenceNumber=a,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=f}withSequenceNumber(r){return new pn(this.target,this.targetId,this.purpose,r,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(r,s){return new pn(this.target,this.targetId,this.purpose,this.sequenceNumber,s,this.lastLimboFreeSnapshotVersion,r)}withLastLimboFreeSnapshotVersion(r){return new pn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,r,this.resumeToken)}}class Rh{constructor(r){this.Wt=r}}function Dc(i,r){if(r.document)return Ih(i.Wt,r.document,!!r.hasCommittedMutations);if(r.noDocument){const s=O.fromSegments(r.noDocument.path),o=ts(r.noDocument.readTime),a=se.newNoDocument(s,o);return r.hasCommittedMutations?a.setHasCommittedMutations():a}if(r.unknownDocument){const s=O.fromSegments(r.unknownDocument.path),o=ts(r.unknownDocument.version);return se.newUnknownDocument(s,o)}return M()}function Uh(i,r,s){const o=Pc(s),a=r.key.path.popLast().toArray();if(r.isFoundDocument()){const c={name:Ei(f=i.Wt,(m=r).key),fields:m.data.value.mapValue.fields,updateTime:Ii(f,m.version.toTimestamp())};return new he(null,null,c,r.hasCommittedMutations,o,a)}var f,m;if(r.isNoDocument()){const c=r.key.path.toArray(),l=es(r.version),f=r.hasCommittedMutations;return new he(null,new Nm(c,l),null,f,o,a)}if(r.isUnknownDocument()){const c=r.key.path.toArray(),l=es(r.version);return new he(new Dm(c,l),null,null,!0,o,a)}return M()}function Pc(i){const r=i.toTimestamp();return[r.seconds,r.nanoseconds]}function Zh(i){const r=new Oe(i[0],i[1]);return V.fromTimestamp(r)}function es(i){const r=i.toTimestamp();return new km(r.seconds,r.nanoseconds)}function ts(i){const r=new Oe(i.seconds,i.nanoseconds);return V.fromTimestamp(r)}function ns(i,r){const s=(r.baseMutations||[]).map(c=>Eh(i.Wt,c));for(let c=0;c<r.mutations.length-1;++c){const l=r.mutations[c];c+1<r.mutations.length&&void 0!==r.mutations[c+1].transform&&(l.updateTransforms=r.mutations[c+1].transform.fieldTransforms,r.mutations.splice(c+1,1),++c)}const o=r.mutations.map(c=>Eh(i.Wt,c)),a=Oe.fromMillis(r.localWriteTimeMs);return new kc(r.batchId,a,s,o)}function Si(i){const r=ts(i.readTime),s=void 0!==i.lastLimboFreeSnapshotVersion?ts(i.lastLimboFreeSnapshotVersion):V.min();let o;var a;return void 0!==i.query.documents?(U(1===(a=i.query).documents.length),o=ut(Hr(_h(a.documents[0])))):o=ut(Sh(i.query)),new pn(o,i.targetId,0,i.lastListenSequenceNumber,r,s,Me.fromBase64String(i.resumeToken))}function Bh(i,r){const s=es(r.snapshotVersion),o=es(r.lastLimboFreeSnapshotVersion);let a;a=Ho(r.target)?Ch(i.Wt,r.target):Ah(i.Wt,r.target);const c=r.resumeToken.toBase64();return new Xe(r.targetId,pi(r.target),s,c,r.sequenceNumber,o,a)}function Oc(i){const r=Sh({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?$l(r,r.limit,"L"):r}class Lm{getBundleMetadata(r,s){return Vh(r).get(s).next(o=>{if(o)return{id:(a=o).bundleId,createTime:ts(a.createTime),version:a.version};var a})}saveBundleMetadata(r,s){return Vh(r).put({bundleId:(o=s).id,createTime:es(Le(o.createTime)),version:o.version});var o}getNamedQuery(r,s){return jh(r).get(s).next(o=>{if(o)return{name:(a=o).name,query:Oc(a.bundledQuery),readTime:ts(a.readTime)};var a})}saveNamedQuery(r,s){return jh(r).put({name:(o=s).name,readTime:es(Le(o.readTime)),bundledQuery:o.bundledQuery});var o}}function Vh(i){return et(i,Yr.store)}function jh(i){return et(i,Xr.store)}class qm{constructor(){this.Gt=new Mc}addToCollectionParentIndex(r,s){return this.Gt.add(s),A.resolve()}getCollectionParents(r,s){return A.resolve(this.Gt.getEntries(s))}}class Mc{constructor(){this.index={}}add(r){const s=r.lastSegment(),o=r.popLast(),a=this.index[s]||new le(J.comparator),c=!a.has(o);return this.index[s]=a.add(o),c}has(r){const s=r.lastSegment(),o=r.popLast(),a=this.index[s];return a&&a.has(o)}getEntries(r){return(this.index[r]||new le(J.comparator)).toArray()}}class Fm{constructor(){this.zt=new Mc}addToCollectionParentIndex(r,s){if(!this.zt.has(s)){const o=s.lastSegment(),a=s.popLast();r.addOnCommittedListener(()=>{this.zt.add(s)});const c={collectionId:o,parent:gt(a)};return zh(r).put(c)}return A.resolve()}getCollectionParents(r,s){const o=[],a=IDBKeyRange.bound([s,""],[Ml(s),""],!1,!0);return zh(r).Lt(a).next(c=>{for(const l of c){if(l.collectionId!==s)break;o.push(Ht(l.parent))}return o})}}function zh(i){return et(i,ir.store)}const Kh={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class tt{constructor(r,s,o){this.cacheSizeCollectionThreshold=r,this.percentileToCollect=s,this.maximumSequenceNumbersToCollect=o}static withCacheSize(r){return new tt(r,tt.DEFAULT_COLLECTION_PERCENTILE,tt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Hh(i,r,s){const o=i.store(ne.store),a=i.store(He.store),c=[],l=IDBKeyRange.only(s.batchId);let f=0;const m=o.Kt({range:l},(w,b,_)=>(f++,_.delete()));c.push(m.next(()=>{U(1===f)}));const y=[];for(const w of s.mutations){const b=He.key(r,w.key.path,s.batchId);c.push(a.delete(b)),y.push(w.key)}return A.waitFor(c).next(()=>y)}function sa(i){if(!i)return 0;let r;if(i.document)r=i.document;else if(i.unknownDocument)r=i.unknownDocument;else{if(!i.noDocument)throw M();r=i.noDocument}return JSON.stringify(r).length}tt.DEFAULT_COLLECTION_PERCENTILE=10,tt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,tt.DEFAULT=new tt(41943040,tt.DEFAULT_COLLECTION_PERCENTILE,tt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),tt.DISABLED=new tt(-1,0,0);class Lc{constructor(r,s,o,a){this.userId=r,this.N=s,this.Ht=o,this.referenceDelegate=a,this.Jt={}}static Yt(r,s,o,a){U(""!==r.uid);const c=r.isAuthenticated()?r.uid:"";return new Lc(c,s,o,a)}checkEmpty(r){let s=!0;const o=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return gn(r).Kt({index:ne.userMutationsIndex,range:o},(a,c,l)=>{s=!1,l.done()}).next(()=>s)}addMutationBatch(r,s,o,a){const c=rs(r),l=gn(r);return l.add({}).next(f=>{U("number"==typeof f);const m=new kc(f,s,o,a),y=function(_,E,k){const L=k.baseMutations.map(ie=>na(_.Wt,ie)),Z=k.mutations.map(ie=>na(_.Wt,ie));return new ne(E,k.batchId,k.localWriteTime.toMillis(),L,Z)}(this.N,this.userId,m),w=[];let b=new le((_,E)=>H(_.canonicalString(),E.canonicalString()));for(const _ of a){const E=He.key(this.userId,_.key.path,f);b=b.add(_.key.path.popLast()),w.push(l.put(y)),w.push(c.put(E,He.PLACEHOLDER))}return b.forEach(_=>{w.push(this.Ht.addToCollectionParentIndex(r,_))}),r.addOnCommittedListener(()=>{this.Jt[f]=m.keys()}),A.waitFor(w).next(()=>m)})}lookupMutationBatch(r,s){return gn(r).get(s).next(o=>o?(U(o.userId===this.userId),ns(this.N,o)):null)}Xt(r,s){return this.Jt[s]?A.resolve(this.Jt[s]):this.lookupMutationBatch(r,s).next(o=>{if(o){const a=o.keys();return this.Jt[s]=a,a}return null})}getNextMutationBatchAfterBatchId(r,s){const o=s+1,a=IDBKeyRange.lowerBound([this.userId,o]);let c=null;return gn(r).Kt({index:ne.userMutationsIndex,range:a},(l,f,m)=>{f.userId===this.userId&&(U(f.batchId>=o),c=ns(this.N,f)),m.done()}).next(()=>c)}getHighestUnacknowledgedBatchId(r){const s=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let o=-1;return gn(r).Kt({index:ne.userMutationsIndex,range:s,reverse:!0},(a,c,l)=>{o=c.batchId,l.done()}).next(()=>o)}getAllMutationBatches(r){const s=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return gn(r).Lt(ne.userMutationsIndex,s).next(o=>o.map(a=>ns(this.N,a)))}getAllMutationBatchesAffectingDocumentKey(r,s){const o=He.prefixForPath(this.userId,s.path),a=IDBKeyRange.lowerBound(o),c=[];return rs(r).Kt({range:a},(l,f,m)=>{const[y,w,b]=l,_=Ht(w);if(y===this.userId&&s.path.isEqual(_))return gn(r).get(b).next(E=>{if(!E)throw M();U(E.userId===this.userId),c.push(ns(this.N,E))});m.done()}).next(()=>c)}getAllMutationBatchesAffectingDocumentKeys(r,s){let o=new le(H);const a=[];return s.forEach(c=>{const l=He.prefixForPath(this.userId,c.path),f=IDBKeyRange.lowerBound(l),m=rs(r).Kt({range:f},(y,w,b)=>{const[_,E,k]=y,L=Ht(E);_===this.userId&&c.path.isEqual(L)?o=o.add(k):b.done()});a.push(m)}),A.waitFor(a).next(()=>this.Zt(r,o))}getAllMutationBatchesAffectingQuery(r,s){const o=s.path,a=o.length+1,c=He.prefixForPath(this.userId,o),l=IDBKeyRange.lowerBound(c);let f=new le(H);return rs(r).Kt({range:l},(m,y,w)=>{const[b,_,E]=m,k=Ht(_);b===this.userId&&o.isPrefixOf(k)?k.length===a&&(f=f.add(E)):w.done()}).next(()=>this.Zt(r,f))}Zt(r,s){const o=[],a=[];return s.forEach(c=>{a.push(gn(r).get(c).next(l=>{if(null===l)throw M();U(l.userId===this.userId),o.push(ns(this.N,l))}))}),A.waitFor(a).next(()=>o)}removeMutationBatch(r,s){return Hh(r.Qt,this.userId,s).next(o=>(r.addOnCommittedListener(()=>{this.te(s.batchId)}),A.forEach(o,a=>this.referenceDelegate.markPotentiallyOrphaned(r,a))))}te(r){delete this.Jt[r]}performConsistencyCheck(r){return this.checkEmpty(r).next(s=>{if(!s)return A.resolve();const o=IDBKeyRange.lowerBound(He.prefixForUser(this.userId)),a=[];return rs(r).Kt({range:o},(c,l,f)=>{if(c[0]===this.userId){const m=Ht(c[1]);a.push(m)}else f.done()}).next(()=>{U(0===a.length)})})}containsKey(r,s){return Gh(r,this.userId,s)}ee(r){return $h(r).get(this.userId).next(s=>s||new mn(this.userId,-1,""))}}function Gh(i,r,s){const o=He.prefixForPath(r,s.path),a=o[1],c=IDBKeyRange.lowerBound(o);let l=!1;return rs(i).Kt({range:c,qt:!0},(f,m,y)=>{const[w,b,_]=f;w===r&&b===a&&(l=!0),y.done()}).next(()=>l)}function gn(i){return et(i,ne.store)}function rs(i){return et(i,He.store)}function $h(i){return et(i,mn.store)}class cr{constructor(r){this.ne=r}next(){return this.ne+=2,this.ne}static se(){return new cr(0)}static ie(){return new cr(-1)}}class Rm{constructor(r,s){this.referenceDelegate=r,this.N=s}allocateTargetId(r){return this.re(r).next(s=>{const o=new cr(s.highestTargetId);return s.highestTargetId=o.next(),this.oe(r,s).next(()=>s.highestTargetId)})}getLastRemoteSnapshotVersion(r){return this.re(r).next(s=>V.fromTimestamp(new Oe(s.lastRemoteSnapshotVersion.seconds,s.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(r){return this.re(r).next(s=>s.highestListenSequenceNumber)}setTargetsMetadata(r,s,o){return this.re(r).next(a=>(a.highestListenSequenceNumber=s,o&&(a.lastRemoteSnapshotVersion=o.toTimestamp()),s>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=s),this.oe(r,a)))}addTargetData(r,s){return this.ae(r,s).next(()=>this.re(r).next(o=>(o.targetCount+=1,this.ce(s,o),this.oe(r,o))))}updateTargetData(r,s){return this.ae(r,s)}removeTargetData(r,s){return this.removeMatchingKeysForTargetId(r,s.targetId).next(()=>ss(r).delete(s.targetId)).next(()=>this.re(r)).next(o=>(U(o.targetCount>0),o.targetCount-=1,this.oe(r,o)))}removeTargets(r,s,o){let a=0;const c=[];return ss(r).Kt((l,f)=>{const m=Si(f);m.sequenceNumber<=s&&null===o.get(m.targetId)&&(a++,c.push(this.removeTargetData(r,m)))}).next(()=>A.waitFor(c)).next(()=>a)}forEachTarget(r,s){return ss(r).Kt((o,a)=>{const c=Si(a);s(c)})}re(r){return Qh(r).get(at.key).next(s=>(U(null!==s),s))}oe(r,s){return Qh(r).put(at.key,s)}ae(r,s){return ss(r).put(Bh(this.N,s))}ce(r,s){let o=!1;return r.targetId>s.highestTargetId&&(s.highestTargetId=r.targetId,o=!0),r.sequenceNumber>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=r.sequenceNumber,o=!0),o}getTargetCount(r){return this.re(r).next(s=>s.targetCount)}getTargetData(r,s){const o=pi(s),a=IDBKeyRange.bound([o,Number.NEGATIVE_INFINITY],[o,Number.POSITIVE_INFINITY]);let c=null;return ss(r).Kt({range:a,index:Xe.queryTargetsIndexName},(l,f,m)=>{const y=Si(f);Ko(s,y.target)&&(c=y,m.done())}).next(()=>c)}addMatchingKeys(r,s,o){const a=[],c=yn(r);return s.forEach(l=>{const f=gt(l.path);a.push(c.put(new Be(o,f))),a.push(this.referenceDelegate.addReference(r,o,l))}),A.waitFor(a)}removeMatchingKeys(r,s,o){const a=yn(r);return A.forEach(s,c=>{const l=gt(c.path);return A.waitFor([a.delete([o,l]),this.referenceDelegate.removeReference(r,o,c)])})}removeMatchingKeysForTargetId(r,s){const o=yn(r),a=IDBKeyRange.bound([s],[s+1],!1,!0);return o.delete(a)}getMatchingKeysForTargetId(r,s){const o=IDBKeyRange.bound([s],[s+1],!1,!0),a=yn(r);let c=Y();return a.Kt({range:o,qt:!0},(l,f,m)=>{const y=Ht(l[1]),w=new O(y);c=c.add(w)}).next(()=>c)}containsKey(r,s){const o=gt(s.path),a=IDBKeyRange.bound([o],[Ml(o)],!1,!0);let c=0;return yn(r).Kt({index:Be.documentTargetsIndex,qt:!0,range:a},([l,f],m,y)=>{0!==l&&(c++,y.done())}).next(()=>c>0)}Et(r,s){return ss(r).get(s).next(o=>o?Si(o):null)}}function ss(i){return et(i,Xe.store)}function Qh(i){return et(i,at.store)}function yn(i){return et(i,Be.store)}function ur(i){return qc.apply(this,arguments)}function qc(){return(qc=(0,I.Z)(function*(i){if(i.code!==x.FAILED_PRECONDITION||i.message!==Mh)throw i;N("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}function Jh([i,r],[s,o]){const a=H(i,s);return 0===a?H(r,o):a}class Um{constructor(r){this.ue=r,this.buffer=new le(Jh),this.he=0}le(){return++this.he}fe(r){const s=[r,this.le()];if(this.buffer.size<this.ue)this.buffer=this.buffer.add(s);else{const o=this.buffer.last();Jh(s,o)<0&&(this.buffer=this.buffer.delete(o).add(s))}}get maxValue(){return this.buffer.last()[0]}}class Zm{constructor(r,s){this.garbageCollector=r,this.asyncQueue=s,this.de=!1,this.we=null}start(r){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this._e(r)}stop(){this.we&&(this.we.cancel(),this.we=null)}get started(){return null!==this.we}_e(r){var s=this;const o=this.de?3e5:6e4;N("LruGarbageCollector",`Garbage collection scheduled in ${o}ms`),this.we=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",o,(0,I.Z)(function*(){s.we=null,s.de=!0;try{yield r.collectGarbage(s.garbageCollector)}catch(a){or(a)?N("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",a):yield ur(a)}yield s._e(r)}))}}class Bm{constructor(r,s){this.me=r,this.params=s}calculateTargetCount(r,s){return this.me.ge(r).next(o=>Math.floor(s/100*o))}nthSequenceNumber(r,s){if(0===s)return A.resolve(it.T);const o=new Um(s);return this.me.forEachTarget(r,a=>o.fe(a.sequenceNumber)).next(()=>this.me.ye(r,a=>o.fe(a))).next(()=>o.maxValue)}removeTargets(r,s,o){return this.me.removeTargets(r,s,o)}removeOrphanedDocuments(r,s){return this.me.removeOrphanedDocuments(r,s)}collect(r,s){return-1===this.params.cacheSizeCollectionThreshold?(N("LruGarbageCollector","Garbage collection skipped; disabled"),A.resolve(Kh)):this.getCacheSize(r).next(o=>o<this.params.cacheSizeCollectionThreshold?(N("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Kh):this.pe(r,s))}getCacheSize(r){return this.me.getCacheSize(r)}pe(r,s){let o,a,c,l,f,m,y;const w=Date.now();return this.calculateTargetCount(r,this.params.percentileToCollect).next(b=>(b>this.params.maximumSequenceNumbersToCollect?(N("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${b}`),a=this.params.maximumSequenceNumbersToCollect):a=b,l=Date.now(),this.nthSequenceNumber(r,a))).next(b=>(o=b,f=Date.now(),this.removeTargets(r,o,s))).next(b=>(c=b,m=Date.now(),this.removeOrphanedDocuments(r,o))).next(b=>(y=Date.now(),dc()<=vt.in.DEBUG&&N("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-w}ms\n\tDetermined least recently used ${a} in `+(f-l)+`ms\n\tRemoved ${c} targets in `+(m-f)+`ms\n\tRemoved ${b} documents in `+(y-m)+`ms\nTotal Duration: ${y-w}ms`),A.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:c,documentsRemoved:b})))}}class Vm{constructor(r,s){this.db=r,this.garbageCollector=new Bm(this,s)}ge(r){const s=this.Ee(r);return this.db.getTargetCache().getTargetCount(r).next(o=>s.next(a=>o+a))}Ee(r){let s=0;return this.ye(r,o=>{s++}).next(()=>s)}forEachTarget(r,s){return this.db.getTargetCache().forEachTarget(r,s)}ye(r,s){return this.Te(r,(o,a)=>s(a))}addReference(r,s,o){return ia(r,o)}removeReference(r,s,o){return ia(r,o)}removeTargets(r,s,o){return this.db.getTargetCache().removeTargets(r,s,o)}markPotentiallyOrphaned(r,s){return ia(r,s)}Ie(r,s){return function(o,a){let c=!1;return $h(o).jt(l=>Gh(o,l,a).next(f=>(f&&(c=!0),A.resolve(!f)))).next(()=>c)}(r,s)}removeOrphanedDocuments(r,s){const o=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let c=0;return this.Te(r,(l,f)=>{if(f<=s){const m=this.Ie(r,l).next(y=>{if(!y)return c++,o.getEntry(r,l).next(()=>(o.removeEntry(l),yn(r).delete([0,gt(l.path)])))});a.push(m)}}).next(()=>A.waitFor(a)).next(()=>o.apply(r)).next(()=>c)}removeTarget(r,s){const o=s.withSequenceNumber(r.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(r,o)}updateLimboDocument(r,s){return ia(r,s)}Te(r,s){const o=yn(r);let a,c=it.T;return o.Kt({index:Be.documentTargetsIndex},([l,f],{path:m,sequenceNumber:y})=>{0===l?(c!==it.T&&s(new O(Ht(a)),c),c=y,a=m):c=it.T}).next(()=>{c!==it.T&&s(new O(Ht(a)),c)})}getCacheSize(r){return this.db.getRemoteDocumentCache().getSize(r)}}function ia(i,r){return yn(i).put((o=i.currentSequenceNumber,new Be(0,gt(r.path),o)));var o}class is{constructor(r,s){this.mapKeyFn=r,this.equalsFn=s,this.inner={}}get(r){const s=this.mapKeyFn(r),o=this.inner[s];if(void 0!==o)for(const[a,c]of o)if(this.equalsFn(a,r))return c}has(r){return void 0!==this.get(r)}set(r,s){const o=this.mapKeyFn(r),a=this.inner[o];if(void 0!==a){for(let c=0;c<a.length;c++)if(this.equalsFn(a[c][0],r))return void(a[c]=[r,s]);a.push([r,s])}else this.inner[o]=[[r,s]]}delete(r){const s=this.mapKeyFn(r),o=this.inner[s];if(void 0===o)return!1;for(let a=0;a<o.length;a++)if(this.equalsFn(o[a][0],r))return 1===o.length?delete this.inner[s]:o.splice(a,1),!0;return!1}forEach(r){er(this.inner,(s,o)=>{for(const[a,c]of o)r(a,c)})}isEmpty(){return ql(this.inner)}}class Wh{constructor(){this.changes=new is(r=>r.toString(),(r,s)=>r.isEqual(s)),this.changesApplied=!1}getReadTime(r){const s=this.changes.get(r);return s?s.readTime:V.min()}addEntry(r,s){this.assertNotApplied(),this.changes.set(r.key,{document:r,readTime:s})}removeEntry(r,s=null){this.assertNotApplied(),this.changes.set(r,{document:se.newInvalidDocument(r),readTime:s})}getEntry(r,s){this.assertNotApplied();const o=this.changes.get(s);return void 0!==o?A.resolve(o.document):this.getFromCache(r,s)}getEntries(r,s){return this.getAllFromCache(r,s)}apply(r){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(r)}assertNotApplied(){}}class jm{constructor(r,s){this.N=r,this.Ht=s}addEntry(r,s,o){return wn(r).put(oa(s),o)}removeEntry(r,s){const o=wn(r),a=oa(s);return o.delete(a)}updateMetadata(r,s){return this.getMetadata(r).next(o=>(o.byteSize+=s,this.Ae(r,o)))}getEntry(r,s){return wn(r).get(oa(s)).next(o=>this.Re(s,o))}Pe(r,s){return wn(r).get(oa(s)).next(o=>({document:this.Re(s,o),size:sa(o)}))}getEntries(r,s){let o=lt();return this.be(r,s,(a,c)=>{const l=this.Re(a,c);o=o.insert(a,l)}).next(()=>o)}ve(r,s){let o=lt(),a=new Ee(O.comparator);return this.be(r,s,(c,l)=>{const f=this.Re(c,l);o=o.insert(c,f),a=a.insert(c,sa(l))}).next(()=>({documents:o,Ve:a}))}be(r,s,o){if(s.isEmpty())return A.resolve();const a=IDBKeyRange.bound(s.first().path.toArray(),s.last().path.toArray()),c=s.getIterator();let l=c.getNext();return wn(r).Kt({range:a},(f,m,y)=>{const w=O.fromSegments(f);for(;l&&O.comparator(l,w)<0;)o(l,null),l=c.getNext();l&&l.isEqual(w)&&(o(l,m),l=c.hasNext()?c.getNext():null),l?y.Mt(l.path.toArray()):y.done()}).next(()=>{for(;l;)o(l,null),l=c.hasNext()?c.getNext():null})}getDocumentsMatchingQuery(r,s,o){let a=lt();const c=s.path.length+1,l={};if(o.isEqual(V.min())){const f=s.path.toArray();l.range=IDBKeyRange.lowerBound(f)}else{const f=s.path.toArray(),m=Pc(o);l.range=IDBKeyRange.lowerBound([f,m],!0),l.index=he.collectionReadTimeIndex}return wn(r).Kt(l,(f,m,y)=>{if(f.length!==c)return;const w=Dc(this.N,m);s.path.isPrefixOf(w.key.path)?wi(s,w)&&(a=a.insert(w.key,w)):y.done()}).next(()=>a)}newChangeBuffer(r){return new zm(this,!!r&&r.trackRemovals)}getSize(r){return this.getMetadata(r).next(s=>s.byteSize)}getMetadata(r){return Yh(r).get(kt.key).next(s=>(U(!!s),s))}Ae(r,s){return Yh(r).put(kt.key,s)}Re(r,s){if(s){const o=Dc(this.N,s);if(!o.isNoDocument()||!o.version.isEqual(V.min()))return o}return se.newInvalidDocument(r)}}class zm extends Wh{constructor(r,s){super(),this.Se=r,this.trackRemovals=s,this.De=new is(o=>o.toString(),(o,a)=>o.isEqual(a))}applyChanges(r){const s=[];let o=0,a=new le((c,l)=>H(c.canonicalString(),l.canonicalString()));return this.changes.forEach((c,l)=>{const f=this.De.get(c);if(l.document.isValidDocument()){const m=Uh(this.Se.N,l.document,this.getReadTime(c));a=a.add(c.path.popLast()),o+=sa(m)-f,s.push(this.Se.addEntry(r,c,m))}else if(o-=f,this.trackRemovals){const m=Uh(this.Se.N,se.newNoDocument(c,V.min()),this.getReadTime(c));s.push(this.Se.addEntry(r,c,m))}else s.push(this.Se.removeEntry(r,c))}),a.forEach(c=>{s.push(this.Se.Ht.addToCollectionParentIndex(r,c))}),s.push(this.Se.updateMetadata(r,o)),A.waitFor(s)}getFromCache(r,s){return this.Se.Pe(r,s).next(o=>(this.De.set(s,o.size),o.document))}getAllFromCache(r,s){return this.Se.ve(r,s).next(({documents:o,Ve:a})=>(a.forEach((c,l)=>{this.De.set(c,l)}),o))}}function Yh(i){return et(i,kt.store)}function wn(i){return et(i,he.store)}function oa(i){return i.path.toArray()}class Km{constructor(r){this.N=r}Ct(r,s,o,a){U(o<a&&o>=0&&a<=11);const c=new ra("createOrUpgrade",s);var f;o<1&&a>=1&&(r.createObjectStore(ot.store),(f=r).createObjectStore(mn.store,{keyPath:mn.keyPath}),f.createObjectStore(ne.store,{keyPath:ne.keyPath,autoIncrement:!0}).createIndex(ne.userMutationsIndex,ne.userMutationsKeyPath,{unique:!0}),f.createObjectStore(He.store),Xh(r),function(f){f.createObjectStore(he.store)}(r));let l=A.resolve();return o<3&&a>=3&&(0!==o&&(function(f){f.deleteObjectStore(Be.store),f.deleteObjectStore(Xe.store),f.deleteObjectStore(at.store)}(r),Xh(r)),l=l.next(()=>function(f){const m=f.store(at.store),y=new at(0,0,V.min().toTimestamp(),0);return m.put(at.key,y)}(c))),o<4&&a>=4&&(0!==o&&(l=l.next(()=>function(f,m){return m.store(ne.store).Lt().next(y=>{f.deleteObjectStore(ne.store),f.createObjectStore(ne.store,{keyPath:ne.keyPath,autoIncrement:!0}).createIndex(ne.userMutationsIndex,ne.userMutationsKeyPath,{unique:!0});const w=m.store(ne.store),b=y.map(_=>w.put(_));return A.waitFor(b)})}(r,c))),l=l.next(()=>{!function(f){f.createObjectStore(Gt.store,{keyPath:Gt.keyPath})}(r)})),o<5&&a>=5&&(l=l.next(()=>this.Ce(c))),o<6&&a>=6&&(l=l.next(()=>(function(f){f.createObjectStore(kt.store)}(r),this.Ne(c)))),o<7&&a>=7&&(l=l.next(()=>this.xe(c))),o<8&&a>=8&&(l=l.next(()=>this.ke(r,c))),o<9&&a>=9&&(l=l.next(()=>{(function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")})(r),function(f){const m=f.objectStore(he.store);m.createIndex(he.readTimeIndex,he.readTimeIndexPath,{unique:!1}),m.createIndex(he.collectionReadTimeIndex,he.collectionReadTimeIndexPath,{unique:!1})}(s)})),o<10&&a>=10&&(l=l.next(()=>this.$e(c))),o<11&&a>=11&&(l=l.next(()=>{(function(f){f.createObjectStore(Yr.store,{keyPath:Yr.keyPath})})(r),function(f){f.createObjectStore(Xr.store,{keyPath:Xr.keyPath})}(r)})),l}Ne(r){let s=0;return r.store(he.store).Kt((o,a)=>{s+=sa(a)}).next(()=>{const o=new kt(s);return r.store(kt.store).put(kt.key,o)})}Ce(r){const s=r.store(mn.store),o=r.store(ne.store);return s.Lt().next(a=>A.forEach(a,c=>{const l=IDBKeyRange.bound([c.userId,-1],[c.userId,c.lastAcknowledgedBatchId]);return o.Lt(ne.userMutationsIndex,l).next(f=>A.forEach(f,m=>{U(m.userId===c.userId);const y=ns(this.N,m);return Hh(r,c.userId,y).next(()=>{})}))}))}xe(r){const s=r.store(Be.store),o=r.store(he.store);return r.store(at.store).get(at.key).next(a=>{const c=[];return o.Kt((l,f)=>{const m=new J(l),y=[0,gt(m)];c.push(s.get(y).next(w=>w?A.resolve():s.put(new Be(0,gt(m),a.highestListenSequenceNumber))))}).next(()=>A.waitFor(c))})}ke(r,s){r.createObjectStore(ir.store,{keyPath:ir.keyPath});const o=s.store(ir.store),a=new Mc,c=l=>{if(a.add(l)){const f=l.lastSegment(),m=l.popLast();return o.put({collectionId:f,parent:gt(m)})}};return s.store(he.store).Kt({qt:!0},(l,f)=>{const m=new J(l);return c(m.popLast())}).next(()=>s.store(He.store).Kt({qt:!0},([l,f,m],y)=>{const w=Ht(f);return c(w.popLast())}))}$e(r){const s=r.store(Xe.store);return s.Kt((o,a)=>{const c=Si(a),l=Bh(this.N,c);return s.put(l)})}}function Xh(i){i.createObjectStore(Be.store,{keyPath:Be.keyPath}).createIndex(Be.documentTargetsIndex,Be.documentTargetsKeyPath,{unique:!0}),i.createObjectStore(Xe.store,{keyPath:Xe.keyPath}).createIndex(Xe.queryTargetsIndexName,Xe.queryTargetsKeyPath,{unique:!0}),i.createObjectStore(at.store)}const Fc="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Rc{constructor(r,s,o,a,c,l,f,m,y,w){if(this.allowTabSynchronization=r,this.persistenceKey=s,this.clientId=o,this.Oe=c,this.window=l,this.document=f,this.Fe=y,this.Me=w,this.Le=null,this.Be=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ue=null,this.inForeground=!1,this.qe=null,this.Ke=null,this.je=Number.NEGATIVE_INFINITY,this.Qe=b=>Promise.resolve(),!Rc.Pt())throw new S(x.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Vm(this,a),this.We=s+"main",this.N=new Rh(m),this.Ge=new yt(this.We,11,new Km(this.N)),this.ze=new Rm(this.referenceDelegate,this.N),this.Ht=new Fm,this.He=new jm(this.N,this.Ht),this.Je=new Lm,this.window&&this.window.localStorage?this.Ye=this.window.localStorage:(this.Ye=null,!1===w&&ge("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Xe().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new S(x.FAILED_PRECONDITION,Fc);return this.Ze(),this.tn(),this.en(),this.runTransaction("getHighestListenSequenceNumber","readonly",r=>this.ze.getHighestSequenceNumber(r))}).then(r=>{this.Le=new it(r,this.Fe)}).then(()=>{this.Be=!0}).catch(r=>(this.Ge&&this.Ge.close(),Promise.reject(r)))}nn(r){var s=this;return this.Qe=function(){var o=(0,I.Z)(function*(a){if(s.started)return r(a)});return function(a){return o.apply(this,arguments)}}(),r(this.isPrimary)}setDatabaseDeletedListener(r){this.Ge.xt(function(){var s=(0,I.Z)(function*(o){null===o.newVersion&&(yield r())});return function(o){return s.apply(this,arguments)}}())}setNetworkEnabled(r){var s=this;this.networkEnabled!==r&&(this.networkEnabled=r,this.Oe.enqueueAndForget((0,I.Z)(function*(){s.started&&(yield s.Xe())})))}Xe(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",r=>aa(r).put(new Gt(this.clientId,Date.now(),this.networkEnabled,this.inForeground)).next(()=>{if(this.isPrimary)return this.sn(r).next(s=>{s||(this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.Qe(!1)))})}).next(()=>this.rn(r)).next(s=>this.isPrimary&&!s?this.on(r).next(()=>!1):!!s&&this.an(r).next(()=>!0))).catch(r=>{if(or(r))return N("IndexedDbPersistence","Failed to extend owner lease: ",r),this.isPrimary;if(!this.allowTabSynchronization)throw r;return N("IndexedDbPersistence","Releasing owner lease after error during lease refresh",r),!1}).then(r=>{this.isPrimary!==r&&this.Oe.enqueueRetryable(()=>this.Qe(r)),this.isPrimary=r})}sn(r){return ki(r).get(ot.key).next(s=>A.resolve(this.cn(s)))}un(r){return aa(r).delete(this.clientId)}hn(){var r=this;return(0,I.Z)(function*(){if(r.isPrimary&&!r.ln(r.je,18e5)){r.je=Date.now();const s=yield r.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",o=>{const a=et(o,Gt.store);return a.Lt().next(c=>{const l=r.fn(c,18e5),f=c.filter(m=>-1===l.indexOf(m));return A.forEach(f,m=>a.delete(m.clientId)).next(()=>f)})}).catch(()=>[]);if(r.Ye)for(const o of s)r.Ye.removeItem(r.dn(o.clientId))}})()}en(){this.Ke=this.Oe.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Xe().then(()=>this.hn()).then(()=>this.en()))}cn(r){return!!r&&r.ownerId===this.clientId}rn(r){return this.Me?A.resolve(!0):ki(r).get(ot.key).next(s=>{if(null!==s&&this.ln(s.leaseTimestampMs,5e3)&&!this.wn(s.ownerId)){if(this.cn(s)&&this.networkEnabled)return!0;if(!this.cn(s)){if(!s.allowTabSynchronization)throw new S(x.FAILED_PRECONDITION,Fc);return!1}}return!(!this.networkEnabled||!this.inForeground)||aa(r).Lt().next(o=>void 0===this.fn(o,5e3).find(a=>{if(this.clientId!==a.clientId){const l=!this.inForeground&&a.inForeground,f=this.networkEnabled===a.networkEnabled;if(!this.networkEnabled&&a.networkEnabled||l&&f)return!0}return!1}))}).next(s=>(this.isPrimary!==s&&N("IndexedDbPersistence",`Client ${s?"is":"is not"} eligible for a primary lease.`),s))}shutdown(){var r=this;return(0,I.Z)(function*(){r.Be=!1,r._n(),r.Ke&&(r.Ke.cancel(),r.Ke=null),r.mn(),r.gn(),yield r.Ge.runTransaction("shutdown","readwrite",[ot.store,Gt.store],s=>{const o=new Fh(s,it.T);return r.on(o).next(()=>r.un(o))}),r.Ge.close(),r.yn()})()}fn(r,s){return r.filter(o=>this.ln(o.updateTimeMs,s)&&!this.wn(o.clientId))}pn(){return this.runTransaction("getActiveClients","readonly",r=>aa(r).Lt().next(s=>this.fn(s,18e5).map(o=>o.clientId)))}get started(){return this.Be}getMutationQueue(r){return Lc.Yt(r,this.N,this.Ht,this.referenceDelegate)}getTargetCache(){return this.ze}getRemoteDocumentCache(){return this.He}getIndexManager(){return this.Ht}getBundleCache(){return this.Je}runTransaction(r,s,o){let c;return N("IndexedDbPersistence","Starting transaction:",r),this.Ge.runTransaction(r,"readonly"===s?"readonly":"readwrite",Pm,l=>(c=new Fh(l,this.Le?this.Le.next():it.T),"readwrite-primary"===s?this.sn(c).next(f=>!!f||this.rn(c)).next(f=>{if(!f)throw ge(`Failed to obtain primary lease for action '${r}'.`),this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.Qe(!1)),new S(x.FAILED_PRECONDITION,Mh);return o(c)}).next(f=>this.an(c).next(()=>f)):this.En(c).next(()=>o(c)))).then(l=>(c.raiseOnCommittedEvent(),l))}En(r){return ki(r).get(ot.key).next(s=>{if(null!==s&&this.ln(s.leaseTimestampMs,5e3)&&!this.wn(s.ownerId)&&!this.cn(s)&&!(this.Me||this.allowTabSynchronization&&s.allowTabSynchronization))throw new S(x.FAILED_PRECONDITION,Fc)})}an(r){const s=new ot(this.clientId,this.allowTabSynchronization,Date.now());return ki(r).put(ot.key,s)}static Pt(){return yt.Pt()}on(r){const s=ki(r);return s.get(ot.key).next(o=>this.cn(o)?(N("IndexedDbPersistence","Releasing primary lease."),s.delete(ot.key)):A.resolve())}ln(r,s){const o=Date.now();return!(r<o-s||r>o&&(ge(`Detected an update time that is in the future: ${r} > ${o}`),1))}Ze(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.qe=()=>{this.Oe.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Xe()))},this.document.addEventListener("visibilitychange",this.qe),this.inForeground="visible"===this.document.visibilityState)}mn(){this.qe&&(this.document.removeEventListener("visibilitychange",this.qe),this.qe=null)}tn(){var r;"function"==typeof(null===(r=this.window)||void 0===r?void 0:r.addEventListener)&&(this.Ue=()=>{this._n(),(0,K.G6)()&&navigator.appVersion.match("Version/14")&&this.Oe.enterRestrictedMode(!0),this.Oe.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Ue))}gn(){this.Ue&&(this.window.removeEventListener("pagehide",this.Ue),this.Ue=null)}wn(r){var s;try{const o=null!==(null===(s=this.Ye)||void 0===s?void 0:s.getItem(this.dn(r)));return N("IndexedDbPersistence",`Client '${r}' ${o?"is":"is not"} zombied in LocalStorage`),o}catch(o){return ge("IndexedDbPersistence","Failed to get zombied client id.",o),!1}}_n(){if(this.Ye)try{this.Ye.setItem(this.dn(this.clientId),String(Date.now()))}catch(r){ge("Failed to set zombie client id.",r)}}yn(){if(this.Ye)try{this.Ye.removeItem(this.dn(this.clientId))}catch(r){}}dn(r){return`firestore_zombie_${this.persistenceKey}_${r}`}}function ki(i){return et(i,ot.store)}function aa(i){return et(i,Gt.store)}function Uc(i,r){let s=i.projectId;return i.isDefaultDatabase||(s+="."+i.database),"firestore/"+r+"/"+s+"/"}class Hm{constructor(r,s){this.progress=r,this.Tn=s}}class ed{constructor(r,s,o){this.He=r,this.In=s,this.Ht=o}An(r,s){return this.In.getAllMutationBatchesAffectingDocumentKey(r,s).next(o=>this.Rn(r,s,o))}Rn(r,s,o){return this.He.getEntry(r,s).next(a=>{for(const c of o)c.applyToLocalView(a);return a})}Pn(r,s){r.forEach((o,a)=>{for(const c of s)c.applyToLocalView(a)})}bn(r,s){return this.He.getEntries(r,s).next(o=>this.vn(r,o).next(()=>o))}vn(r,s){return this.In.getAllMutationBatchesAffectingDocumentKeys(r,s).next(o=>this.Pn(s,o))}getDocumentsMatchingQuery(r,s,o){return O.isDocumentKey((a=s).path)&&null===a.collectionGroup&&0===a.filters.length?this.Vn(r,s.path):_c(s)?this.Sn(r,s,o):this.Dn(r,s,o);var a}Vn(r,s){return this.An(r,new O(s)).next(o=>{let a=Ec();return o.isFoundDocument()&&(a=a.insert(o.key,o)),a})}Sn(r,s,o){const a=s.collectionGroup;let c=Ec();return this.Ht.getCollectionParents(r,a).next(l=>A.forEach(l,f=>{const m=(y=s,w=f.child(a),new Kt(w,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt));var y,w;return this.Dn(r,m,o).next(y=>{y.forEach((w,b)=>{c=c.insert(w,b)})})}).next(()=>c))}Dn(r,s,o){let a,c;return this.He.getDocumentsMatchingQuery(r,s,o).next(l=>(a=l,this.In.getAllMutationBatchesAffectingQuery(r,s))).next(l=>(c=l,this.Cn(r,c,a).next(f=>{a=f;for(const m of c)for(const y of m.mutations){const w=y.key;let b=a.get(w);null==b&&(b=se.newInvalidDocument(w),a=a.insert(w,b)),Tc(y,b,m.localWriteTime),b.isFoundDocument()||(a=a.remove(w))}}))).next(()=>(a.forEach((l,f)=>{wi(s,f)||(a=a.remove(l))}),a))}Cn(r,s,o){let a=Y();for(const l of s)for(const f of l.mutations)f instanceof fn&&null===o.get(f.key)&&(a=a.add(f.key));let c=o;return this.He.getEntries(r,a).next(l=>(l.forEach((f,m)=>{m.isFoundDocument()&&(c=c.insert(f,m))}),c))}}class Zc{constructor(r,s,o,a){this.targetId=r,this.fromCache=s,this.Nn=o,this.xn=a}static kn(r,s){let o=Y(),a=Y();for(const c of s.docChanges)switch(c.type){case 0:o=o.add(c.doc.key);break;case 1:a=a.add(c.doc.key)}return new Zc(r,s.fromCache,o,a)}}class td{$n(r){this.On=r}getDocumentsMatchingQuery(r,s,o,a){return 0===(c=s).filters.length&&null===c.limit&&null==c.startAt&&null==c.endAt&&(0===c.explicitOrderBy.length||1===c.explicitOrderBy.length&&c.explicitOrderBy[0].field.isKeyField())||o.isEqual(V.min())?this.Fn(r,s):this.On.bn(r,a).next(c=>{const l=this.Mn(s,c);return($o(s)||Qo(s))&&this.Ln(s.limitType,l,a,o)?this.Fn(r,s):(dc()<=vt.in.DEBUG&&N("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),xc(s)),this.On.getDocumentsMatchingQuery(r,s,o).next(f=>(l.forEach(m=>{f=f.insert(m.key,m)}),f)))});var c}Mn(r,s){let o=new le(Jl(r));return s.forEach((a,c)=>{wi(r,c)&&(o=o.add(c))}),o}Ln(r,s,o,a){if(o.size!==s.size)return!0;const c="F"===r?s.last():s.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(a)>0)}Fn(r,s){return dc()<=vt.in.DEBUG&&N("QueryEngine","Using full collection scan to execute query:",xc(s)),this.On.getDocumentsMatchingQuery(r,s,V.min())}}class Gm{constructor(r,s,o,a){this.persistence=r,this.Bn=s,this.N=a,this.Un=new Ee(H),this.qn=new is(c=>pi(c),Ko),this.Kn=V.min(),this.In=r.getMutationQueue(o),this.jn=r.getRemoteDocumentCache(),this.ze=r.getTargetCache(),this.Qn=new ed(this.jn,this.In,this.persistence.getIndexManager()),this.Je=r.getBundleCache(),this.Bn.$n(this.Qn)}collectGarbage(r){return this.persistence.runTransaction("Collect garbage","readwrite-primary",s=>r.collect(s,this.Un))}}function nd(i,r,s,o){return new Gm(i,r,s,o)}function rd(i,r){return Bc.apply(this,arguments)}function Bc(){return(Bc=(0,I.Z)(function*(i,r){const s=D(i);let o=s.In,a=s.Qn;const c=yield s.persistence.runTransaction("Handle user change","readonly",l=>{let f;return s.In.getAllMutationBatches(l).next(m=>(f=m,o=s.persistence.getMutationQueue(r),a=new ed(s.jn,o,s.persistence.getIndexManager()),o.getAllMutationBatches(l))).next(m=>{const y=[],w=[];let b=Y();for(const _ of f){y.push(_.batchId);for(const E of _.mutations)b=b.add(E.key)}for(const _ of m){w.push(_.batchId);for(const E of _.mutations)b=b.add(E.key)}return a.bn(l,b).next(_=>({Wn:_,removedBatchIds:y,addedBatchIds:w}))})});return s.In=o,s.Qn=a,s.Bn.$n(s.Qn),c})).apply(this,arguments)}function $m(i,r){const s=D(i);return s.persistence.runTransaction("Acknowledge batch","readwrite-primary",o=>{const a=r.batch.keys(),c=s.jn.newChangeBuffer({trackRemovals:!0});return function(l,f,m,y){const w=m.batch,b=w.keys();let _=A.resolve();return b.forEach(E=>{_=_.next(()=>y.getEntry(f,E)).next(k=>{const L=m.docVersions.get(E);U(null!==L),k.version.compareTo(L)<0&&(w.applyToRemoteDocument(k,m),k.isValidDocument()&&y.addEntry(k,m.commitVersion))})}),_.next(()=>l.In.removeMutationBatch(f,w))}(s,o,r,c).next(()=>c.apply(o)).next(()=>s.In.performConsistencyCheck(o)).next(()=>s.Qn.bn(o,a))})}function sd(i){const r=D(i);return r.persistence.runTransaction("Get last remote snapshot version","readonly",s=>r.ze.getLastRemoteSnapshotVersion(s))}function Qm(i,r){const s=D(i),o=r.snapshotVersion;let a=s.Un;return s.persistence.runTransaction("Apply remote event","readwrite-primary",c=>{const l=s.jn.newChangeBuffer({trackRemovals:!0});a=s.Un;const f=[];r.targetChanges.forEach((y,w)=>{const b=a.get(w);if(!b)return;f.push(s.ze.removeMatchingKeys(c,y.removedDocuments,w).next(()=>s.ze.addMatchingKeys(c,y.addedDocuments,w)));const _=y.resumeToken;if(_.approximateByteSize()>0){const E=b.withResumeToken(_,o).withSequenceNumber(c.currentSequenceNumber);a=a.insert(w,E),k=b,Z=y,U((L=E).resumeToken.approximateByteSize()>0),(0===k.resumeToken.approximateByteSize()||L.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=3e8||Z.addedDocuments.size+Z.modifiedDocuments.size+Z.removedDocuments.size>0)&&f.push(s.ze.updateTargetData(c,E))}var k,L,Z});let m=lt();if(r.documentUpdates.forEach((y,w)=>{r.resolvedLimboDocuments.has(y)&&f.push(s.persistence.referenceDelegate.updateLimboDocument(c,y))}),f.push(id(c,l,r.documentUpdates,o,void 0).next(y=>{m=y})),!o.isEqual(V.min())){const y=s.ze.getLastRemoteSnapshotVersion(c).next(w=>s.ze.setTargetsMetadata(c,c.currentSequenceNumber,o));f.push(y)}return A.waitFor(f).next(()=>l.apply(c)).next(()=>s.Qn.vn(c,m)).next(()=>m)}).then(c=>(s.Un=a,c))}function id(i,r,s,o,a){let c=Y();return s.forEach(l=>c=c.add(l)),r.getEntries(i,c).next(l=>{let f=lt();return s.forEach((m,y)=>{const w=l.get(m),b=(null==a?void 0:a.get(m))||o;y.isNoDocument()&&y.version.isEqual(V.min())?(r.removeEntry(m,b),f=f.insert(m,y)):!w.isValidDocument()||y.version.compareTo(w.version)>0||0===y.version.compareTo(w.version)&&w.hasPendingWrites?(r.addEntry(y,b),f=f.insert(m,y)):N("LocalStore","Ignoring outdated watch update for ",m,". Current version:",w.version," Watch version:",y.version)}),f})}function Jm(i,r){const s=D(i);return s.persistence.runTransaction("Get next mutation batch","readonly",o=>(void 0===r&&(r=-1),s.In.getNextMutationBatchAfterBatchId(o,r)))}function os(i,r){const s=D(i);return s.persistence.runTransaction("Allocate target","readwrite",o=>{let a;return s.ze.getTargetData(o,r).next(c=>c?(a=c,A.resolve(a)):s.ze.allocateTargetId(o).next(l=>(a=new pn(r,l,0,o.currentSequenceNumber),s.ze.addTargetData(o,a).next(()=>a))))}).then(o=>{const a=s.Un.get(o.targetId);return(null===a||o.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(s.Un=s.Un.insert(o.targetId,o),s.qn.set(r,o.targetId)),o})}function as(i,r,s){return Vc.apply(this,arguments)}function Vc(){return(Vc=(0,I.Z)(function*(i,r,s){const o=D(i),a=o.Un.get(r),c=s?"readwrite":"readwrite-primary";try{s||(yield o.persistence.runTransaction("Release target",c,l=>o.persistence.referenceDelegate.removeTarget(l,a)))}catch(l){if(!or(l))throw l;N("LocalStore",`Failed to update sequence numbers for target ${r}: ${l}`)}o.Un=o.Un.remove(r),o.qn.delete(a.target)})).apply(this,arguments)}function ca(i,r,s){const o=D(i);let a=V.min(),c=Y();return o.persistence.runTransaction("Execute query","readonly",l=>function(f,m,y){const w=D(f),b=w.qn.get(y);return void 0!==b?A.resolve(w.Un.get(b)):w.ze.getTargetData(m,y)}(o,l,ut(r)).next(f=>{if(f)return a=f.lastLimboFreeSnapshotVersion,o.ze.getMatchingKeysForTargetId(l,f.targetId).next(m=>{c=m})}).next(()=>o.Bn.getDocumentsMatchingQuery(l,r,s?a:V.min(),s?c:Y())).next(f=>({documents:f,Gn:c})))}function od(i,r){const s=D(i),o=D(s.ze),a=s.Un.get(r);return a?Promise.resolve(a.target):s.persistence.runTransaction("Get target data","readonly",c=>o.Et(c,r).next(l=>l?l.target:null))}function ad(i){const r=D(i);return r.persistence.runTransaction("Get new document changes","readonly",s=>function(o,a,c){const l=D(o);let f=lt(),m=Pc(c);const y=wn(a),w=IDBKeyRange.lowerBound(m,!0);return y.Kt({index:he.readTimeIndex,range:w},(b,_)=>{const E=Dc(l.N,_);f=f.insert(E.key,E),m=_.readTime}).next(()=>({Tn:f,readTime:Zh(m)}))}(r.jn,s,r.Kn)).then(({Tn:s,readTime:o})=>(r.Kn=o,s))}function jc(){return(jc=(0,I.Z)(function*(i){const r=D(i);return r.persistence.runTransaction("Synchronize last document change read time","readonly",s=>function(o){const a=wn(o);let c=V.min();return a.Kt({index:he.readTimeIndex,reverse:!0},(l,f,m)=>{f.readTime&&(c=Zh(f.readTime)),m.done()}).next(()=>c)}(s)).then(s=>{r.Kn=s})})).apply(this,arguments)}function zc(){return(zc=(0,I.Z)(function*(i,r,s,o){const a=D(i);let c=Y(),l=lt(),f=fh();for(const w of s){const b=r.zn(w.metadata.name);w.document&&(c=c.add(b)),l=l.insert(b,r.Hn(w)),f=f.insert(b,r.Jn(w.metadata.readTime))}const m=a.jn.newChangeBuffer({trackRemovals:!0}),y=yield os(a,(w=o,ut(Hr(J.fromString(`__bundle__/docs/${w}`)))));var w;return a.persistence.runTransaction("Apply bundle documents","readwrite",w=>id(w,m,l,V.min(),f).next(b=>(m.apply(w),b)).next(b=>a.ze.removeMatchingKeysForTargetId(w,y.targetId).next(()=>a.ze.addMatchingKeys(w,c,y.targetId)).next(()=>a.Qn.vn(w,b)).next(()=>b)))})).apply(this,arguments)}function Xm(i,r){return Kc.apply(this,arguments)}function Kc(){return(Kc=(0,I.Z)(function*(i,r,s=Y()){const o=yield os(i,ut(Oc(r.bundledQuery))),a=D(i);return a.persistence.runTransaction("Save named query","readwrite",c=>{const l=Le(r.readTime);if(o.snapshotVersion.compareTo(l)>=0)return a.Je.saveNamedQuery(c,r);const f=o.withResumeToken(Me.EMPTY_BYTE_STRING,l);return a.Un=a.Un.insert(f.targetId,f),a.ze.updateTargetData(c,f).next(()=>a.ze.removeMatchingKeysForTargetId(c,o.targetId)).next(()=>a.ze.addMatchingKeys(c,s,o.targetId)).next(()=>a.Je.saveNamedQuery(c,r))})})).apply(this,arguments)}class ep{constructor(r){this.N=r,this.Yn=new Map,this.Xn=new Map}getBundleMetadata(r,s){return A.resolve(this.Yn.get(s))}saveBundleMetadata(r,s){var o;return this.Yn.set(s.id,{id:(o=s).id,version:o.version,createTime:Le(o.createTime)}),A.resolve()}getNamedQuery(r,s){return A.resolve(this.Xn.get(s))}saveNamedQuery(r,s){return this.Xn.set(s.name,{name:(o=s).name,query:Oc(o.bundledQuery),readTime:Le(o.readTime)}),A.resolve();var o}}class Hc{constructor(){this.Zn=new le(qe.ts),this.es=new le(qe.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(r,s){const o=new qe(r,s);this.Zn=this.Zn.add(o),this.es=this.es.add(o)}ss(r,s){r.forEach(o=>this.addReference(o,s))}removeReference(r,s){this.rs(new qe(r,s))}os(r,s){r.forEach(o=>this.removeReference(o,s))}cs(r){const s=new O(new J([])),o=new qe(s,r),a=new qe(s,r+1),c=[];return this.es.forEachInRange([o,a],l=>{this.rs(l),c.push(l.key)}),c}us(){this.Zn.forEach(r=>this.rs(r))}rs(r){this.Zn=this.Zn.delete(r),this.es=this.es.delete(r)}hs(r){const s=new O(new J([])),o=new qe(s,r),a=new qe(s,r+1);let c=Y();return this.es.forEachInRange([o,a],l=>{c=c.add(l.key)}),c}containsKey(r){const s=new qe(r,0),o=this.Zn.firstAfterOrEqual(s);return null!==o&&r.isEqual(o.key)}}class qe{constructor(r,s){this.key=r,this.ls=s}static ts(r,s){return O.comparator(r.key,s.key)||H(r.ls,s.ls)}static ns(r,s){return H(r.ls,s.ls)||O.comparator(r.key,s.key)}}class tp{constructor(r,s){this.Ht=r,this.referenceDelegate=s,this.In=[],this.fs=1,this.ds=new le(qe.ts)}checkEmpty(r){return A.resolve(0===this.In.length)}addMutationBatch(r,s,o,a){const c=this.fs;this.fs++;const l=new kc(c,s,o,a);this.In.push(l);for(const f of a)this.ds=this.ds.add(new qe(f.key,c)),this.Ht.addToCollectionParentIndex(r,f.key.path.popLast());return A.resolve(l)}lookupMutationBatch(r,s){return A.resolve(this.ws(s))}getNextMutationBatchAfterBatchId(r,s){const a=this._s(s+1),c=a<0?0:a;return A.resolve(this.In.length>c?this.In[c]:null)}getHighestUnacknowledgedBatchId(){return A.resolve(0===this.In.length?-1:this.fs-1)}getAllMutationBatches(r){return A.resolve(this.In.slice())}getAllMutationBatchesAffectingDocumentKey(r,s){const o=new qe(s,0),a=new qe(s,Number.POSITIVE_INFINITY),c=[];return this.ds.forEachInRange([o,a],l=>{const f=this.ws(l.ls);c.push(f)}),A.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(r,s){let o=new le(H);return s.forEach(a=>{const c=new qe(a,0),l=new qe(a,Number.POSITIVE_INFINITY);this.ds.forEachInRange([c,l],f=>{o=o.add(f.ls)})}),A.resolve(this.gs(o))}getAllMutationBatchesAffectingQuery(r,s){const o=s.path,a=o.length+1;let c=o;O.isDocumentKey(c)||(c=c.child(""));const l=new qe(new O(c),0);let f=new le(H);return this.ds.forEachWhile(m=>{const y=m.key.path;return!!o.isPrefixOf(y)&&(y.length===a&&(f=f.add(m.ls)),!0)},l),A.resolve(this.gs(f))}gs(r){const s=[];return r.forEach(o=>{const a=this.ws(o);null!==a&&s.push(a)}),s}removeMutationBatch(r,s){U(0===this.ys(s.batchId,"removed")),this.In.shift();let o=this.ds;return A.forEach(s.mutations,a=>{const c=new qe(a.key,s.batchId);return o=o.delete(c),this.referenceDelegate.markPotentiallyOrphaned(r,a.key)}).next(()=>{this.ds=o})}te(r){}containsKey(r,s){const o=new qe(s,0),a=this.ds.firstAfterOrEqual(o);return A.resolve(s.isEqual(a&&a.key))}performConsistencyCheck(r){return A.resolve()}ys(r,s){return this._s(r)}_s(r){return 0===this.In.length?0:r-this.In[0].batchId}ws(r){const s=this._s(r);return s<0||s>=this.In.length?null:this.In[s]}}class np{constructor(r,s){this.Ht=r,this.ps=s,this.docs=new Ee(O.comparator),this.size=0}addEntry(r,s,o){const a=s.key,c=this.docs.get(a),l=c?c.size:0,f=this.ps(s);return this.docs=this.docs.insert(a,{document:s.clone(),size:f,readTime:o}),this.size+=f-l,this.Ht.addToCollectionParentIndex(r,a.path.popLast())}removeEntry(r){const s=this.docs.get(r);s&&(this.docs=this.docs.remove(r),this.size-=s.size)}getEntry(r,s){const o=this.docs.get(s);return A.resolve(o?o.document.clone():se.newInvalidDocument(s))}getEntries(r,s){let o=lt();return s.forEach(a=>{const c=this.docs.get(a);o=o.insert(a,c?c.document.clone():se.newInvalidDocument(a))}),A.resolve(o)}getDocumentsMatchingQuery(r,s,o){let a=lt();const c=new O(s.path.child("")),l=this.docs.getIteratorFrom(c);for(;l.hasNext();){const{key:f,value:{document:m,readTime:y}}=l.getNext();if(!s.path.isPrefixOf(f.path))break;y.compareTo(o)<=0||wi(s,m)&&(a=a.insert(m.key,m.clone()))}return A.resolve(a)}Es(r,s){return A.forEach(this.docs,o=>s(o))}newChangeBuffer(r){return new rp(this)}getSize(r){return A.resolve(this.size)}}class rp extends Wh{constructor(r){super(),this.Se=r}applyChanges(r){const s=[];return this.changes.forEach((o,a)=>{a.document.isValidDocument()?s.push(this.Se.addEntry(r,a.document,this.getReadTime(o))):this.Se.removeEntry(o)}),A.waitFor(s)}getFromCache(r,s){return this.Se.getEntry(r,s)}getAllFromCache(r,s){return this.Se.getEntries(r,s)}}class sp{constructor(r){this.persistence=r,this.Ts=new is(s=>pi(s),Ko),this.lastRemoteSnapshotVersion=V.min(),this.highestTargetId=0,this.Is=0,this.As=new Hc,this.targetCount=0,this.Rs=cr.se()}forEachTarget(r,s){return this.Ts.forEach((o,a)=>s(a)),A.resolve()}getLastRemoteSnapshotVersion(r){return A.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(r){return A.resolve(this.Is)}allocateTargetId(r){return this.highestTargetId=this.Rs.next(),A.resolve(this.highestTargetId)}setTargetsMetadata(r,s,o){return o&&(this.lastRemoteSnapshotVersion=o),s>this.Is&&(this.Is=s),A.resolve()}ae(r){this.Ts.set(r.target,r);const s=r.targetId;s>this.highestTargetId&&(this.Rs=new cr(s),this.highestTargetId=s),r.sequenceNumber>this.Is&&(this.Is=r.sequenceNumber)}addTargetData(r,s){return this.ae(s),this.targetCount+=1,A.resolve()}updateTargetData(r,s){return this.ae(s),A.resolve()}removeTargetData(r,s){return this.Ts.delete(s.target),this.As.cs(s.targetId),this.targetCount-=1,A.resolve()}removeTargets(r,s,o){let a=0;const c=[];return this.Ts.forEach((l,f)=>{f.sequenceNumber<=s&&null===o.get(f.targetId)&&(this.Ts.delete(l),c.push(this.removeMatchingKeysForTargetId(r,f.targetId)),a++)}),A.waitFor(c).next(()=>a)}getTargetCount(r){return A.resolve(this.targetCount)}getTargetData(r,s){const o=this.Ts.get(s)||null;return A.resolve(o)}addMatchingKeys(r,s,o){return this.As.ss(s,o),A.resolve()}removeMatchingKeys(r,s,o){this.As.os(s,o);const a=this.persistence.referenceDelegate,c=[];return a&&s.forEach(l=>{c.push(a.markPotentiallyOrphaned(r,l))}),A.waitFor(c)}removeMatchingKeysForTargetId(r,s){return this.As.cs(s),A.resolve()}getMatchingKeysForTargetId(r,s){const o=this.As.hs(s);return A.resolve(o)}containsKey(r,s){return A.resolve(this.As.containsKey(s))}}class ip{constructor(r,s){this.Ps={},this.Le=new it(0),this.Be=!1,this.Be=!0,this.referenceDelegate=r(this),this.ze=new sp(this),this.Ht=new qm,this.He=new np(this.Ht,o=>this.referenceDelegate.bs(o)),this.N=new Rh(s),this.Je=new ep(this.N)}start(){return Promise.resolve()}shutdown(){return this.Be=!1,Promise.resolve()}get started(){return this.Be}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(){return this.Ht}getMutationQueue(r){let s=this.Ps[r.toKey()];return s||(s=new tp(this.Ht,this.referenceDelegate),this.Ps[r.toKey()]=s),s}getTargetCache(){return this.ze}getRemoteDocumentCache(){return this.He}getBundleCache(){return this.Je}runTransaction(r,s,o){N("MemoryPersistence","Starting transaction:",r);const a=new op(this.Le.next());return this.referenceDelegate.vs(),o(a).next(c=>this.referenceDelegate.Vs(a).next(()=>c)).toPromise().then(c=>(a.raiseOnCommittedEvent(),c))}Ss(r,s){return A.or(Object.values(this.Ps).map(o=>()=>o.containsKey(r,s)))}}class op extends Lh{constructor(r){super(),this.currentSequenceNumber=r}}class Gc{constructor(r){this.persistence=r,this.Ds=new Hc,this.Cs=null}static Ns(r){return new Gc(r)}get xs(){if(this.Cs)return this.Cs;throw M()}addReference(r,s,o){return this.Ds.addReference(o,s),this.xs.delete(o.toString()),A.resolve()}removeReference(r,s,o){return this.Ds.removeReference(o,s),this.xs.add(o.toString()),A.resolve()}markPotentiallyOrphaned(r,s){return this.xs.add(s.toString()),A.resolve()}removeTarget(r,s){this.Ds.cs(s.targetId).forEach(a=>this.xs.add(a.toString()));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(r,s.targetId).next(a=>{a.forEach(c=>this.xs.add(c.toString()))}).next(()=>o.removeTargetData(r,s))}vs(){this.Cs=new Set}Vs(r){const s=this.persistence.getRemoteDocumentCache().newChangeBuffer();return A.forEach(this.xs,o=>{const a=O.fromPath(o);return this.ks(r,a).next(c=>{c||s.removeEntry(a)})}).next(()=>(this.Cs=null,s.apply(r)))}updateLimboDocument(r,s){return this.ks(r,s).next(o=>{o?this.xs.delete(s.toString()):this.xs.add(s.toString())})}bs(r){return 0}ks(r,s){return A.or([()=>A.resolve(this.Ds.containsKey(s)),()=>this.persistence.getTargetCache().containsKey(r,s),()=>this.persistence.Ss(r,s)])}}function cd(i,r){return`firestore_clients_${i}_${r}`}function ud(i,r,s){let o=`firestore_mutations_${i}_${s}`;return r.isAuthenticated()&&(o+=`_${r.uid}`),o}function $c(i,r){return`firestore_targets_${i}_${r}`}class ua{constructor(r,s,o,a){this.user=r,this.batchId=s,this.state=o,this.error=a}static $s(r,s,o){const a=JSON.parse(o);let c,l="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return l&&a.error&&(l="string"==typeof a.error.message&&"string"==typeof a.error.code,l&&(c=new S(a.error.code,a.error.message))),l?new ua(r,s,a.state,c):(ge("SharedClientState",`Failed to parse mutation state for ID '${s}': ${o}`),null)}Os(){const r={state:this.state,updateTimeMs:Date.now()};return this.error&&(r.error={code:this.error.code,message:this.error.message}),JSON.stringify(r)}}class Ni{constructor(r,s,o){this.targetId=r,this.state=s,this.error=o}static $s(r,s){const o=JSON.parse(s);let a,c="object"==typeof o&&-1!==["not-current","current","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return c&&o.error&&(c="string"==typeof o.error.message&&"string"==typeof o.error.code,c&&(a=new S(o.error.code,o.error.message))),c?new Ni(r,o.state,a):(ge("SharedClientState",`Failed to parse target state for ID '${r}': ${s}`),null)}Os(){const r={state:this.state,updateTimeMs:Date.now()};return this.error&&(r.error={code:this.error.code,message:this.error.message}),JSON.stringify(r)}}class la{constructor(r,s){this.clientId=r,this.activeTargetIds=s}static $s(r,s){const o=JSON.parse(s);let a="object"==typeof o&&o.activeTargetIds instanceof Array,c=ea();for(let l=0;a&&l<o.activeTargetIds.length;++l)a=Rl(o.activeTargetIds[l]),c=c.add(o.activeTargetIds[l]);return a?new la(r,c):(ge("SharedClientState",`Failed to parse client data for instance '${r}': ${s}`),null)}}class Qc{constructor(r,s){this.clientId=r,this.onlineState=s}static $s(r){const s=JSON.parse(r);return"object"==typeof s&&-1!==["Unknown","Online","Offline"].indexOf(s.onlineState)&&"string"==typeof s.clientId?new Qc(s.clientId,s.onlineState):(ge("SharedClientState",`Failed to parse online state: ${r}`),null)}}class Jc{constructor(){this.activeTargetIds=ea()}Fs(r){this.activeTargetIds=this.activeTargetIds.add(r)}Ms(r){this.activeTargetIds=this.activeTargetIds.delete(r)}Os(){const r={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(r)}}class Wc{constructor(r,s,o,a,c){this.window=r,this.Oe=s,this.persistenceKey=o,this.Ls=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Bs=this.Us.bind(this),this.qs=new Ee(H),this.started=!1,this.Ks=[];const l=o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=c,this.js=cd(this.persistenceKey,this.Ls),this.Qs=`firestore_sequence_number_${this.persistenceKey}`,this.qs=this.qs.insert(this.Ls,new Jc),this.Ws=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.Gs=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this.zs=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.Hs=`firestore_online_state_${this.persistenceKey}`,this.Js=function(f){return`firestore_bundle_loaded_${f}`}(this.persistenceKey),this.window.addEventListener("storage",this.Bs)}static Pt(r){return!(!r||!r.localStorage)}start(){var r=this;return(0,I.Z)(function*(){const s=yield r.syncEngine.pn();for(const a of s){if(a===r.Ls)continue;const c=r.getItem(cd(r.persistenceKey,a));if(c){const l=la.$s(a,c);l&&(r.qs=r.qs.insert(l.clientId,l))}}r.Ys();const o=r.storage.getItem(r.Hs);if(o){const a=r.Xs(o);a&&r.Zs(a)}for(const a of r.Ks)r.Us(a);r.Ks=[],r.window.addEventListener("pagehide",()=>r.shutdown()),r.started=!0})()}writeSequenceNumber(r){this.setItem(this.Qs,JSON.stringify(r))}getAllActiveQueryTargets(){return this.ti(this.qs)}isActiveQueryTarget(r){let s=!1;return this.qs.forEach((o,a)=>{a.activeTargetIds.has(r)&&(s=!0)}),s}addPendingMutation(r){this.ei(r,"pending")}updateMutationState(r,s,o){this.ei(r,s,o),this.ni(r)}addLocalQueryTarget(r){let s="not-current";if(this.isActiveQueryTarget(r)){const o=this.storage.getItem($c(this.persistenceKey,r));if(o){const a=Ni.$s(r,o);a&&(s=a.state)}}return this.si.Fs(r),this.Ys(),s}removeLocalQueryTarget(r){this.si.Ms(r),this.Ys()}isLocalQueryTarget(r){return this.si.activeTargetIds.has(r)}clearQueryState(r){this.removeItem($c(this.persistenceKey,r))}updateQueryState(r,s,o){this.ii(r,s,o)}handleUserChange(r,s,o){s.forEach(a=>{this.ni(a)}),this.currentUser=r,o.forEach(a=>{this.addPendingMutation(a)})}setOnlineState(r){this.ri(r)}notifyBundleLoaded(){this.oi()}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Bs),this.removeItem(this.js),this.started=!1)}getItem(r){const s=this.storage.getItem(r);return N("SharedClientState","READ",r,s),s}setItem(r,s){N("SharedClientState","SET",r,s),this.storage.setItem(r,s)}removeItem(r){N("SharedClientState","REMOVE",r),this.storage.removeItem(r)}Us(r){var s=this;const o=r;if(o.storageArea===this.storage){if(N("SharedClientState","EVENT",o.key,o.newValue),o.key===this.js)return void ge("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Oe.enqueueRetryable((0,I.Z)(function*(){if(s.started){if(null!==o.key)if(s.Ws.test(o.key)){if(null==o.newValue){const a=s.ai(o.key);return s.ci(a,null)}{const a=s.ui(o.key,o.newValue);if(a)return s.ci(a.clientId,a)}}else if(s.Gs.test(o.key)){if(null!==o.newValue){const a=s.hi(o.key,o.newValue);if(a)return s.li(a)}}else if(s.zs.test(o.key)){if(null!==o.newValue){const a=s.fi(o.key,o.newValue);if(a)return s.di(a)}}else if(o.key===s.Hs){if(null!==o.newValue){const a=s.Xs(o.newValue);if(a)return s.Zs(a)}}else if(o.key===s.Qs){const a=function(c){let l=it.T;if(null!=c)try{const f=JSON.parse(c);U("number"==typeof f),l=f}catch(f){ge("SharedClientState","Failed to read sequence number from WebStorage",f)}return l}(o.newValue);a!==it.T&&s.sequenceNumberHandler(a)}else if(o.key===s.Js)return s.syncEngine.wi()}else s.Ks.push(o)}))}}get si(){return this.qs.get(this.Ls)}Ys(){this.setItem(this.js,this.si.Os())}ei(r,s,o){const a=new ua(this.currentUser,r,s,o),c=ud(this.persistenceKey,this.currentUser,r);this.setItem(c,a.Os())}ni(r){const s=ud(this.persistenceKey,this.currentUser,r);this.removeItem(s)}ri(r){this.storage.setItem(this.Hs,JSON.stringify({clientId:this.Ls,onlineState:r}))}ii(r,s,o){const a=$c(this.persistenceKey,r),c=new Ni(r,s,o);this.setItem(a,c.Os())}oi(){this.setItem(this.Js,"value-not-used")}ai(r){const s=this.Ws.exec(r);return s?s[1]:null}ui(r,s){const o=this.ai(r);return la.$s(o,s)}hi(r,s){const o=this.Gs.exec(r),a=Number(o[1]);return ua.$s(new Re(void 0!==o[2]?o[2]:null),a,s)}fi(r,s){const o=this.zs.exec(r),a=Number(o[1]);return Ni.$s(a,s)}Xs(r){return Qc.$s(r)}li(r){var s=this;return(0,I.Z)(function*(){if(r.user.uid===s.currentUser.uid)return s.syncEngine._i(r.batchId,r.state,r.error);N("SharedClientState",`Ignoring mutation for non-active user ${r.user.uid}`)})()}di(r){return this.syncEngine.mi(r.targetId,r.state,r.error)}ci(r,s){const o=s?this.qs.insert(r,s):this.qs.remove(r),a=this.ti(this.qs),c=this.ti(o),l=[],f=[];return c.forEach(m=>{a.has(m)||l.push(m)}),a.forEach(m=>{c.has(m)||f.push(m)}),this.syncEngine.gi(l,f).then(()=>{this.qs=o})}Zs(r){this.qs.get(r.clientId)&&this.onlineStateHandler(r.onlineState)}ti(r){let s=ea();return r.forEach((o,a)=>{s=s.unionWith(a.activeTargetIds)}),s}}class ld{constructor(){this.yi=new Jc,this.pi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(r){}updateMutationState(r,s,o){}addLocalQueryTarget(r){return this.yi.Fs(r),this.pi[r]||"not-current"}updateQueryState(r,s,o){this.pi[r]=s}removeLocalQueryTarget(r){this.yi.Ms(r)}isLocalQueryTarget(r){return this.yi.activeTargetIds.has(r)}clearQueryState(r){delete this.pi[r]}getAllActiveQueryTargets(){return this.yi.activeTargetIds}isActiveQueryTarget(r){return this.yi.activeTargetIds.has(r)}start(){return this.yi=new Jc,Promise.resolve()}handleUserChange(r,s,o){}setOnlineState(r){}shutdown(){}writeSequenceNumber(r){}notifyBundleLoaded(){}}class ap{Ei(r){}shutdown(){}}class hd{constructor(){this.Ti=()=>this.Ii(),this.Ai=()=>this.Ri(),this.Pi=[],this.bi()}Ei(r){this.Pi.push(r)}shutdown(){window.removeEventListener("online",this.Ti),window.removeEventListener("offline",this.Ai)}bi(){window.addEventListener("online",this.Ti),window.addEventListener("offline",this.Ai)}Ii(){N("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const r of this.Pi)r(0)}Ri(){N("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const r of this.Pi)r(1)}static Pt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const cp={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class up{constructor(r){this.vi=r.vi,this.Vi=r.Vi}Si(r){this.Di=r}Ci(r){this.Ni=r}onMessage(r){this.xi=r}close(){this.Vi()}send(r){this.vi(r)}ki(){this.Di()}$i(r){this.Ni(r)}Oi(r){this.xi(r)}}class lp extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId,this.Fi=(r.ssl?"https":"http")+"://"+r.host,this.Mi="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Li(r,s,o,a){const c=this.Bi(r,s);N("RestConnection","Sending: ",c,o);const l={};return this.Ui(l,a),this.qi(r,c,l,o).then(f=>(N("RestConnection","Received: ",f),f),f=>{throw li("RestConnection",`${r} failed with error: `,f,"url: ",c,"request:",o),f})}Ki(r,s,o,a){return this.Li(r,s,o,a)}Ui(r,s){if(r["X-Goog-Api-Client"]="gl-js/ fire/"+Zr,r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),s)for(const o in s.authHeaders)s.authHeaders.hasOwnProperty(o)&&(r[o]=s.authHeaders[o])}Bi(r,s){return`${this.Fi}/v1/${s}:${cp[r]}`}}{constructor(r){super(r),this.forceLongPolling=r.forceLongPolling,this.autoDetectLongPolling=r.autoDetectLongPolling,this.useFetchStreams=r.useFetchStreams}qi(r,s,o,a){return new Promise((c,l)=>{const f=new Dl;f.listenOnce(Sl.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case Bo.NO_ERROR:const y=f.getResponseJson();N("Connection","XHR received:",JSON.stringify(y)),c(y);break;case Bo.TIMEOUT:N("Connection",'RPC "'+r+'" timed out'),l(new S(x.DEADLINE_EXCEEDED,"Request time out"));break;case Bo.HTTP_ERROR:const w=f.getStatus();if(N("Connection",'RPC "'+r+'" failed with status:',w,"response text:",f.getResponseText()),w>0){const b=f.getResponseJson().error;if(b&&b.status&&b.message){const _=function(E){const k=E.toLowerCase().replace(/_/g,"-");return Object.values(x).indexOf(k)>=0?k:x.UNKNOWN}(b.status);l(new S(_,b.message))}else l(new S(x.UNKNOWN,"Server responded with status "+f.getStatus()))}else l(new S(x.UNAVAILABLE,"Connection failed."));break;default:M()}}finally{N("Connection",'RPC "'+r+'" completed.')}});const m=JSON.stringify(a);f.send(s,"POST",m,o,15)})}ji(r,s){const o=[this.Fi,"/","google.firestore.v1.Firestore","/",r,"/channel"],a=new Zo,c=Ln(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(l.xmlHttpFactory=new Nl({})),this.Ui(l.initMessageHeaders,s),(0,K.uI)()||(0,K.b$)()||(0,K.d)()||(0,K.w1)()||(0,K.Mn)()||(0,K.ru)()||(l.httpHeadersOverwriteParam="$httpHeaders");const f=o.join("");N("Connection","Creating WebChannel: "+f,l);const m=a.createWebChannel(f,l);let y=!1,w=!1;const b=new up({vi:E=>{w?N("Connection","Not sending because WebChannel is closed:",E):(y||(N("Connection","Opening WebChannel transport."),m.open(),y=!0),N("Connection","WebChannel sending:",E),m.send(E))},Vi:()=>m.close()}),_=(E,k,L)=>{E.listen(k,Z=>{try{L(Z)}catch(ie){setTimeout(()=>{throw ie},0)}})};return _(m,ui.EventType.OPEN,()=>{w||N("Connection","WebChannel transport opened.")}),_(m,ui.EventType.CLOSE,()=>{w||(w=!0,N("Connection","WebChannel transport closed"),b.$i())}),_(m,ui.EventType.ERROR,E=>{w||(w=!0,li("Connection","WebChannel transport errored:",E),b.$i(new S(x.UNAVAILABLE,"The operation could not be completed")))}),_(m,ui.EventType.MESSAGE,E=>{var k;if(!w){const L=E.data[0];U(!!L);const Z=L,ie=Z.error||(null===(k=Z[0])||void 0===k?void 0:k.error);if(ie){N("Connection","WebChannel received error:",ie);const Ve=ie.status;let Pt=function(ji){const Aa=ve[ji];if(void 0!==Aa)return hh(Aa)}(Ve),wt=ie.message;void 0===Pt&&(Pt=x.INTERNAL,wt="Unknown error status: "+Ve+" with message "+ie.message),w=!0,b.$i(new S(Pt,wt)),m.close()}else N("Connection","WebChannel received:",L),b.Oi(L)}}),_(c,kl.STAT_EVENT,E=>{E.stat===hc_PROXY?N("Connection","Detected buffering proxy"):E.stat===hc_NOPROXY&&N("Connection","Detected no buffering proxy")}),setTimeout(()=>{b.ki()},0),b}}function dd(){return"undefined"!=typeof window?window:null}function ha(){return"undefined"!=typeof document?document:null}function Di(i){return new ym(i,!0)}class Yc{constructor(r,s,o=1e3,a=1.5,c=6e4){this.Oe=r,this.timerId=s,this.Qi=o,this.Wi=a,this.Gi=c,this.zi=0,this.Hi=null,this.Ji=Date.now(),this.reset()}reset(){this.zi=0}Yi(){this.zi=this.Gi}Xi(r){this.cancel();const s=Math.floor(this.zi+this.Zi()),o=Math.max(0,Date.now()-this.Ji),a=Math.max(0,s-o);a>0&&N("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.zi} ms, delay with jitter: ${s} ms, last attempt: ${o} ms ago)`),this.Hi=this.Oe.enqueueAfterDelay(this.timerId,a,()=>(this.Ji=Date.now(),r())),this.zi*=this.Wi,this.zi<this.Qi&&(this.zi=this.Qi),this.zi>this.Gi&&(this.zi=this.Gi)}tr(){null!==this.Hi&&(this.Hi.skipDelay(),this.Hi=null)}cancel(){null!==this.Hi&&(this.Hi.cancel(),this.Hi=null)}Zi(){return(Math.random()-.5)*this.zi}}class fd{constructor(r,s,o,a,c,l){this.Oe=r,this.er=o,this.nr=a,this.credentialsProvider=c,this.listener=l,this.state=0,this.sr=0,this.ir=null,this.stream=null,this.rr=new Yc(r,s)}ar(){return 1===this.state||2===this.state||4===this.state}cr(){return 2===this.state}start(){3!==this.state?this.auth():this.ur()}stop(){var r=this;return(0,I.Z)(function*(){r.ar()&&(yield r.close(0))})()}hr(){this.state=0,this.rr.reset()}lr(){this.cr()&&null===this.ir&&(this.ir=this.Oe.enqueueAfterDelay(this.er,6e4,()=>this.dr()))}wr(r){this._r(),this.stream.send(r)}dr(){var r=this;return(0,I.Z)(function*(){if(r.cr())return r.close(0)})()}_r(){this.ir&&(this.ir.cancel(),this.ir=null)}close(r,s){var o=this;return(0,I.Z)(function*(){o._r(),o.rr.cancel(),o.sr++,3!==r?o.rr.reset():s&&s.code===x.RESOURCE_EXHAUSTED?(ge(s.toString()),ge("Using maximum backoff delay to prevent overloading the backend."),o.rr.Yi()):s&&s.code===x.UNAUTHENTICATED&&o.credentialsProvider.invalidateToken(),null!==o.stream&&(o.mr(),o.stream.close(),o.stream=null),o.state=r,yield o.listener.Ci(s)})()}mr(){}auth(){this.state=1;const r=this.gr(this.sr),s=this.sr;this.credentialsProvider.getToken().then(o=>{this.sr===s&&this.yr(o)},o=>{r(()=>{const a=new S(x.UNKNOWN,"Fetching auth token failed: "+o.message);return this.pr(a)})})}yr(r){const s=this.gr(this.sr);this.stream=this.Er(r),this.stream.Si(()=>{s(()=>(this.state=2,this.listener.Si()))}),this.stream.Ci(o=>{s(()=>this.pr(o))}),this.stream.onMessage(o=>{s(()=>this.onMessage(o))})}ur(){var r=this;this.state=4,this.rr.Xi((0,I.Z)(function*(){r.state=0,r.start()}))}pr(r){return N("PersistentStream",`close with error: ${r}`),this.stream=null,this.close(3,r)}gr(r){return s=>{this.Oe.enqueueAndForget(()=>this.sr===r?s():(N("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class hp extends fd{constructor(r,s,o,a,c){super(r,"listen_stream_connection_backoff","listen_stream_idle",s,o,c),this.N=a}Er(r){return this.nr.ji("Listen",r)}onMessage(r){this.rr.reset();const s=function(i,r){let s;if("targetChange"in r){const o="NO_CHANGE"===(m=r.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===m?1:"REMOVE"===m?2:"CURRENT"===m?3:"RESET"===m?4:M(),a=r.targetChange.targetIds||[],c=function(m,y){return m.D?(U(void 0===y||"string"==typeof y),Me.fromBase64String(y||"")):(U(void 0===y||y instanceof Uint8Array),Me.fromUint8Array(y||new Uint8Array))}(i,r.targetChange.resumeToken),l=r.targetChange.cause,f=l&&function(m){const y=void 0===m.code?x.UNKNOWN:hh(m.code);return new S(y,m.message||"")}(l);s=new ph(o,a,c,f||null)}else if("documentChange"in r){const o=r.documentChange,a=St(i,o.document.name),c=Le(o.document.updateTime),l=new Ke({mapValue:{fields:o.document.fields}}),f=se.newFoundDocument(a,c,l);s=new ta(o.targetIds||[],o.removedTargetIds||[],f.key,f)}else if("documentDelete"in r){const o=r.documentDelete,a=St(i,o.document),c=o.readTime?Le(o.readTime):V.min(),l=se.newNoDocument(a,c);s=new ta([],o.removedTargetIds||[],l.key,l)}else if("documentRemove"in r){const o=r.documentRemove,a=St(i,o.document);s=new ta([],o.removedTargetIds||[],a,null)}else{if(!("filter"in r))return M();{const o=r.filter,c=new cm(o.count||0);s=new mh(o.targetId,c)}}var m;return s}(this.N,r),o=function(a){if(!("targetChange"in a))return V.min();const c=a.targetChange;return c.targetIds&&c.targetIds.length?V.min():c.readTime?Le(c.readTime):V.min()}(r);return this.listener.Tr(s,o)}Ir(r){const s={};s.database=Ci(this.N),s.addTarget=function(a,c){let l;const f=c.target;return l=Ho(f)?{documents:Ch(a,f)}:{query:Ah(a,f)},l.targetId=c.targetId,c.resumeToken.approximateByteSize()>0?l.resumeToken=vh(a,c.resumeToken):c.snapshotVersion.compareTo(V.min())>0&&(l.readTime=Ii(a,c.snapshotVersion.toTimestamp())),l}(this.N,r);const o=function(i,r){const s=function(o,a){switch(a){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return M()}}(0,r.purpose);return null==s?null:{"goog-listen-tags":s}}(0,r);o&&(s.labels=o),this.wr(s)}Ar(r){const s={};s.database=Ci(this.N),s.removeTarget=r,this.wr(s)}}class dp extends fd{constructor(r,s,o,a,c){super(r,"write_stream_connection_backoff","write_stream_idle",s,o,c),this.N=a,this.Rr=!1}get Pr(){return this.Rr}start(){this.Rr=!1,this.lastStreamToken=void 0,super.start()}mr(){this.Rr&&this.br([])}Er(r){return this.nr.ji("Write",r)}onMessage(r){if(U(!!r.streamToken),this.lastStreamToken=r.streamToken,this.Rr){this.rr.reset();const s=function(i,r){return i&&i.length>0?(U(void 0!==r),i.map(s=>function(o,a){let c=Le(o.updateTime?o.updateTime:a);return c.isEqual(V.min())&&(c=Le(a)),new im(c,o.transformResults||[])}(s,r))):[]}(r.writeResults,r.commitTime),o=Le(r.commitTime);return this.listener.vr(o,s)}return U(!r.writeResults||0===r.writeResults.length),this.Rr=!0,this.listener.Vr()}Sr(){const r={};r.database=Ci(this.N),this.wr(r)}br(r){const s={streamToken:this.lastStreamToken,writes:r.map(o=>na(this.N,o))};this.wr(s)}}class fp extends class{}{constructor(r,s,o){super(),this.credentials=r,this.nr=s,this.N=o,this.Dr=!1}Cr(){if(this.Dr)throw new S(x.FAILED_PRECONDITION,"The client has already been terminated.")}Li(r,s,o){return this.Cr(),this.credentials.getToken().then(a=>this.nr.Li(r,s,o,a)).catch(a=>{throw"FirebaseError"===a.name?(a.code===x.UNAUTHENTICATED&&this.credentials.invalidateToken(),a):new S(x.UNKNOWN,a.toString())})}Ki(r,s,o){return this.Cr(),this.credentials.getToken().then(a=>this.nr.Ki(r,s,o,a)).catch(a=>{throw"FirebaseError"===a.name?(a.code===x.UNAUTHENTICATED&&this.credentials.invalidateToken(),a):new S(x.UNKNOWN,a.toString())})}terminate(){this.Dr=!0}}class mp{constructor(r,s){this.asyncQueue=r,this.onlineStateHandler=s,this.state="Unknown",this.Nr=0,this.kr=null,this.$r=!0}Or(){0===this.Nr&&(this.Fr("Unknown"),this.kr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.kr=null,this.Mr("Backend didn't respond within 10 seconds."),this.Fr("Offline"),Promise.resolve())))}Lr(r){"Online"===this.state?this.Fr("Unknown"):(this.Nr++,this.Nr>=1&&(this.Br(),this.Mr(`Connection failed 1 times. Most recent error: ${r.toString()}`),this.Fr("Offline")))}set(r){this.Br(),this.Nr=0,"Online"===r&&(this.$r=!1),this.Fr(r)}Fr(r){r!==this.state&&(this.state=r,this.onlineStateHandler(r))}Mr(r){const s=`Could not reach Cloud Firestore backend. ${r}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.$r?(ge(s),this.$r=!1):N("OnlineStateTracker",s)}Br(){null!==this.kr&&(this.kr.cancel(),this.kr=null)}}class pp{constructor(r,s,o,a,c){var l=this;this.localStore=r,this.datastore=s,this.asyncQueue=o,this.remoteSyncer={},this.Ur=[],this.qr=new Map,this.Kr=new Set,this.jr=[],this.Qr=c,this.Qr.Ei(f=>{o.enqueueAndForget((0,I.Z)(function*(){var m;vn(l)&&(N("RemoteStore","Restarting streams for network reachability change."),yield(m=(0,I.Z)(function*(y){const w=D(y);w.Kr.add(4),yield cs(w),w.Wr.set("Unknown"),w.Kr.delete(4),yield Pi(w)}),function(y){return m.apply(this,arguments)})(l))}))}),this.Wr=new mp(o,a)}}function Pi(i){return Xc.apply(this,arguments)}function Xc(){return(Xc=(0,I.Z)(function*(i){if(vn(i))for(const r of i.jr)yield r(!0)})).apply(this,arguments)}function cs(i){return eu.apply(this,arguments)}function eu(){return(eu=(0,I.Z)(function*(i){for(const r of i.jr)yield r(!1)})).apply(this,arguments)}function da(i,r){const s=D(i);s.qr.has(r.targetId)||(s.qr.set(r.targetId,r),ru(s)?nu(s):ls(s).cr()&&tu(s,r))}function Oi(i,r){const s=D(i),o=ls(s);s.qr.delete(r),o.cr()&&md(s,r),0===s.qr.size&&(o.cr()?o.lr():vn(s)&&s.Wr.set("Unknown"))}function tu(i,r){i.Gr.Y(r.targetId),ls(i).Ir(r)}function md(i,r){i.Gr.Y(r),ls(i).Ar(r)}function nu(i){i.Gr=new mm({getRemoteKeysForTarget:r=>i.remoteSyncer.getRemoteKeysForTarget(r),Et:r=>i.qr.get(r)||null}),ls(i).start(),i.Wr.Or()}function ru(i){return vn(i)&&!ls(i).ar()&&i.qr.size>0}function vn(i){return 0===D(i).Kr.size}function pd(i){i.Gr=void 0}function gp(i){return su.apply(this,arguments)}function su(){return(su=(0,I.Z)(function*(i){i.qr.forEach((r,s)=>{tu(i,r)})})).apply(this,arguments)}function yp(i,r){return iu.apply(this,arguments)}function iu(){return(iu=(0,I.Z)(function*(i,r){pd(i),ru(i)?(i.Wr.Lr(r),nu(i)):i.Wr.set("Unknown")})).apply(this,arguments)}function wp(i,r,s){return ou.apply(this,arguments)}function ou(){return(ou=(0,I.Z)(function*(i,r,s){if(i.Wr.set("Online"),r instanceof ph&&2===r.state&&r.cause)try{yield(o=(0,I.Z)(function*(a,c){const l=c.cause;for(const f of c.targetIds)a.qr.has(f)&&(yield a.remoteSyncer.rejectListen(f,l),a.qr.delete(f),a.Gr.removeTarget(f))}),function(a,c){return o.apply(this,arguments)})(i,r)}catch(o){N("RemoteStore","Failed to remove targets %s: %s ",r.targetIds.join(","),o),yield fa(i,o)}else if(r instanceof ta?i.Gr.rt(r):r instanceof mh?i.Gr.ft(r):i.Gr.ct(r),!s.isEqual(V.min()))try{const o=yield sd(i.localStore);s.compareTo(o)>=0&&(yield function(a,c){const l=a.Gr._t(c);return l.targetChanges.forEach((f,m)=>{if(f.resumeToken.approximateByteSize()>0){const y=a.qr.get(m);y&&a.qr.set(m,y.withResumeToken(f.resumeToken,c))}}),l.targetMismatches.forEach(f=>{const m=a.qr.get(f);if(!m)return;a.qr.set(f,m.withResumeToken(Me.EMPTY_BYTE_STRING,m.snapshotVersion)),md(a,f);const y=new pn(m.target,f,1,m.sequenceNumber);tu(a,y)}),a.remoteSyncer.applyRemoteEvent(l)}(i,s))}catch(o){N("RemoteStore","Failed to raise snapshot:",o),yield fa(i,o)}var o})).apply(this,arguments)}function fa(i,r,s){return au.apply(this,arguments)}function au(){return(au=(0,I.Z)(function*(i,r,s){if(!or(r))throw r;i.Kr.add(1),yield cs(i),i.Wr.set("Offline"),s||(s=()=>sd(i.localStore)),i.asyncQueue.enqueueRetryable((0,I.Z)(function*(){N("RemoteStore","Retrying IndexedDB access"),yield s(),i.Kr.delete(1),yield Pi(i)}))})).apply(this,arguments)}function gd(i,r){return r().catch(s=>fa(i,s,r))}function us(i){return cu.apply(this,arguments)}function cu(){return(cu=(0,I.Z)(function*(i){const r=D(i),s=bn(r);let o=r.Ur.length>0?r.Ur[r.Ur.length-1].batchId:-1;for(;vp(r);)try{const a=yield Jm(r.localStore,o);if(null===a){0===r.Ur.length&&s.lr();break}o=a.batchId,bp(r,a)}catch(a){yield fa(r,a)}yd(r)&&wd(r)})).apply(this,arguments)}function vp(i){return vn(i)&&i.Ur.length<10}function bp(i,r){i.Ur.push(r);const s=bn(i);s.cr()&&s.Pr&&s.br(r.mutations)}function yd(i){return vn(i)&&!bn(i).ar()&&i.Ur.length>0}function wd(i){bn(i).start()}function _p(i){return uu.apply(this,arguments)}function uu(){return(uu=(0,I.Z)(function*(i){bn(i).Sr()})).apply(this,arguments)}function xp(i){return lu.apply(this,arguments)}function lu(){return(lu=(0,I.Z)(function*(i){const r=bn(i);for(const s of i.Ur)r.br(s.mutations)})).apply(this,arguments)}function Tp(i,r,s){return hu.apply(this,arguments)}function hu(){return(hu=(0,I.Z)(function*(i,r,s){const o=i.Ur.shift(),a=Nc.from(o,r,s);yield gd(i,()=>i.remoteSyncer.applySuccessfulWrite(a)),yield us(i)})).apply(this,arguments)}function Ip(i,r){return du.apply(this,arguments)}function du(){return(du=(0,I.Z)(function*(i,r){var s;r&&bn(i).Pr&&(yield(s=(0,I.Z)(function*(o,a){if(lh(c=a.code)&&c!==x.ABORTED){const l=o.Ur.shift();bn(o).hr(),yield gd(o,()=>o.remoteSyncer.rejectFailedWrite(l.batchId,a)),yield us(o)}var c}),function(o,a){return s.apply(this,arguments)})(i,r)),yd(i)&&wd(i)})).apply(this,arguments)}function fu(i,r){return mu.apply(this,arguments)}function mu(){return(mu=(0,I.Z)(function*(i,r){const s=D(i);r?(s.Kr.delete(2),yield Pi(s)):r||(s.Kr.add(2),yield cs(s),s.Wr.set("Unknown"))})).apply(this,arguments)}function ls(i){return i.zr||(i.zr=function(r,s,o){const a=D(r);return a.Cr(),new hp(s,a.nr,a.credentials,a.N,o)}(i.datastore,i.asyncQueue,{Si:gp.bind(null,i),Ci:yp.bind(null,i),Tr:wp.bind(null,i)}),i.jr.push(function(){var r=(0,I.Z)(function*(s){s?(i.zr.hr(),ru(i)?nu(i):i.Wr.set("Unknown")):(yield i.zr.stop(),pd(i))});return function(s){return r.apply(this,arguments)}}())),i.zr}function bn(i){return i.Hr||(i.Hr=function(r,s,o){const a=D(r);return a.Cr(),new dp(s,a.nr,a.credentials,a.N,o)}(i.datastore,i.asyncQueue,{Si:_p.bind(null,i),Ci:Ip.bind(null,i),Vr:xp.bind(null,i),vr:Tp.bind(null,i)}),i.jr.push(function(){var r=(0,I.Z)(function*(s){s?(i.Hr.hr(),yield us(i)):(yield i.Hr.stop(),i.Ur.length>0&&(N("RemoteStore",`Stopping write stream with ${i.Ur.length} pending writes`),i.Ur=[]))});return function(s){return r.apply(this,arguments)}}())),i.Hr}class pu{constructor(r,s,o,a,c){this.asyncQueue=r,this.timerId=s,this.targetTimeMs=o,this.op=a,this.removalCallback=c,this.deferred=new Pe,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(r,s,o,a,c){const l=Date.now()+o,f=new pu(r,s,l,a,c);return f.start(o),f}start(r){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),r)}skipDelay(){return this.handleDelayElapsed()}cancel(r){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new S(x.CANCELLED,"Operation cancelled"+(r?": "+r:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(r=>this.deferred.resolve(r))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function hs(i,r){if(ge("AsyncQueue",`${r}: ${i}`),or(i))return new S(x.UNAVAILABLE,`${r}: ${i}`);throw i}class ds{constructor(r){this.comparator=r?(s,o)=>r(s,o)||O.comparator(s.key,o.key):(s,o)=>O.comparator(s.key,o.key),this.keyedMap=Ec(),this.sortedSet=new Ee(this.comparator)}static emptySet(r){return new ds(r.comparator)}has(r){return null!=this.keyedMap.get(r)}get(r){return this.keyedMap.get(r)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(r){const s=this.keyedMap.get(r);return s?this.sortedSet.indexOf(s):-1}get size(){return this.sortedSet.size}forEach(r){this.sortedSet.inorderTraversal((s,o)=>(r(s),!1))}add(r){const s=this.delete(r.key);return s.copy(s.keyedMap.insert(r.key,r),s.sortedSet.insert(r,null))}delete(r){const s=this.get(r);return s?this.copy(this.keyedMap.remove(r),this.sortedSet.remove(s)):this}isEqual(r){if(!(r instanceof ds)||this.size!==r.size)return!1;const s=this.sortedSet.getIterator(),o=r.sortedSet.getIterator();for(;s.hasNext();){const a=s.getNext().key,c=o.getNext().key;if(!a.isEqual(c))return!1}return!0}toString(){const r=[];return this.forEach(s=>{r.push(s.toString())}),0===r.length?"DocumentSet ()":"DocumentSet (\n  "+r.join("  \n")+"\n)"}copy(r,s){const o=new ds;return o.comparator=this.comparator,o.keyedMap=r,o.sortedSet=s,o}}class vd{constructor(){this.Jr=new Ee(O.comparator)}track(r){const s=r.doc.key,o=this.Jr.get(s);o?0!==r.type&&3===o.type?this.Jr=this.Jr.insert(s,r):3===r.type&&1!==o.type?this.Jr=this.Jr.insert(s,{type:o.type,doc:r.doc}):2===r.type&&2===o.type?this.Jr=this.Jr.insert(s,{type:2,doc:r.doc}):2===r.type&&0===o.type?this.Jr=this.Jr.insert(s,{type:0,doc:r.doc}):1===r.type&&0===o.type?this.Jr=this.Jr.remove(s):1===r.type&&2===o.type?this.Jr=this.Jr.insert(s,{type:1,doc:o.doc}):0===r.type&&1===o.type?this.Jr=this.Jr.insert(s,{type:2,doc:r.doc}):M():this.Jr=this.Jr.insert(s,r)}Yr(){const r=[];return this.Jr.inorderTraversal((s,o)=>{r.push(o)}),r}}class fs{constructor(r,s,o,a,c,l,f,m){this.query=r,this.docs=s,this.oldDocs=o,this.docChanges=a,this.mutatedKeys=c,this.fromCache=l,this.syncStateChanged=f,this.excludesMetadataChanges=m}static fromInitialDocuments(r,s,o,a){const c=[];return s.forEach(l=>{c.push({type:0,doc:l})}),new fs(r,s,ds.emptySet(s),c,o,a,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(r){if(!(this.fromCache===r.fromCache&&this.syncStateChanged===r.syncStateChanged&&this.mutatedKeys.isEqual(r.mutatedKeys)&&yi(this.query,r.query)&&this.docs.isEqual(r.docs)&&this.oldDocs.isEqual(r.oldDocs)))return!1;const s=this.docChanges,o=r.docChanges;if(s.length!==o.length)return!1;for(let a=0;a<s.length;a++)if(s[a].type!==o[a].type||!s[a].doc.isEqual(o[a].doc))return!1;return!0}}class Ep{constructor(){this.Xr=void 0,this.listeners=[]}}class Cp{constructor(){this.queries=new is(r=>Ql(r),yi),this.onlineState="Unknown",this.Zr=new Set}}function gu(i,r){return yu.apply(this,arguments)}function yu(){return(yu=(0,I.Z)(function*(i,r){const s=D(i),o=r.query;let a=!1,c=s.queries.get(o);if(c||(a=!0,c=new Ep),a)try{c.Xr=yield s.onListen(o)}catch(l){const f=hs(l,`Initialization of query '${xc(r.query)}' failed`);return void r.onError(f)}s.queries.set(o,c),c.listeners.push(r),r.eo(s.onlineState),c.Xr&&r.no(c.Xr)&&bu(s)})).apply(this,arguments)}function wu(i,r){return vu.apply(this,arguments)}function vu(){return(vu=(0,I.Z)(function*(i,r){const s=D(i),o=r.query;let a=!1;const c=s.queries.get(o);if(c){const l=c.listeners.indexOf(r);l>=0&&(c.listeners.splice(l,1),a=0===c.listeners.length)}if(a)return s.queries.delete(o),s.onUnlisten(o)})).apply(this,arguments)}function Ap(i,r){const s=D(i);let o=!1;for(const a of r){const l=s.queries.get(a.query);if(l){for(const f of l.listeners)f.no(a)&&(o=!0);l.Xr=a}}o&&bu(s)}function Sp(i,r,s){const o=D(i),a=o.queries.get(r);if(a)for(const c of a.listeners)c.onError(s);o.queries.delete(r)}function bu(i){i.Zr.forEach(r=>{r.next()})}class _u{constructor(r,s,o){this.query=r,this.so=s,this.io=!1,this.ro=null,this.onlineState="Unknown",this.options=o||{}}no(r){if(!this.options.includeMetadataChanges){const o=[];for(const a of r.docChanges)3!==a.type&&o.push(a);r=new fs(r.query,r.docs,r.oldDocs,o,r.mutatedKeys,r.fromCache,r.syncStateChanged,!0)}let s=!1;return this.io?this.oo(r)&&(this.so.next(r),s=!0):this.ao(r,this.onlineState)&&(this.co(r),s=!0),this.ro=r,s}onError(r){this.so.error(r)}eo(r){this.onlineState=r;let s=!1;return this.ro&&!this.io&&this.ao(this.ro,r)&&(this.co(this.ro),s=!0),s}ao(r,s){return!r.fromCache||!(this.options.uo&&"Offline"!==s||r.docs.isEmpty()&&"Offline"!==s)}oo(r){return r.docChanges.length>0||!!(r.syncStateChanged||this.ro&&this.ro.hasPendingWrites!==r.hasPendingWrites)&&!0===this.options.includeMetadataChanges}co(r){r=fs.fromInitialDocuments(r.query,r.docs,r.mutatedKeys,r.fromCache),this.io=!0,this.so.next(r)}}class kp{constructor(r,s){this.payload=r,this.byteLength=s}ho(){return"metadata"in this.payload}}class bd{constructor(r){this.N=r}zn(r){return St(this.N,r)}Hn(r){return r.metadata.exists?Ih(this.N,r.document,!1):se.newNoDocument(this.zn(r.metadata.name),this.Jn(r.metadata.readTime))}Jn(r){return Le(r)}}class Np{constructor(r,s,o){this.lo=r,this.localStore=s,this.N=o,this.queries=[],this.documents=[],this.progress=_d(r)}fo(r){this.progress.bytesLoaded+=r.byteLength;let s=this.progress.documentsLoaded;return r.payload.namedQuery?this.queries.push(r.payload.namedQuery):r.payload.documentMetadata?(this.documents.push({metadata:r.payload.documentMetadata}),r.payload.documentMetadata.exists||++s):r.payload.document&&(this.documents[this.documents.length-1].document=r.payload.document,++s),s!==this.progress.documentsLoaded?(this.progress.documentsLoaded=s,Object.assign({},this.progress)):null}wo(r){const s=new Map,o=new bd(this.N);for(const a of r)if(a.metadata.queries){const c=o.zn(a.metadata.name);for(const l of a.metadata.queries){const f=(s.get(l)||Y()).add(c);s.set(l,f)}}return s}complete(){var r=this;return(0,I.Z)(function*(){const s=yield function(i,r,s,o){return zc.apply(this,arguments)}(r.localStore,new bd(r.N),r.documents,r.lo.id),o=r.wo(r.documents);for(const a of r.queries)yield Xm(r.localStore,a,o.get(a.name));return r.progress.taskState="Success",new Hm(Object.assign({},r.progress),s)})()}}function _d(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class xd{constructor(r){this.key=r}}class Td{constructor(r){this.key=r}}class Id{constructor(r,s){this.query=r,this._o=s,this.mo=null,this.current=!1,this.yo=Y(),this.mutatedKeys=Y(),this.po=Jl(r),this.Eo=new ds(this.po)}get To(){return this._o}Io(r,s){const o=s?s.Ao:new vd,a=s?s.Eo:this.Eo;let c=s?s.mutatedKeys:this.mutatedKeys,l=a,f=!1;const m=$o(this.query)&&a.size===this.query.limit?a.last():null,y=Qo(this.query)&&a.size===this.query.limit?a.first():null;if(r.inorderTraversal((w,b)=>{const _=a.get(w),E=wi(this.query,b)?b:null,k=!!_&&this.mutatedKeys.has(_.key),L=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let Z=!1;_&&E?_.data.isEqual(E.data)?k!==L&&(o.track({type:3,doc:E}),Z=!0):this.Ro(_,E)||(o.track({type:2,doc:E}),Z=!0,(m&&this.po(E,m)>0||y&&this.po(E,y)<0)&&(f=!0)):!_&&E?(o.track({type:0,doc:E}),Z=!0):_&&!E&&(o.track({type:1,doc:_}),Z=!0,(m||y)&&(f=!0)),Z&&(E?(l=l.add(E),c=L?c.add(w):c.delete(w)):(l=l.delete(w),c=c.delete(w)))}),$o(this.query)||Qo(this.query))for(;l.size>this.query.limit;){const w=$o(this.query)?l.last():l.first();l=l.delete(w.key),c=c.delete(w.key),o.track({type:1,doc:w})}return{Eo:l,Ao:o,Ln:f,mutatedKeys:c}}Ro(r,s){return r.hasLocalMutations&&s.hasCommittedMutations&&!s.hasLocalMutations}applyChanges(r,s,o){const a=this.Eo;this.Eo=r.Eo,this.mutatedKeys=r.mutatedKeys;const c=r.Ao.Yr();c.sort((y,w)=>function(b,_){const E=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return M()}};return E(b)-E(_)}(y.type,w.type)||this.po(y.doc,w.doc)),this.Po(o);const l=s?this.bo():[],f=0===this.yo.size&&this.current?1:0,m=f!==this.mo;return this.mo=f,0!==c.length||m?{snapshot:new fs(this.query,r.Eo,a,c,r.mutatedKeys,0===f,m,!1),vo:l}:{vo:l}}eo(r){return this.current&&"Offline"===r?(this.current=!1,this.applyChanges({Eo:this.Eo,Ao:new vd,mutatedKeys:this.mutatedKeys,Ln:!1},!1)):{vo:[]}}Vo(r){return!this._o.has(r)&&!!this.Eo.has(r)&&!this.Eo.get(r).hasLocalMutations}Po(r){r&&(r.addedDocuments.forEach(s=>this._o=this._o.add(s)),r.modifiedDocuments.forEach(s=>{}),r.removedDocuments.forEach(s=>this._o=this._o.delete(s)),this.current=r.current)}bo(){if(!this.current)return[];const r=this.yo;this.yo=Y(),this.Eo.forEach(o=>{this.Vo(o.key)&&(this.yo=this.yo.add(o.key))});const s=[];return r.forEach(o=>{this.yo.has(o)||s.push(new Td(o))}),this.yo.forEach(o=>{r.has(o)||s.push(new xd(o))}),s}So(r){this._o=r.Gn,this.yo=Y();const s=this.Io(r.documents);return this.applyChanges(s,!0)}Do(){return fs.fromInitialDocuments(this.query,this.Eo,this.mutatedKeys,0===this.mo)}}class Dp{constructor(r,s,o){this.query=r,this.targetId=s,this.view=o}}class Pp{constructor(r){this.key=r,this.Co=!1}}class Op{constructor(r,s,o,a,c,l){this.localStore=r,this.remoteStore=s,this.eventManager=o,this.sharedClientState=a,this.currentUser=c,this.maxConcurrentLimboResolutions=l,this.No={},this.xo=new is(f=>Ql(f),yi),this.ko=new Map,this.$o=new Set,this.Oo=new Ee(O.comparator),this.Fo=new Map,this.Mo=new Hc,this.Lo={},this.Bo=new Map,this.Uo=cr.ie(),this.onlineState="Unknown",this.qo=void 0}get isPrimaryClient(){return!0===this.qo}}function Mp(i,r){return xu.apply(this,arguments)}function xu(){return(xu=(0,I.Z)(function*(i,r){const s=Ku(i);let o,a;const c=s.xo.get(r);if(c)o=c.targetId,s.sharedClientState.addLocalQueryTarget(o),a=c.view.Do();else{const l=yield os(s.localStore,ut(r)),f=s.sharedClientState.addLocalQueryTarget(l.targetId);o=l.targetId,a=yield Tu(s,r,o,"current"===f),s.isPrimaryClient&&da(s.remoteStore,l)}return a})).apply(this,arguments)}function Tu(i,r,s,o){return Iu.apply(this,arguments)}function Iu(){return(Iu=(0,I.Z)(function*(i,r,s,o){i.Ko=(w,b,_)=>{return(E=(0,I.Z)(function*(k,L,Z,ie){let Ve=L.view.Io(Z);Ve.Ln&&(Ve=yield ca(k.localStore,L.query,!1).then(({documents:ji})=>L.view.Io(ji,Ve)));const Pt=ie&&ie.targetChanges.get(L.targetId),wt=L.view.applyChanges(Ve,k.isPrimaryClient,Pt);return Mu(k,L.targetId,wt.vo),wt.snapshot}),function(k,L,Z,ie){return E.apply(this,arguments)})(i,w,b,_);var E};const a=yield ca(i.localStore,r,!0),c=new Id(r,a.Gn),l=c.Io(a.documents),f=Ti.createSynthesizedTargetChangeForCurrentChange(s,o&&"Offline"!==i.onlineState),m=c.applyChanges(l,i.isPrimaryClient,f);Mu(i,s,m.vo);const y=new Dp(r,s,c);return i.xo.set(r,y),i.ko.has(s)?i.ko.get(s).push(r):i.ko.set(s,[r]),m.snapshot})).apply(this,arguments)}function Lp(i,r){return Eu.apply(this,arguments)}function Eu(){return(Eu=(0,I.Z)(function*(i,r){const s=D(i),o=s.xo.get(r),a=s.ko.get(o.targetId);if(a.length>1)return s.ko.set(o.targetId,a.filter(c=>!yi(c,r))),void s.xo.delete(r);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||(yield as(s.localStore,o.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(o.targetId),Oi(s.remoteStore,o.targetId),ms(s,o.targetId)}).catch(ur))):(ms(s,o.targetId),yield as(s.localStore,o.targetId,!0))})).apply(this,arguments)}function Cu(){return(Cu=(0,I.Z)(function*(i,r,s){const o=Hu(i);try{const a=yield function(c,l){const f=D(c),m=Oe.now(),y=l.reduce((b,_)=>b.add(_.key),Y());let w;return f.persistence.runTransaction("Locally write mutations","readwrite",b=>f.Qn.bn(b,y).next(_=>{w=_;const E=[];for(const k of l){const L=am(k,w.get(k.key));null!=L&&E.push(new fn(k.key,L,Vl(L.value.mapValue),we.exists(!0)))}return f.In.addMutationBatch(b,m,E,l)})).then(b=>(b.applyToLocalDocumentSet(w),{batchId:b.batchId,changes:w}))}(o.localStore,r);o.sharedClientState.addPendingMutation(a.batchId),function(c,l,f){let m=c.Lo[c.currentUser.toKey()];m||(m=new Ee(H)),m=m.insert(l,f),c.Lo[c.currentUser.toKey()]=m}(o,a.batchId,s),yield $t(o,a.changes),yield us(o.remoteStore)}catch(a){const c=hs(a,"Failed to persist write");s.reject(c)}})).apply(this,arguments)}function Ed(i,r){return Au.apply(this,arguments)}function Au(){return(Au=(0,I.Z)(function*(i,r){const s=D(i);try{const o=yield Qm(s.localStore,r);r.targetChanges.forEach((a,c)=>{const l=s.Fo.get(c);l&&(U(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?l.Co=!0:a.modifiedDocuments.size>0?U(l.Co):a.removedDocuments.size>0&&(U(l.Co),l.Co=!1))}),yield $t(s,o,r)}catch(o){yield ur(o)}})).apply(this,arguments)}function Cd(i,r,s){const o=D(i);if(o.isPrimaryClient&&0===s||!o.isPrimaryClient&&1===s){const a=[];o.xo.forEach((c,l)=>{const f=l.view.eo(r);f.snapshot&&a.push(f.snapshot)}),function(c,l){const f=D(c);f.onlineState=l;let m=!1;f.queries.forEach((y,w)=>{for(const b of w.listeners)b.eo(l)&&(m=!0)}),m&&bu(f)}(o.eventManager,r),a.length&&o.No.Tr(a),o.onlineState=r,o.isPrimaryClient&&o.sharedClientState.setOnlineState(r)}}function Fp(i,r,s){return Su.apply(this,arguments)}function Su(){return(Su=(0,I.Z)(function*(i,r,s){const o=D(i);o.sharedClientState.updateQueryState(r,"rejected",s);const a=o.Fo.get(r),c=a&&a.key;if(c){let l=new Ee(O.comparator);l=l.insert(c,se.newNoDocument(c,V.min()));const f=Y().add(c),m=new xi(V.min(),new Map,new le(H),l,f);yield Ed(o,m),o.Oo=o.Oo.remove(c),o.Fo.delete(r),Lu(o)}else yield as(o.localStore,r,!1).then(()=>ms(o,r,s)).catch(ur)})).apply(this,arguments)}function Rp(i,r){return ku.apply(this,arguments)}function ku(){return(ku=(0,I.Z)(function*(i,r){const s=D(i),o=r.batch.batchId;try{const a=yield $m(s.localStore,r);Ou(s,o,null),Pu(s,o),s.sharedClientState.updateMutationState(o,"acknowledged"),yield $t(s,a)}catch(a){yield ur(a)}})).apply(this,arguments)}function Up(i,r,s){return Nu.apply(this,arguments)}function Nu(){return(Nu=(0,I.Z)(function*(i,r,s){const o=D(i);try{const a=yield function(c,l){const f=D(c);return f.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let y;return f.In.lookupMutationBatch(m,l).next(w=>(U(null!==w),y=w.keys(),f.In.removeMutationBatch(m,w))).next(()=>f.In.performConsistencyCheck(m)).next(()=>f.Qn.bn(m,y))})}(o.localStore,r);Ou(o,r,s),Pu(o,r),o.sharedClientState.updateMutationState(r,"rejected",s),yield $t(o,a)}catch(a){yield ur(a)}})).apply(this,arguments)}function Du(){return(Du=(0,I.Z)(function*(i,r){const s=D(i);vn(s.remoteStore)||N("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const o=yield function(c){const l=D(c);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",f=>l.In.getHighestUnacknowledgedBatchId(f))}(s.localStore);if(-1===o)return void r.resolve();const a=s.Bo.get(o)||[];a.push(r),s.Bo.set(o,a)}catch(o){const a=hs(o,"Initialization of waitForPendingWrites() operation failed");r.reject(a)}})).apply(this,arguments)}function Pu(i,r){(i.Bo.get(r)||[]).forEach(s=>{s.resolve()}),i.Bo.delete(r)}function Ou(i,r,s){const o=D(i);let a=o.Lo[o.currentUser.toKey()];if(a){const c=a.get(r);c&&(s?c.reject(s):c.resolve(),a=a.remove(r)),o.Lo[o.currentUser.toKey()]=a}}function ms(i,r,s=null){i.sharedClientState.removeLocalQueryTarget(r);for(const o of i.ko.get(r))i.xo.delete(o),s&&i.No.jo(o,s);i.ko.delete(r),i.isPrimaryClient&&i.Mo.cs(r).forEach(o=>{i.Mo.containsKey(o)||Ad(i,o)})}function Ad(i,r){i.$o.delete(r.path.canonicalString());const s=i.Oo.get(r);null!==s&&(Oi(i.remoteStore,s),i.Oo=i.Oo.remove(r),i.Fo.delete(s),Lu(i))}function Mu(i,r,s){for(const o of s)o instanceof xd?(i.Mo.addReference(o.key,r),Bp(i,o)):o instanceof Td?(N("SyncEngine","Document no longer in limbo: "+o.key),i.Mo.removeReference(o.key,r),i.Mo.containsKey(o.key)||Ad(i,o.key)):M()}function Bp(i,r){const s=r.key,o=s.path.canonicalString();i.Oo.get(s)||i.$o.has(o)||(N("SyncEngine","New document in limbo: "+s),i.$o.add(o),Lu(i))}function Lu(i){for(;i.$o.size>0&&i.Oo.size<i.maxConcurrentLimboResolutions;){const r=i.$o.values().next().value;i.$o.delete(r);const s=new O(J.fromString(r)),o=i.Uo.next();i.Fo.set(o,new Pp(s)),i.Oo=i.Oo.insert(s,o),da(i.remoteStore,new pn(ut(Hr(s.path)),o,2,it.T))}}function $t(i,r,s){return qu.apply(this,arguments)}function qu(){return(qu=(0,I.Z)(function*(i,r,s){const o=D(i),a=[],c=[],l=[];var f;o.xo.isEmpty()||(o.xo.forEach((f,m)=>{l.push(o.Ko(m,r,s).then(y=>{if(y){o.isPrimaryClient&&o.sharedClientState.updateQueryState(m.targetId,y.fromCache?"not-current":"current"),a.push(y);const w=Zc.kn(m.targetId,y);c.push(w)}}))}),yield Promise.all(l),o.No.Tr(a),yield(f=(0,I.Z)(function*(m,y){const w=D(m);try{yield w.persistence.runTransaction("notifyLocalViewChanges","readwrite",b=>A.forEach(y,_=>A.forEach(_.Nn,E=>w.persistence.referenceDelegate.addReference(b,_.targetId,E)).next(()=>A.forEach(_.xn,E=>w.persistence.referenceDelegate.removeReference(b,_.targetId,E)))))}catch(b){if(!or(b))throw b;N("LocalStore","Failed to update sequence numbers: "+b)}for(const b of y){const _=b.targetId;if(!b.fromCache){const E=w.Un.get(_),L=E.withLastLimboFreeSnapshotVersion(E.snapshotVersion);w.Un=w.Un.insert(_,L)}}}),function(m,y){return f.apply(this,arguments)})(o.localStore,c))})).apply(this,arguments)}function Vp(i,r){return Fu.apply(this,arguments)}function Fu(){return(Fu=(0,I.Z)(function*(i,r){const s=D(i);if(!s.currentUser.isEqual(r)){N("SyncEngine","User change. New user:",r.toKey());const o=yield rd(s.localStore,r);s.currentUser=r,(a=s).Bo.forEach(l=>{l.forEach(f=>{f.reject(new S(x.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),a.Bo.clear(),s.sharedClientState.handleUserChange(r,o.removedBatchIds,o.addedBatchIds),yield $t(s,o.Wn)}var a})).apply(this,arguments)}function jp(i,r){const s=D(i),o=s.Fo.get(r);if(o&&o.Co)return Y().add(o.key);{let a=Y();const c=s.ko.get(r);if(!c)return a;for(const l of c){const f=s.xo.get(l);a=a.unionWith(f.view.To)}return a}}function zp(i,r){return Ru.apply(this,arguments)}function Ru(){return(Ru=(0,I.Z)(function*(i,r){const s=D(i),o=yield ca(s.localStore,r.query,!0),a=r.view.So(o);return s.isPrimaryClient&&Mu(s,r.targetId,a.vo),a})).apply(this,arguments)}function Kp(i){return Uu.apply(this,arguments)}function Uu(){return(Uu=(0,I.Z)(function*(i){const r=D(i);return ad(r.localStore).then(s=>$t(r,s))})).apply(this,arguments)}function Hp(i,r,s,o){return Zu.apply(this,arguments)}function Zu(){return(Zu=(0,I.Z)(function*(i,r,s,o){const a=D(i),c=yield function(l,f){const m=D(l),y=D(m.In);return m.persistence.runTransaction("Lookup mutation documents","readonly",w=>y.Xt(w,f).next(b=>b?m.Qn.bn(w,b):A.resolve(null)))}(a.localStore,r);var f;null!==c?("pending"===s?yield us(a.remoteStore):"acknowledged"===s||"rejected"===s?(Ou(a,r,o||null),Pu(a,r),f=r,D(D(a.localStore).In).te(f)):M(),yield $t(a,c)):N("SyncEngine","Cannot apply mutation batch with id: "+r)})).apply(this,arguments)}function Bu(){return(Bu=(0,I.Z)(function*(i,r){const s=D(i);if(Ku(s),Hu(s),!0===r&&!0!==s.qo){const o=s.sharedClientState.getAllActiveQueryTargets(),a=yield Sd(s,o.toArray());s.qo=!0,yield fu(s.remoteStore,!0);for(const c of a)da(s.remoteStore,c)}else if(!1===r&&!1!==s.qo){const o=[];let a=Promise.resolve();s.ko.forEach((c,l)=>{s.sharedClientState.isLocalQueryTarget(l)?o.push(l):a=a.then(()=>(ms(s,l),as(s.localStore,l,!0))),Oi(s.remoteStore,l)}),yield a,yield Sd(s,o),function(c){const l=D(c);l.Fo.forEach((f,m)=>{Oi(l.remoteStore,m)}),l.Mo.us(),l.Fo=new Map,l.Oo=new Ee(O.comparator)}(s),s.qo=!1,yield fu(s.remoteStore,!1)}})).apply(this,arguments)}function Sd(i,r,s){return Vu.apply(this,arguments)}function Vu(){return(Vu=(0,I.Z)(function*(i,r,s){const o=D(i),a=[],c=[];for(const l of r){let f;const m=o.ko.get(l);if(m&&0!==m.length){f=yield os(o.localStore,ut(m[0]));for(const y of m){const w=o.xo.get(y),b=yield zp(o,w);b.snapshot&&c.push(b.snapshot)}}else{const y=yield od(o.localStore,l);f=yield os(o.localStore,y),yield Tu(o,kd(y),l,!1)}a.push(f)}return o.No.Tr(c),a})).apply(this,arguments)}function kd(i){return Gl(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function $p(i){const r=D(i);return D(D(r.localStore).persistence).pn()}function Qp(i,r,s,o){return ju.apply(this,arguments)}function ju(){return(ju=(0,I.Z)(function*(i,r,s,o){const a=D(i);if(a.qo)N("SyncEngine","Ignoring unexpected query state notification.");else if(a.ko.has(r))switch(s){case"current":case"not-current":{const c=yield ad(a.localStore),l=xi.createSynthesizedRemoteEventForCurrentChange(r,"current"===s);yield $t(a,c,l);break}case"rejected":yield as(a.localStore,r,!0),ms(a,r,o);break;default:M()}})).apply(this,arguments)}function Jp(i,r,s){return zu.apply(this,arguments)}function zu(){return(zu=(0,I.Z)(function*(i,r,s){const o=Ku(i);if(o.qo){for(const a of r){if(o.ko.has(a)){N("SyncEngine","Adding an already active target "+a);continue}const c=yield od(o.localStore,a),l=yield os(o.localStore,c);yield Tu(o,kd(c),l.targetId,!1),da(o.remoteStore,l)}for(const a of s)o.ko.has(a)&&(yield as(o.localStore,a,!1).then(()=>{Oi(o.remoteStore,a),ms(o,a)}).catch(ur))}})).apply(this,arguments)}function Ku(i){const r=D(i);return r.remoteStore.remoteSyncer.applyRemoteEvent=Ed.bind(null,r),r.remoteStore.remoteSyncer.getRemoteKeysForTarget=jp.bind(null,r),r.remoteStore.remoteSyncer.rejectListen=Fp.bind(null,r),r.No.Tr=Ap.bind(null,r.eventManager),r.No.jo=Sp.bind(null,r.eventManager),r}function Hu(i){const r=D(i);return r.remoteStore.remoteSyncer.applySuccessfulWrite=Rp.bind(null,r),r.remoteStore.remoteSyncer.rejectFailedWrite=Up.bind(null,r),r}class Nd{constructor(){this.synchronizeTabs=!1}initialize(r){var s=this;return(0,I.Z)(function*(){s.N=Di(r.databaseInfo.databaseId),s.sharedClientState=s.Wo(r),s.persistence=s.Go(r),yield s.persistence.start(),s.gcScheduler=s.zo(r),s.localStore=s.Ho(r)})()}zo(r){return null}Ho(r){return nd(this.persistence,new td,r.initialUser,this.N)}Go(r){return new ip(Gc.Ns,this.N)}Wo(r){return new ld}terminate(){var r=this;return(0,I.Z)(function*(){r.gcScheduler&&r.gcScheduler.stop(),yield r.sharedClientState.shutdown(),yield r.persistence.shutdown()})()}}class Dd extends Nd{constructor(r,s,o){super(),this.Jo=r,this.cacheSizeBytes=s,this.forceOwnership=o,this.synchronizeTabs=!1}initialize(r){var s=()=>super.initialize,o=this;return(0,I.Z)(function*(){yield s().call(o,r),yield function(i){return jc.apply(this,arguments)}(o.localStore),yield o.Jo.initialize(o,r),yield Hu(o.Jo.syncEngine),yield us(o.Jo.remoteStore),yield o.persistence.nn(()=>(o.gcScheduler&&!o.gcScheduler.started&&o.gcScheduler.start(o.localStore),Promise.resolve()))})()}Ho(r){return nd(this.persistence,new td,r.initialUser,this.N)}zo(r){return new Zm(this.persistence.referenceDelegate.garbageCollector,r.asyncQueue)}Go(r){const s=Uc(r.databaseInfo.databaseId,r.databaseInfo.persistenceKey),o=void 0!==this.cacheSizeBytes?tt.withCacheSize(this.cacheSizeBytes):tt.DEFAULT;return new Rc(this.synchronizeTabs,s,r.clientId,o,r.asyncQueue,dd(),ha(),this.N,this.sharedClientState,!!this.forceOwnership)}Wo(r){return new ld}}class Yp extends Dd{constructor(r,s){super(r,s,!1),this.Jo=r,this.cacheSizeBytes=s,this.synchronizeTabs=!0}initialize(r){var s=()=>super.initialize,o=this;return(0,I.Z)(function*(){yield s().call(o,r);const a=o.Jo.syncEngine;o.sharedClientState instanceof Wc&&(o.sharedClientState.syncEngine={_i:Hp.bind(null,a),mi:Qp.bind(null,a),gi:Jp.bind(null,a),pn:$p.bind(null,a),wi:Kp.bind(null,a)},yield o.sharedClientState.start()),yield o.persistence.nn(function(){var c=(0,I.Z)(function*(l){yield function(i,r){return Bu.apply(this,arguments)}(o.Jo.syncEngine,l),o.gcScheduler&&(l&&!o.gcScheduler.started?o.gcScheduler.start(o.localStore):l||o.gcScheduler.stop())});return function(l){return c.apply(this,arguments)}}())})()}Wo(r){const s=dd();if(!Wc.Pt(s))throw new S(x.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const o=Uc(r.databaseInfo.databaseId,r.databaseInfo.persistenceKey);return new Wc(s,r.asyncQueue,o,r.clientId,r.initialUser)}}class Gu{initialize(r,s){var o=this;return(0,I.Z)(function*(){o.localStore||(o.localStore=r.localStore,o.sharedClientState=r.sharedClientState,o.datastore=o.createDatastore(s),o.remoteStore=o.createRemoteStore(s),o.eventManager=o.createEventManager(s),o.syncEngine=o.createSyncEngine(s,!r.synchronizeTabs),o.sharedClientState.onlineStateHandler=a=>Cd(o.syncEngine,a,1),o.remoteStore.remoteSyncer.handleCredentialChange=Vp.bind(null,o.syncEngine),yield fu(o.remoteStore,o.syncEngine.isPrimaryClient))})()}createEventManager(r){return new Cp}createDatastore(r){const s=Di(r.databaseInfo.databaseId),o=new lp(r.databaseInfo);return new fp(r.credentials,o,s)}createRemoteStore(r){return s=this.localStore,o=this.datastore,a=r.asyncQueue,c=f=>Cd(this.syncEngine,f,0),l=hd.Pt()?new hd:new ap,new pp(s,o,a,c,l);var s,o,a,c,l}createSyncEngine(r,s){return function(o,a,c,l,f,m,y){const w=new Op(o,a,c,l,f,m);return y&&(w.qo=!0),w}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,r.initialUser,r.maxConcurrentLimboResolutions,s)}terminate(){return(r=(0,I.Z)(function*(s){const o=D(s);N("RemoteStore","RemoteStore shutting down."),o.Kr.add(5),yield cs(o),o.Qr.shutdown(),o.Wr.set("Unknown")}),function(s){return r.apply(this,arguments)})(this.remoteStore);var r}}function Pd(i,r=10240){let s=0;return{read:()=>(0,I.Z)(function*(){if(s<i.byteLength){const o={value:i.slice(s,s+r),done:!1};return s+=r,o}return{done:!0}})(),cancel:()=>(0,I.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class ma{constructor(r){this.observer=r,this.muted=!1}next(r){this.observer.next&&this.Yo(this.observer.next,r)}error(r){this.observer.error?this.Yo(this.observer.error,r):console.error("Uncaught Error in snapshot listener:",r)}Xo(){this.muted=!0}Yo(r,s){this.muted||setTimeout(()=>{this.muted||r(s)},0)}}class Xp{constructor(r,s){this.Zo=r,this.N=s,this.metadata=new Pe,this.buffer=new Uint8Array,this.ta=new TextDecoder("utf-8"),this.ea().then(o=>{o&&o.ho()?this.metadata.resolve(o.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==o?void 0:o.payload)}`))},o=>this.metadata.reject(o))}close(){return this.Zo.cancel()}getMetadata(){var r=this;return(0,I.Z)(function*(){return r.metadata.promise})()}Qo(){var r=this;return(0,I.Z)(function*(){return yield r.getMetadata(),r.ea()})()}ea(){var r=this;return(0,I.Z)(function*(){const s=yield r.na();if(null===s)return null;const o=r.ta.decode(s),a=Number(o);isNaN(a)&&r.sa(`length string (${o}) is not valid number`);const c=yield r.ia(a);return new kp(JSON.parse(c),s.length+a)})()}ra(){return this.buffer.findIndex(r=>r==="{".charCodeAt(0))}na(){var r=this;return(0,I.Z)(function*(){for(;r.ra()<0&&!(yield r.oa()););if(0===r.buffer.length)return null;const s=r.ra();s<0&&r.sa("Reached the end of bundle when a length string is expected.");const o=r.buffer.slice(0,s);return r.buffer=r.buffer.slice(s),o})()}ia(r){var s=this;return(0,I.Z)(function*(){for(;s.buffer.length<r;)(yield s.oa())&&s.sa("Reached the end of bundle when more is expected.");const o=s.ta.decode(s.buffer.slice(0,r));return s.buffer=s.buffer.slice(r),o})()}sa(r){throw this.Zo.cancel(),new Error(`Invalid bundle format: ${r}`)}oa(){var r=this;return(0,I.Z)(function*(){const s=yield r.Zo.read();if(!s.done){const o=new Uint8Array(r.buffer.length+s.value.length);o.set(r.buffer),o.set(s.value,r.buffer.length),r.buffer=o}return s.done})()}}class eg{constructor(r){this.datastore=r,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(r){var s=this;return(0,I.Z)(function*(){if(s.ensureCommitNotCalled(),s.mutations.length>0)throw new S(x.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const o=yield(a=(0,I.Z)(function*(c,l){const f=D(c),m=Ci(f.N)+"/documents",y={documents:l.map(E=>Ei(f.N,E))},w=yield f.Ki("BatchGetDocuments",m,y),b=new Map;w.forEach(E=>{const k=function(i,r){return"found"in r?function(s,o){U(!!o.found);const a=St(s,o.found.name),c=Le(o.found.updateTime),l=new Ke({mapValue:{fields:o.found.fields}});return se.newFoundDocument(a,c,l)}(i,r):"missing"in r?function(s,o){U(!!o.missing),U(!!o.readTime);const a=St(s,o.missing),c=Le(o.readTime);return se.newNoDocument(a,c)}(i,r):M()}(f.N,E);b.set(k.key.toString(),k)});const _=[];return l.forEach(E=>{const k=b.get(E.toString());U(!!k),_.push(k)}),_}),function(c,l){return a.apply(this,arguments)})(s.datastore,r);var a;return o.forEach(a=>s.recordVersion(a)),o})()}set(r,s){this.write(s.toMutation(r,this.precondition(r))),this.writtenDocs.add(r.toString())}update(r,s){try{this.write(s.toMutation(r,this.preconditionForUpdate(r)))}catch(o){this.lastWriteError=o}this.writtenDocs.add(r.toString())}delete(r){this.write(new _i(r,this.precondition(r))),this.writtenDocs.add(r.toString())}commit(){var r=this;return(0,I.Z)(function*(){if(r.ensureCommitNotCalled(),r.lastWriteError)throw r.lastWriteError;const s=r.readVersions;var o;r.mutations.forEach(o=>{s.delete(o.key.toString())}),s.forEach((o,a)=>{const c=O.fromPath(a);r.mutations.push(new Ic(c,r.precondition(c)))}),yield(o=(0,I.Z)(function*(a,c){const l=D(a),f=Ci(l.N)+"/documents",m={writes:c.map(y=>na(l.N,y))};yield l.Li("Commit",f,m)}),function(a,c){return o.apply(this,arguments)})(r.datastore,r.mutations),r.committed=!0})()}recordVersion(r){let s;if(r.isFoundDocument())s=r.version;else{if(!r.isNoDocument())throw M();s=V.min()}const o=this.readVersions.get(r.key.toString());if(o){if(!s.isEqual(o))throw new S(x.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(r.key.toString(),s)}precondition(r){const s=this.readVersions.get(r.toString());return!this.writtenDocs.has(r.toString())&&s?we.updateTime(s):we.none()}preconditionForUpdate(r){const s=this.readVersions.get(r.toString());if(!this.writtenDocs.has(r.toString())&&s){if(s.isEqual(V.min()))throw new S(x.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return we.updateTime(s)}return we.exists(!0)}write(r){this.ensureCommitNotCalled(),this.mutations.push(r)}ensureCommitNotCalled(){}}class tg{constructor(r,s,o,a){this.asyncQueue=r,this.datastore=s,this.updateFunction=o,this.deferred=a,this.aa=5,this.rr=new Yc(this.asyncQueue,"transaction_retry")}run(){this.aa-=1,this.ca()}ca(){var r=this;this.rr.Xi((0,I.Z)(function*(){const s=new eg(r.datastore),o=r.ua(s);o&&o.then(a=>{r.asyncQueue.enqueueAndForget(()=>s.commit().then(()=>{r.deferred.resolve(a)}).catch(c=>{r.ha(c)}))}).catch(a=>{r.ha(a)})}))}ua(r){try{const s=this.updateFunction(r);return!tr(s)&&s.catch&&s.then?s:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(s){return this.deferred.reject(s),null}}ha(r){this.aa>0&&this.la(r)?(this.aa-=1,this.asyncQueue.enqueueAndForget(()=>(this.ca(),Promise.resolve()))):this.deferred.reject(r)}la(r){if("FirebaseError"===r.name){const s=r.code;return"aborted"===s||"failed-precondition"===s||!lh(s)}return!1}}class ng{constructor(r,s,o){var a=this;this.credentials=r,this.asyncQueue=s,this.databaseInfo=o,this.user=Re.UNAUTHENTICATED,this.clientId=Ol.I(),this.credentialListener=()=>Promise.resolve(),this.credentials.start(s,function(){var c=(0,I.Z)(function*(l){N("FirestoreClient","Received user=",l.uid),yield a.credentialListener(l),a.user=l});return function(l){return c.apply(this,arguments)}}())}getConfiguration(){var r=this;return(0,I.Z)(function*(){return{asyncQueue:r.asyncQueue,databaseInfo:r.databaseInfo,clientId:r.clientId,credentials:r.credentials,initialUser:r.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(r){this.credentialListener=r}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new S(x.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var r=this;this.asyncQueue.enterRestrictedMode();const s=new Pe;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,I.Z)(function*(){try{r.onlineComponents&&(yield r.onlineComponents.terminate()),r.offlineComponents&&(yield r.offlineComponents.terminate()),r.credentials.shutdown(),s.resolve()}catch(o){const a=hs(o,"Failed to shutdown persistence");s.reject(a)}})),s.promise}}function Od(i,r){return $u.apply(this,arguments)}function $u(){return($u=(0,I.Z)(function*(i,r){i.asyncQueue.verifyOperationInProgress(),N("FirestoreClient","Initializing OfflineComponentProvider");const s=yield i.getConfiguration();yield r.initialize(s);let o=s.initialUser;i.setCredentialChangeListener(function(){var a=(0,I.Z)(function*(c){o.isEqual(c)||(yield rd(r.localStore,c),o=c)});return function(c){return a.apply(this,arguments)}}()),r.persistence.setDatabaseDeletedListener(()=>i.terminate()),i.offlineComponents=r})).apply(this,arguments)}function Md(i,r){return Qu.apply(this,arguments)}function Qu(){return(Qu=(0,I.Z)(function*(i,r){i.asyncQueue.verifyOperationInProgress();const s=yield Ju(i);N("FirestoreClient","Initializing OnlineComponentProvider");const o=yield i.getConfiguration();yield r.initialize(s,o),i.setCredentialChangeListener(a=>{return(c=(0,I.Z)(function*(l,f){const m=D(l);m.asyncQueue.verifyOperationInProgress(),N("RemoteStore","RemoteStore received new credentials");const y=vn(m);m.Kr.add(3),yield cs(m),y&&m.Wr.set("Unknown"),yield m.remoteSyncer.handleCredentialChange(f),m.Kr.delete(3),yield Pi(m)}),function(l,f){return c.apply(this,arguments)})(r.remoteStore,a);var c}),i.onlineComponents=r})).apply(this,arguments)}function Ju(i){return Wu.apply(this,arguments)}function Wu(){return(Wu=(0,I.Z)(function*(i){return i.offlineComponents||(N("FirestoreClient","Using default OfflineComponentProvider"),yield Od(i,new Nd)),i.offlineComponents})).apply(this,arguments)}function pa(i){return Yu.apply(this,arguments)}function Yu(){return(Yu=(0,I.Z)(function*(i){return i.onlineComponents||(N("FirestoreClient","Using default OnlineComponentProvider"),yield Md(i,new Gu)),i.onlineComponents})).apply(this,arguments)}function Ld(i){return Ju(i).then(r=>r.persistence)}function Xu(i){return Ju(i).then(r=>r.localStore)}function qd(i){return pa(i).then(r=>r.remoteStore)}function el(i){return pa(i).then(r=>r.syncEngine)}function ps(i){return tl.apply(this,arguments)}function tl(){return(tl=(0,I.Z)(function*(i){const r=yield pa(i),s=r.eventManager;return s.onListen=Mp.bind(null,r.syncEngine),s.onUnlisten=Lp.bind(null,r.syncEngine),s})).apply(this,arguments)}function Fd(i,r,s={}){const o=new Pe;return i.asyncQueue.enqueueAndForget((0,I.Z)(function*(){return function(a,c,l,f,m){const y=new ma({next:b=>{c.enqueueAndForget(()=>wu(a,w));const _=b.docs.has(l);!_&&b.fromCache?m.reject(new S(x.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&b.fromCache&&f&&"server"===f.source?m.reject(new S(x.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(b)},error:b=>m.reject(b)}),w=new _u(Hr(l.path),y,{includeMetadataChanges:!0,uo:!0});return gu(a,w)}(yield ps(i),i.asyncQueue,r,s,o)})),o.promise}function Rd(i,r,s={}){const o=new Pe;return i.asyncQueue.enqueueAndForget((0,I.Z)(function*(){return function(a,c,l,f,m){const y=new ma({next:b=>{c.enqueueAndForget(()=>wu(a,w)),b.fromCache&&"server"===f.source?m.reject(new S(x.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(b)},error:b=>m.reject(b)}),w=new _u(l,y,{includeMetadataChanges:!0,uo:!0});return gu(a,w)}(yield ps(i),i.asyncQueue,r,s,o)})),o.promise}class hg{constructor(r,s,o,a,c,l,f,m){this.databaseId=r,this.appId=s,this.persistenceKey=o,this.host=a,this.ssl=c,this.forceLongPolling=l,this.autoDetectLongPolling=f,this.useFetchStreams=m}}class gs{constructor(r,s){this.projectId=r,this.database=s||"(default)"}get isDefaultDatabase(){return"(default)"===this.database}isEqual(r){return r instanceof gs&&r.projectId===this.projectId&&r.database===this.database}}const Ud=new Map;function nl(i,r,s){if(!s)throw new S(x.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${r}.`)}function Zd(i,r,s,o){if(!0===r&&!0===o)throw new S(x.INVALID_ARGUMENT,`${i} and ${s} cannot be used together.`)}function Bd(i){if(!O.isDocumentKey(i))throw new S(x.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function Vd(i){if(O.isDocumentKey(i))throw new S(x.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function ga(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const r=function(s){if(s.constructor){const o=/function\s+([^\s(]+)\s*\(/.exec(s.constructor.toString());if(o&&o.length>1)return o[1]}return null}(i);return r?`a custom ${r} object`:"an object"}}return"function"==typeof i?"a function":M()}function Q(i,r){if("_delegate"in i&&(i=i._delegate),!(i instanceof r)){if(r.name===i.constructor.name)throw new S(x.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const s=ga(i);throw new S(x.INVALID_ARGUMENT,`Expected type '${r.name}', but it was: ${s}`)}}return i}function jd(i,r){if(r<=0)throw new S(x.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${r}.`)}class zd{constructor(r){var s;if(void 0===r.host){if(void 0!==r.ssl)throw new S(x.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=r.host,this.ssl=null===(s=r.ssl)||void 0===s||s;if(this.credentials=r.credentials,this.ignoreUndefinedProperties=!!r.ignoreUndefinedProperties,void 0===r.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==r.cacheSizeBytes&&r.cacheSizeBytes<1048576)throw new S(x.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=r.cacheSizeBytes}this.experimentalForceLongPolling=!!r.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!r.experimentalAutoDetectLongPolling,this.useFetchStreams=!!r.useFetchStreams,Zd("experimentalForceLongPolling",r.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",r.experimentalAutoDetectLongPolling)}isEqual(r){return this.host===r.host&&this.ssl===r.ssl&&this.credentials===r.credentials&&this.cacheSizeBytes===r.cacheSizeBytes&&this.experimentalForceLongPolling===r.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===r.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===r.ignoreUndefinedProperties&&this.useFetchStreams===r.useFetchStreams}}class Mi{constructor(r,s){this._credentials=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new zd({}),this._settingsFrozen=!1,r instanceof gs?this._databaseId=r:(this._app=r,this._databaseId=function(o){if(!Object.prototype.hasOwnProperty.apply(o.options,["projectId"]))throw new S(x.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new gs(o.options.projectId)}(r))}get app(){if(!this._app)throw new S(x.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(r){if(this._settingsFrozen)throw new S(x.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new zd(r),void 0!==r.credentials&&(this._credentials=function(s){if(!s)return new Lf;switch(s.type){case"gapi":const o=s.client;return U(!("object"!=typeof o||null===o||!o.auth||!o.auth.getAuthHeaderValueForFirstParty)),new Uf(o,s.sessionIndex||"0",s.iamToken||null);case"provider":return s.client;default:throw new S(x.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(r.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const s=Ud.get(r);s&&(N("ComponentProvider","Removing Datastore"),Ud.delete(r),s.terminate())}(this),Promise.resolve()}}class re{constructor(r,s,o){this.converter=s,this._key=o,this.type="document",this.firestore=r}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Nt(this.firestore,this.converter,this._key.path.popLast())}withConverter(r){return new re(this.firestore,r,this._key)}}class Ge{constructor(r,s,o){this.converter=s,this._query=o,this.type="query",this.firestore=r}withConverter(r){return new Ge(this.firestore,r,this._query)}}class Nt extends Ge{constructor(r,s,o){super(r,s,Hr(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const r=this._path.popLast();return r.isEmpty()?null:new re(this.firestore,null,new O(r))}withConverter(r){return new Nt(this.firestore,r,this._path)}}function Kd(i,r,...s){if(i=(0,K.m9)(i),nl("collection","path",r),i instanceof Mi){const o=J.fromString(r,...s);return Vd(o),new Nt(i,null,o)}{if(!(i instanceof re||i instanceof Nt))throw new S(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=J.fromString(i.path,...s).child(J.fromString(r));return Vd(o),new Nt(i.firestore,null,o)}}function ya(i,r,...s){if(i=(0,K.m9)(i),1===arguments.length&&(r=Ol.I()),nl("doc","path",r),i instanceof Mi){const o=J.fromString(r,...s);return Bd(o),new re(i,null,new O(o))}{if(!(i instanceof re||i instanceof Nt))throw new S(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(J.fromString(r,...s));return Bd(o),new re(i.firestore,i instanceof Nt?i.converter:null,new O(o))}}function Hd(i,r){return i=(0,K.m9)(i),r=(0,K.m9)(r),(i instanceof re||i instanceof Nt)&&(r instanceof re||r instanceof Nt)&&i.firestore===r.firestore&&i.path===r.path&&i.converter===r.converter}function Gd(i,r){return i=(0,K.m9)(i),r=(0,K.m9)(r),i instanceof Ge&&r instanceof Ge&&i.firestore===r.firestore&&yi(i._query,r._query)&&i.converter===r.converter}class mg{constructor(){this.fa=Promise.resolve(),this.da=[],this.wa=!1,this._a=[],this.ma=null,this.ga=!1,this.ya=!1,this.pa=[],this.rr=new Yc(this,"async_queue_retry"),this.Ea=()=>{const s=ha();s&&N("AsyncQueue","Visibility state changed to "+s.visibilityState),this.rr.tr()};const r=ha();r&&"function"==typeof r.addEventListener&&r.addEventListener("visibilitychange",this.Ea)}get isShuttingDown(){return this.wa}enqueueAndForget(r){this.enqueue(r)}enqueueAndForgetEvenWhileRestricted(r){this.Ta(),this.Ia(r)}enterRestrictedMode(r){if(!this.wa){this.wa=!0,this.ya=r||!1;const s=ha();s&&"function"==typeof s.removeEventListener&&s.removeEventListener("visibilitychange",this.Ea)}}enqueue(r){if(this.Ta(),this.wa)return new Promise(()=>{});const s=new Pe;return this.Ia(()=>this.wa&&this.ya?Promise.resolve():(r().then(s.resolve,s.reject),s.promise)).then(()=>s.promise)}enqueueRetryable(r){this.enqueueAndForget(()=>(this.da.push(r),this.Aa()))}Aa(){var r=this;return(0,I.Z)(function*(){if(0!==r.da.length){try{yield r.da[0](),r.da.shift(),r.rr.reset()}catch(s){if(!or(s))throw s;N("AsyncQueue","Operation failed with retryable error: "+s)}r.da.length>0&&r.rr.Xi(()=>r.Aa())}})()}Ia(r){const s=this.fa.then(()=>(this.ga=!0,r().catch(o=>{throw this.ma=o,this.ga=!1,ge("INTERNAL UNHANDLED ERROR: ",function(a){let c=a.message||"";return a.stack&&(c=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),c}(o)),o}).then(o=>(this.ga=!1,o))));return this.fa=s,s}enqueueAfterDelay(r,s,o){this.Ta(),this.pa.indexOf(r)>-1&&(s=0);const a=pu.createAndSchedule(this,r,s,o,c=>this.Ra(c));return this._a.push(a),a}Ta(){this.ma&&M()}verifyOperationInProgress(){}Pa(){var r=this;return(0,I.Z)(function*(){let s;do{s=r.fa,yield s}while(s!==r.fa)})()}ba(r){for(const s of this._a)if(s.timerId===r)return!0;return!1}va(r){return this.Pa().then(()=>{this._a.sort((s,o)=>s.targetTimeMs-o.targetTimeMs);for(const s of this._a)if(s.skipDelay(),"all"!==r&&s.timerId===r)break;return this.Pa()})}Va(r){this.pa.push(r)}Ra(r){const s=this._a.indexOf(r);this._a.splice(s,1)}}function rl(i){return function(r,s){if("object"!=typeof r||null===r)return!1;const o=r;for(const a of["next","error","complete"])if(a in o&&"function"==typeof o[a])return!0;return!1}(i)}class pg{constructor(){this._progressObserver={},this._taskCompletionResolver=new Pe,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(r,s,o){this._progressObserver={next:r,error:s,complete:o}}catch(r){return this._taskCompletionResolver.promise.catch(r)}then(r,s){return this._taskCompletionResolver.promise.then(r,s)}_completeWith(r){this._updateProgress(r),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(r)}_failWith(r){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(r),this._taskCompletionResolver.reject(r)}_updateProgress(r){this._lastProgress=r,this._progressObserver.next&&this._progressObserver.next(r)}}class de extends Mi{constructor(r,s){super(r,s),this.type="firestore",this._queue=new mg,this._persistenceKey="name"in r?r.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||$d(this),this._firestoreClient.terminate()}}function Ce(i){return i._firestoreClient||$d(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function $d(i){var r;const s=i._freezeSettings(),o=(c=(null===(r=i._app)||void 0===r?void 0:r.options.appId)||"",new hg(i._databaseId,c,i._persistenceKey,(f=s).host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,f.useFetchStreams));var c,f;i._firestoreClient=new ng(i._credentials,i._queue,o)}function Qd(i,r,s){const o=new Pe;return i.asyncQueue.enqueue((0,I.Z)(function*(){try{yield Od(i,s),yield Md(i,r),o.resolve()}catch(a){if(!("FirebaseError"===(c=a).name?c.code===x.FAILED_PRECONDITION||c.code===x.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&c instanceof DOMException)||22===c.code||20===c.code||11===c.code))throw a;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+a),o.reject(a)}var c})).then(()=>o.promise)}function Jd(i){if(i._initialized||i._terminated)throw new S(x.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Qt{constructor(...r){for(let s=0;s<r.length;++s)if(0===r[s].length)throw new S(x.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ue(r)}isEqual(r){return this._internalPath.isEqual(r._internalPath)}}class Dt{constructor(r){this._byteString=r}static fromBase64String(r){try{return new Dt(Me.fromBase64String(r))}catch(s){throw new S(x.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+s)}}static fromUint8Array(r){return new Dt(Me.fromUint8Array(r))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(r){return this._byteString.isEqual(r._byteString)}}class lr{constructor(r){this._methodName=r}}class wa{constructor(r,s){if(!isFinite(r)||r<-90||r>90)throw new S(x.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+r);if(!isFinite(s)||s<-180||s>180)throw new S(x.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+s);this._lat=r,this._long=s}get latitude(){return this._lat}get longitude(){return this._long}isEqual(r){return this._lat===r._lat&&this._long===r._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(r){return H(this._lat,r._lat)||H(this._long,r._long)}}const Eg=/^__.*__$/;class Cg{constructor(r,s,o){this.data=r,this.fieldMask=s,this.fieldTransforms=o}toMutation(r,s){return null!==this.fieldMask?new fn(r,this.data,this.fieldMask,s,this.fieldTransforms):new bi(r,this.data,s,this.fieldTransforms)}}class Wd{constructor(r,s,o){this.data=r,this.fieldMask=s,this.fieldTransforms=o}toMutation(r,s){return new fn(r,this.data,this.fieldMask,s,this.fieldTransforms)}}function Yd(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw M()}}class va{constructor(r,s,o,a,c,l){this.settings=r,this.databaseId=s,this.N=o,this.ignoreUndefinedProperties=a,void 0===c&&this.Sa(),this.fieldTransforms=c||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Da(){return this.settings.Da}Ca(r){return new va(Object.assign(Object.assign({},this.settings),r),this.databaseId,this.N,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Na(r){var s;const o=null===(s=this.path)||void 0===s?void 0:s.child(r),a=this.Ca({path:o,xa:!1});return a.ka(r),a}$a(r){var s;const o=null===(s=this.path)||void 0===s?void 0:s.child(r),a=this.Ca({path:o,xa:!1});return a.Sa(),a}Oa(r){return this.Ca({path:void 0,xa:!0})}Fa(r){return _a(r,this.settings.methodName,this.settings.Ma||!1,this.path,this.settings.La)}contains(r){return void 0!==this.fieldMask.find(s=>r.isPrefixOf(s))||void 0!==this.fieldTransforms.find(s=>r.isPrefixOf(s.field))}Sa(){if(this.path)for(let r=0;r<this.path.length;r++)this.ka(this.path.get(r))}ka(r){if(0===r.length)throw this.Fa("Document fields must not be empty");if(Yd(this.Da)&&Eg.test(r))throw this.Fa('Document fields cannot begin and end with "__"')}}class Ag{constructor(r,s,o){this.databaseId=r,this.ignoreUndefinedProperties=s,this.N=o||Di(r)}Ba(r,s,o,a=!1){return new va({Da:r,methodName:s,La:o,path:Ue.emptyPath(),xa:!1,Ma:a},this.databaseId,this.N,this.ignoreUndefinedProperties)}}function hr(i){const r=i._freezeSettings(),s=Di(i._databaseId);return new Ag(i._databaseId,!!r.ignoreUndefinedProperties,s)}function ba(i,r,s,o,a,c={}){const l=i.Ba(c.merge||c.mergeFields?2:0,r,s,a);al("Data must be an object, but it was:",l,o);const f=tf(o,l);let m,y;if(c.merge)m=new Vr(l.fieldMask),y=l.fieldTransforms;else if(c.mergeFields){const w=[];for(const b of c.mergeFields){const _=cl(r,b,s);if(!l.contains(_))throw new S(x.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);rf(w,_)||w.push(_)}m=new Vr(w),y=l.fieldTransforms.filter(b=>m.covers(b.field))}else m=null,y=l.fieldTransforms;return new Cg(new Ke(f),m,y)}class Li extends lr{_toFieldTransform(r){if(2!==r.Da)throw r.Fa(1===r.Da?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return r.fieldMask.push(r.path),null}isEqual(r){return r instanceof Li}}function Xd(i,r,s){return new va({Da:3,La:r.settings.La,methodName:i._methodName,xa:s},r.databaseId,r.N,r.ignoreUndefinedProperties)}class sl extends lr{_toFieldTransform(r){return new vi(r.path,new $r)}isEqual(r){return r instanceof sl}}class Sg extends lr{constructor(r,s){super(r),this.Ua=s}_toFieldTransform(r){const s=Xd(this,r,!0),o=this.Ua.map(c=>dr(c,s)),a=new rr(o);return new vi(r.path,a)}isEqual(r){return this===r}}class kg extends lr{constructor(r,s){super(r),this.Ua=s}_toFieldTransform(r){const s=Xd(this,r,!0),o=this.Ua.map(c=>dr(c,s)),a=new sr(o);return new vi(r.path,a)}isEqual(r){return this===r}}class Ng extends lr{constructor(r,s){super(r),this.qa=s}_toFieldTransform(r){const s=new Qr(r.N,Xl(r.N,this.qa));return new vi(r.path,s)}isEqual(r){return this===r}}function il(i,r,s,o){const a=i.Ba(1,r,s);al("Data must be an object, but it was:",a,o);const c=[],l=Ke.empty();er(o,(m,y)=>{const w=ul(r,m,s);y=(0,K.m9)(y);const b=a.$a(w);if(y instanceof Li)c.push(w);else{const _=dr(y,b);null!=_&&(c.push(w),l.set(w,_))}});const f=new Vr(c);return new Wd(l,f,a.fieldTransforms)}function ol(i,r,s,o,a,c){const l=i.Ba(1,r,s),f=[cl(r,o,s)],m=[a];if(c.length%2!=0)throw new S(x.INVALID_ARGUMENT,`Function ${r}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<c.length;_+=2)f.push(cl(r,c[_])),m.push(c[_+1]);const y=[],w=Ke.empty();for(let _=f.length-1;_>=0;--_)if(!rf(y,f[_])){const E=f[_];let k=m[_];k=(0,K.m9)(k);const L=l.$a(E);if(k instanceof Li)y.push(E);else{const Z=dr(k,L);null!=Z&&(y.push(E),w.set(E,Z))}}const b=new Vr(y);return new Wd(w,b,l.fieldTransforms)}function ef(i,r,s,o=!1){return dr(s,i.Ba(o?4:3,r))}function dr(i,r){if(nf(i=(0,K.m9)(i)))return al("Unsupported field value:",r,i),tf(i,r);if(i instanceof lr)return function(s,o){if(!Yd(o.Da))throw o.Fa(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Fa(`${s._methodName}() is not currently supported inside arrays`);const a=s._toFieldTransform(o);a&&o.fieldTransforms.push(a)}(i,r),null;if(void 0===i&&r.ignoreUndefinedProperties)return null;if(r.path&&r.fieldMask.push(r.path),i instanceof Array){if(r.settings.xa&&4!==r.Da)throw r.Fa("Nested arrays are not supported");return function(s,o){const a=[];let c=0;for(const l of s){let f=dr(l,o.Oa(c));null==f&&(f={nullValue:"NULL_VALUE"}),a.push(f),c++}return{arrayValue:{values:a}}}(i,r)}return function(s,o){if(null===(s=(0,K.m9)(s)))return{nullValue:"NULL_VALUE"};if("number"==typeof s)return Xl(o.N,s);if("boolean"==typeof s)return{booleanValue:s};if("string"==typeof s)return{stringValue:s};if(s instanceof Date){const a=Oe.fromDate(s);return{timestampValue:Ii(o.N,a)}}if(s instanceof Oe){const a=new Oe(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Ii(o.N,a)}}if(s instanceof wa)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Dt)return{bytesValue:vh(o.N,s._byteString)};if(s instanceof re){const a=o.databaseId,c=s.firestore._databaseId;if(!c.isEqual(a))throw o.Fa(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Cc(s.firestore._databaseId||o.databaseId,s._key.path)}}throw o.Fa(`Unsupported field value: ${ga(s)}`)}(i,r)}function tf(i,r){const s={};return ql(i)?r.path&&r.path.length>0&&r.fieldMask.push(r.path):er(i,(o,a)=>{const c=dr(a,r.Na(o));null!=c&&(s[o]=c)}),{mapValue:{fields:s}}}function nf(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof Oe||i instanceof wa||i instanceof Dt||i instanceof re||i instanceof lr)}function al(i,r,s){if(!nf(s)||"object"!=typeof(o=s)||null===o||Object.getPrototypeOf(o)!==Object.prototype&&null!==Object.getPrototypeOf(o)){const o=ga(s);throw r.Fa("an object"===o?i+" a custom object":i+" "+o)}var o}function cl(i,r,s){if((r=(0,K.m9)(r))instanceof Qt)return r._internalPath;if("string"==typeof r)return ul(i,r);throw _a("Field path arguments must be of type string or FieldPath.",i,!1,void 0,s)}const Dg=new RegExp("[~\\*/\\[\\]]");function ul(i,r,s){if(r.search(Dg)>=0)throw _a(`Invalid field path (${r}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,s);try{return new Qt(...r.split("."))._internalPath}catch(o){throw _a(`Invalid field path (${r}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,s)}}function _a(i,r,s,o,a){const c=o&&!o.isEmpty(),l=void 0!==a;let f=`Function ${r}() called with invalid data`;s&&(f+=" (via `toFirestore()`)"),f+=". ";let m="";return(c||l)&&(m+=" (found",c&&(m+=` in field ${o}`),l&&(m+=` in document ${a}`),m+=")"),new S(x.INVALID_ARGUMENT,f+i+m)}function rf(i,r){return i.some(s=>s.isEqual(r))}class qi{constructor(r,s,o,a,c){this._firestore=r,this._userDataWriter=s,this._key=o,this._document=a,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new re(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const r=new Pg(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(r)}return this._userDataWriter.convertValue(this._document.data.value)}}get(r){if(this._document){const s=this._document.data.field(xa("DocumentSnapshot.get",r));if(null!==s)return this._userDataWriter.convertValue(s)}}}class Pg extends qi{data(){return super.data()}}function xa(i,r){return"string"==typeof r?ul(i,r):r instanceof Qt?r._internalPath:r._delegate._internalPath}class fr{constructor(r,s){this.hasPendingWrites=r,this.fromCache=s}isEqual(r){return this.hasPendingWrites===r.hasPendingWrites&&this.fromCache===r.fromCache}}class Jt extends qi{constructor(r,s,o,a,c,l){super(r,s,o,a,l),this._firestore=r,this._firestoreImpl=r,this.metadata=c}exists(){return super.exists()}data(r={}){if(this._document){if(this._converter){const s=new Fi(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(s,r)}return this._userDataWriter.convertValue(this._document.data.value,r.serverTimestamps)}}get(r,s={}){if(this._document){const o=this._document.data.field(xa("DocumentSnapshot.get",r));if(null!==o)return this._userDataWriter.convertValue(o,s.serverTimestamps)}}}class Fi extends Jt{data(r={}){return super.data(r)}}class _n{constructor(r,s,o,a){this._firestore=r,this._userDataWriter=s,this._snapshot=a,this.metadata=new fr(a.hasPendingWrites,a.fromCache),this.query=o}get docs(){const r=[];return this.forEach(s=>r.push(s)),r}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(r,s){this._snapshot.docs.forEach(o=>{r.call(s,new Fi(this._firestore,this._userDataWriter,o.key,o,new fr(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))})}docChanges(r={}){const s=!!r.includeMetadataChanges;if(s&&this._snapshot.excludesMetadataChanges)throw new S(x.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===s||(this._cachedChanges=function(o,a){if(o._snapshot.oldDocs.isEmpty()){let c=0;return o._snapshot.docChanges.map(l=>({type:"added",doc:new Fi(o._firestore,o._userDataWriter,l.doc.key,l.doc,new fr(o._snapshot.mutatedKeys.has(l.doc.key),o._snapshot.fromCache),o.query.converter),oldIndex:-1,newIndex:c++}))}{let c=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(l=>a||3!==l.type).map(l=>{const f=new Fi(o._firestore,o._userDataWriter,l.doc.key,l.doc,new fr(o._snapshot.mutatedKeys.has(l.doc.key),o._snapshot.fromCache),o.query.converter);let m=-1,y=-1;return 0!==l.type&&(m=c.indexOf(l.doc.key),c=c.delete(l.doc.key)),1!==l.type&&(c=c.add(l.doc),y=c.indexOf(l.doc.key)),{type:Og(l.type),doc:f,oldIndex:m,newIndex:y}})}}(this,s),this._cachedChangesIncludeMetadataChanges=s),this._cachedChanges}}function Og(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return M()}}function sf(i,r){return i instanceof Jt&&r instanceof Jt?i._firestore===r._firestore&&i._key.isEqual(r._key)&&(null===i._document?null===r._document:i._document.isEqual(r._document))&&i._converter===r._converter:i instanceof _n&&r instanceof _n&&i._firestore===r._firestore&&Gd(i.query,r.query)&&i.metadata.isEqual(r.metadata)&&i._snapshot.isEqual(r._snapshot)}function of(i){if(Qo(i)&&0===i.explicitOrderBy.length)throw new S(x.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ri{}function xn(i,...r){for(const s of r)i=s._apply(i);return i}class Mg extends Ri{constructor(r,s,o){super(),this.Ka=r,this.ja=s,this.Qa=o,this.type="where"}_apply(r){const s=hr(r.firestore),o=function(a,c,l,f,m,y,w){let b;if(m.isKeyField()){if("array-contains"===y||"array-contains-any"===y)throw new S(x.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on FieldPath.documentId().`);if("in"===y||"not-in"===y){df(w,y);const E=[];for(const k of w)E.push(hf(f,a,k));b={arrayValue:{values:E}}}else b=hf(f,a,w)}else"in"!==y&&"not-in"!==y&&"array-contains-any"!==y||df(w,y),b=ef(l,"where",w,"in"===y||"not-in"===y);const _=Je.create(m,y,b);return function(E,k){if(k.v()){const Z=bc(E);if(null!==Z&&!Z.isEqual(k.field))throw new S(x.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Z.toString()}' and '${k.field.toString()}'`);const ie=vc(E);null!==ie&&ff(0,k.field,ie)}const L=function(Z,ie){for(const Ve of Z.filters)if(ie.indexOf(Ve.op)>=0)return Ve.op;return null}(E,function(Z){switch(Z){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(k.op));if(null!==L)throw new S(x.INVALID_ARGUMENT,L===k.op?`Invalid query. You cannot use more than one '${k.op.toString()}' filter.`:`Invalid query. You cannot use '${k.op.toString()}' filters with '${L.toString()}' filters.`)}(a,_),_}(r._query,0,s,r.firestore._databaseId,this.Ka,this.ja,this.Qa);return new Ge(r.firestore,r.converter,function(a,c){const l=a.filters.concat([c]);return new Kt(a.path,a.collectionGroup,a.explicitOrderBy.slice(),l,a.limit,a.limitType,a.startAt,a.endAt)}(r._query,o))}}class qg extends Ri{constructor(r,s){super(),this.Ka=r,this.Wa=s,this.type="orderBy"}_apply(r){const s=function(o,a,c){if(null!==o.startAt)throw new S(x.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==o.endAt)throw new S(x.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new Kr(a,c);return function(f,m){if(null===vc(f)){const y=bc(f);null!==y&&ff(0,y,m.field)}}(o,l),l}(r._query,this.Ka,this.Wa);return new Ge(r.firestore,r.converter,function(o,a){const c=o.explicitOrderBy.concat([a]);return new Kt(o.path,o.collectionGroup,c,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(r._query,s))}}class af extends Ri{constructor(r,s,o){super(),this.type=r,this.Ga=s,this.za=o}_apply(r){return new Ge(r.firestore,r.converter,$l(r._query,this.Ga,this.za))}}class cf extends Ri{constructor(r,s,o){super(),this.type=r,this.Ha=s,this.Ja=o}_apply(r){const s=lf(r,this.type,this.Ha,this.Ja);return new Ge(r.firestore,r.converter,(a=s,new Kt((o=r._query).path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,a,o.endAt)));var o,a}}class uf extends Ri{constructor(r,s,o){super(),this.type=r,this.Ha=s,this.Ja=o}_apply(r){const s=lf(r,this.type,this.Ha,this.Ja);return new Ge(r.firestore,r.converter,(a=s,new Kt((o=r._query).path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,o.startAt,a)));var o,a}}function lf(i,r,s,o){if(s[0]=(0,K.m9)(s[0]),s[0]instanceof qi)return function(a,c,l,f,m){if(!f)throw new S(x.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const y=[];for(const w of Gr(a))if(w.field.isKeyField())y.push(jo(c,f.key));else{const b=f.data.field(w.field);if(mc(b))throw new S(x.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+w.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===b){const _=w.field.canonicalString();throw new S(x.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${_}' (used as the orderBy) does not exist.`)}y.push(b)}return new gi(y,m)}(i._query,i.firestore._databaseId,r,s[0]._document,o);{const a=hr(i.firestore);return function(c,l,f,m,y,w){const b=c.explicitOrderBy;if(y.length>b.length)throw new S(x.INVALID_ARGUMENT,`Too many arguments provided to ${m}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const _=[];for(let E=0;E<y.length;E++){const k=y[E];if(b[E].field.isKeyField()){if("string"!=typeof k)throw new S(x.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${m}(), but got a ${typeof k}`);if(!_c(c)&&-1!==k.indexOf("/"))throw new S(x.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to ${m}() must be a plain document ID, but '${k}' contains a slash.`);const L=c.path.child(J.fromString(k));if(!O.isDocumentKey(L))throw new S(x.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to ${m}() must result in a valid document path, but '${L}' is not because it contains an odd number of segments.`);const Z=new O(L);_.push(jo(l,Z))}else{const L=ef(f,m,k);_.push(L)}}return new gi(_,w)}(i._query,i.firestore._databaseId,a,r,s,o)}}function hf(i,r,s){if("string"==typeof(s=(0,K.m9)(s))){if(""===s)throw new S(x.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!_c(r)&&-1!==s.indexOf("/"))throw new S(x.INVALID_ARGUMENT,`Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '${s}' contains a '/' character.`);const o=r.path.child(J.fromString(s));if(!O.isDocumentKey(o))throw new S(x.INVALID_ARGUMENT,`Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return jo(i,new O(o))}if(s instanceof re)return jo(i,s._key);throw new S(x.INVALID_ARGUMENT,`Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: ${ga(s)}.`)}function df(i,r){if(!Array.isArray(i)||0===i.length)throw new S(x.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${r.toString()}' filters.`);if(i.length>10)throw new S(x.INVALID_ARGUMENT,`Invalid Query. '${r.toString()}' filters support a maximum of 10 elements in the value array.`)}function ff(i,r,s){if(!s.isEqual(r))throw new S(x.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${r.toString()}' and so you must also use '${r.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${s.toString()}' instead.`)}class ll{convertValue(r,s="none"){switch(nr(r)){case 0:return null;case 1:return r.booleanValue;case 2:return ye(r.integerValue||r.doubleValue);case 3:return this.convertTimestamp(r.timestampValue);case 4:return this.convertServerTimestamp(r,s);case 5:return r.stringValue;case 6:return this.convertBytes(jr(r.bytesValue));case 7:return this.convertReference(r.referenceValue);case 8:return this.convertGeoPoint(r.geoPointValue);case 9:return this.convertArray(r.arrayValue,s);case 10:return this.convertObject(r.mapValue,s);default:throw M()}}convertObject(r,s){const o={};return er(r.fields,(a,c)=>{o[a]=this.convertValue(c,s)}),o}convertGeoPoint(r){return new wa(ye(r.latitude),ye(r.longitude))}convertArray(r,s){return(r.values||[]).map(o=>this.convertValue(o,s))}convertServerTimestamp(r,s){switch(s){case"previous":const o=Fl(r);return null==o?null:this.convertValue(o,s);case"estimate":return this.convertTimestamp(di(r));default:return null}}convertTimestamp(r){const s=dn(r);return new Oe(s.seconds,s.nanos)}convertDocumentKey(r,s){const o=J.fromString(r);U(Ph(o));const a=new gs(o.get(1),o.get(3)),c=new O(o.popFirst(5));return a.isEqual(s)||ge(`Document ${c} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${s.projectId}/${s.database}) instead.`),c}}function Ta(i,r,s){let o;return o=i?s&&(s.merge||s.mergeFields)?i.toFirestore(r,s):i.toFirestore(r):r,o}class zg extends ll{constructor(r){super(),this.firestore=r}convertBytes(r){return new Dt(r)}convertReference(r){const s=this.convertDocumentKey(r,this.firestore._databaseId);return new re(this.firestore,null,s)}}class mf{constructor(r,s){this._firestore=r,this._commitHandler=s,this._mutations=[],this._committed=!1,this._dataReader=hr(r)}set(r,s,o){this._verifyNotCommitted();const a=Tn(r,this._firestore),c=Ta(a.converter,s,o),l=ba(this._dataReader,"WriteBatch.set",a._key,c,null!==a.converter,o);return this._mutations.push(l.toMutation(a._key,we.none())),this}update(r,s,o,...a){this._verifyNotCommitted();const c=Tn(r,this._firestore);let l;return l="string"==typeof(s=(0,K.m9)(s))||s instanceof Qt?ol(this._dataReader,"WriteBatch.update",c._key,s,o,a):il(this._dataReader,"WriteBatch.update",c._key,s),this._mutations.push(l.toMutation(c._key,we.exists(!0))),this}delete(r){this._verifyNotCommitted();const s=Tn(r,this._firestore);return this._mutations=this._mutations.concat(new _i(s._key,we.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new S(x.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Tn(i,r){if((i=(0,K.m9)(i)).firestore!==r)throw new S(x.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class mr extends ll{constructor(r){super(),this.firestore=r}convertBytes(r){return new Dt(r)}convertReference(r){const s=this.convertDocumentKey(r,this.firestore._databaseId);return new re(this.firestore,null,s)}}function pf(i,r,s){i=Q(i,re);const o=Q(i.firestore,de),a=Ta(i.converter,r,s);return ys(o,[ba(hr(o),"setDoc",i._key,a,null!==i.converter,s).toMutation(i._key,we.none())])}function gf(i,r,s,...o){i=Q(i,re);const a=Q(i.firestore,de),c=hr(a);let l;return l="string"==typeof(r=(0,K.m9)(r))||r instanceof Qt?ol(c,"updateDoc",i._key,r,s,o):il(c,"updateDoc",i._key,r),ys(a,[l.toMutation(i._key,we.exists(!0))])}function yf(i,...r){var s,o,a;i=(0,K.m9)(i);let c={includeMetadataChanges:!1},l=0;"object"!=typeof r[l]||rl(r[l])||(c=r[l],l++);const f={includeMetadataChanges:c.includeMetadataChanges};if(rl(r[l])){const b=r[l];r[l]=null===(s=b.next)||void 0===s?void 0:s.bind(b),r[l+1]=null===(o=b.error)||void 0===o?void 0:o.bind(b),r[l+2]=null===(a=b.complete)||void 0===a?void 0:a.bind(b)}let m,y,w;if(i instanceof re)y=Q(i.firestore,de),w=Hr(i._key.path),m={next:b=>{r[l]&&r[l](hl(y,i,b))},error:r[l+1],complete:r[l+2]};else{const b=Q(i,Ge);y=Q(b.firestore,de),w=b._query;const _=new mr(y);m={next:E=>{r[l]&&r[l](new _n(y,_,b,E))},error:r[l+1],complete:r[l+2]},of(i._query)}return function(b,_,E,k){const L=new ma(k),Z=new _u(_,L,E);return b.asyncQueue.enqueueAndForget((0,I.Z)(function*(){return gu(yield ps(b),Z)})),()=>{L.Xo(),b.asyncQueue.enqueueAndForget((0,I.Z)(function*(){return wu(yield ps(b),Z)}))}}(Ce(y),w,f,m)}function ys(i,r){return function(s,o){const a=new Pe;return s.asyncQueue.enqueueAndForget((0,I.Z)(function*(){return function(i,r,s){return Cu.apply(this,arguments)}(yield el(s),o,a)})),a.promise}(Ce(i),r)}function hl(i,r,s){const o=s.docs.get(r._key),a=new mr(i);return new Jt(i,a,r._key,o,new fr(s.hasPendingWrites,s.fromCache),r.converter)}class ey extends class{constructor(r,s){this._firestore=r,this._transaction=s,this._dataReader=hr(r)}get(r){const s=Tn(r,this._firestore),o=new zg(this._firestore);return this._transaction.lookup([s._key]).then(a=>{if(!a||1!==a.length)return M();const c=a[0];if(c.isFoundDocument())return new qi(this._firestore,o,c.key,c,s.converter);if(c.isNoDocument())return new qi(this._firestore,o,s._key,null,s.converter);throw M()})}set(r,s,o){const a=Tn(r,this._firestore),c=Ta(a.converter,s,o),l=ba(this._dataReader,"Transaction.set",a._key,c,null!==a.converter,o);return this._transaction.set(a._key,l),this}update(r,s,o,...a){const c=Tn(r,this._firestore);let l;return l="string"==typeof(s=(0,K.m9)(s))||s instanceof Qt?ol(this._dataReader,"Transaction.update",c._key,s,o,a):il(this._dataReader,"Transaction.update",c._key,s),this._transaction.update(c._key,l),this}delete(r){const s=Tn(r,this._firestore);return this._transaction.delete(s._key),this}}{constructor(r,s){super(r,s),this._firestore=r}get(r){const s=Tn(r,this._firestore),o=new mr(this._firestore);return super.get(r).then(a=>new Jt(this._firestore,o,s._key,a._document,new fr(!1,!1),s.converter))}}function dl(i,r){if(void 0===r)return{merge:!1};if(void 0!==r.mergeFields&&void 0!==r.merge)throw new S("invalid-argument",`Invalid options passed to function ${i}(): You cannot specify both "merge" and "mergeFields".`);return r}function wf(){if("undefined"==typeof Uint8Array)throw new S("unimplemented","Uint8Arrays are not available in this environment.")}function vf(){if("undefined"==typeof atob)throw new S("unimplemented","Blobs are unavailable in Firestore in this environment.")}(function(i){Zr=i})(Yt.SDK_VERSION),(0,Yt._registerComponent)(new _s.wA("firestore",(i,{options:r})=>{const s=i.getProvider("app").getImmediate(),o=new de(s,new Ff(i.getProvider("auth-internal")));return r=Object.assign({useFetchStreams:!0},r),o._setSettings(r),o},"PUBLIC")),(0,Yt.registerVersion)("@firebase/firestore","3.0.1",void 0);class Ui{constructor(r){this._delegate=r}static fromBase64String(r){return vf(),new Ui(Dt.fromBase64String(r))}static fromUint8Array(r){return wf(),new Ui(Dt.fromUint8Array(r))}toBase64(){return vf(),this._delegate.toBase64()}toUint8Array(){return wf(),this._delegate.toUint8Array()}isEqual(r){return this._delegate.isEqual(r._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function fl(i){return function(i,r){if("object"!=typeof i||null===i)return!1;const s=i;for(const o of["next","error","complete"])if(o in s&&"function"==typeof s[o])return!0;return!1}(i)}class hy{enableIndexedDbPersistence(r,s){return function(i,r){Jd(i=Q(i,de));const s=Ce(i),o=i._freezeSettings(),a=new Gu;return Qd(s,a,new Dd(a,o.cacheSizeBytes,null==r?void 0:r.forceOwnership))}(r._delegate,{forceOwnership:s})}enableMultiTabIndexedDbPersistence(r){return function(i){Jd(i=Q(i,de));const r=Ce(i),s=i._freezeSettings(),o=new Gu;return Qd(r,o,new Yp(o,s.cacheSizeBytes))}(r._delegate)}clearIndexedDbPersistence(r){return function(i){if(i._initialized&&!i._terminated)throw new S(x.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const r=new Pe;return i._queue.enqueueAndForgetEvenWhileRestricted((0,I.Z)(function*(){try{yield(s=(0,I.Z)(function*(o){if(!yt.Pt())return Promise.resolve();const a=o+"main";yield yt.delete(a)}),function(o){return s.apply(this,arguments)})(Uc(i._databaseId,i._persistenceKey)),r.resolve()}catch(s){r.reject(s)}var s})),r.promise}(r._delegate)}}class bf{constructor(r,s,o){this._delegate=s,this._persistenceProvider=o,this.INTERNAL={delete:()=>this.terminate()},r instanceof gs||(this._appCompat=r)}get _databaseId(){return this._delegate._databaseId}settings(r){const s=this._delegate._getSettings();!r.merge&&s.host!==r.host&&li("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),r.merge&&delete(r=Object.assign(Object.assign({},s),r)).merge,this._delegate._setSettings(r)}useEmulator(r,s,o={}){!function(i,r,s,o={}){var a;const c=(i=Q(i,Mi))._getSettings();if("firestore.googleapis.com"!==c.host&&c.host!==r&&li("Host has been set in both settings() and useEmulator(), emulator host will be used"),i._setSettings(Object.assign(Object.assign({},c),{host:`${r}:${s}`,ssl:!1})),o.mockUserToken){let l,f;if("string"==typeof o.mockUserToken)l=o.mockUserToken,f=Re.MOCK_USER;else{l=(0,K.Sg)(o.mockUserToken,null===(a=i._app)||void 0===a?void 0:a.options.projectId);const m=o.mockUserToken.sub||o.mockUserToken.user_id;if(!m)throw new S(x.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Re(m)}i._credentials=new qf(new Pl(l,f))}}(this._delegate,r,s,o)}enableNetwork(){return function(i){return function(i){return i.asyncQueue.enqueue((0,I.Z)(function*(){const r=yield Ld(i),s=yield qd(i);return r.setNetworkEnabled(!0),function(o){const a=D(o);return a.Kr.delete(0),Pi(a)}(s)}))}(Ce(i=Q(i,de)))}(this._delegate)}disableNetwork(){return function(i){return function(i){return i.asyncQueue.enqueue((0,I.Z)(function*(){const r=yield Ld(i),s=yield qd(i);return r.setNetworkEnabled(!1),(o=(0,I.Z)(function*(a){const c=D(a);c.Kr.add(0),yield cs(c),c.Wr.set("Offline")}),function(a){return o.apply(this,arguments)})(s);var o}))}(Ce(i=Q(i,de)))}(this._delegate)}enablePersistence(r){let s=!1,o=!1;return r&&(s=!!r.synchronizeTabs,o=!!r.experimentalForceOwningTab,Zd("synchronizeTabs",s,"experimentalForceOwningTab",o)),s?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,o)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function(i){return function(r){const s=new Pe;return r.asyncQueue.enqueueAndForget((0,I.Z)(function*(){return function(i,r){return Du.apply(this,arguments)}(yield el(r),s)})),s.promise}(Ce(i=Q(i,de)))}(this._delegate)}onSnapshotsInSync(r){return function(i,r){return function(i,r){const s=new ma(r);return i.asyncQueue.enqueueAndForget((0,I.Z)(function*(){return o=yield ps(i),a=s,D(o).Zr.add(a),void a.next();var o,a})),()=>{s.Xo(),i.asyncQueue.enqueueAndForget((0,I.Z)(function*(){return o=yield ps(i),a=s,void D(o).Zr.delete(a);var o,a}))}}(Ce(i=Q(i,de)),rl(r)?r:{next:r})}(this._delegate,r)}get app(){if(!this._appCompat)throw new S("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(r){try{return new ws(this,Kd(this._delegate,r))}catch(s){throw We(s,"collection()","Firestore.collection()")}}doc(r){try{return new ht(this,ya(this._delegate,r))}catch(s){throw We(s,"doc()","Firestore.doc()")}}collectionGroup(r){try{return new Ye(this,function(i,r){if(i=Q(i,Mi),nl("collectionGroup","collection id",r),r.indexOf("/")>=0)throw new S(x.INVALID_ARGUMENT,`Invalid collection ID '${r}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ge(i,null,(s=r,new Kt(J.emptyPath(),s)));var s}(this._delegate,r))}catch(s){throw We(s,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(r){return function(i,r){return function(i,r){const s=new Pe;return i.asyncQueue.enqueueAndForget((0,I.Z)(function*(){const o=yield(a=i,pa(a).then(c=>c.datastore));var a;new tg(i.asyncQueue,o,r,s).run()})),s.promise}(Ce(i),s=>r(new ey(i,s)))}(this._delegate,s=>r(new _f(this,s)))}batch(){return Ce(this._delegate),new xf(new mf(this._delegate,r=>ys(this._delegate,r)))}loadBundle(r){return function(i,r){const s=Ce(i=Q(i,de)),o=new pg;return function(i,r,s,o){const a=function(c,l){let f;return f="string"==typeof c?(new TextEncoder).encode(c):c,m=function(m,y){if(m instanceof Uint8Array)return Pd(m,y);if(m instanceof ArrayBuffer)return Pd(new Uint8Array(m),y);if(m instanceof ReadableStream)return m.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(f),new Xp(m,l);var m}(s,Di(r));i.asyncQueue.enqueueAndForget((0,I.Z)(function*(){!function(i,r,s){const o=D(i);var a;(a=(0,I.Z)(function*(c,l,f){try{const m=yield l.getMetadata();if(yield function(_,E){const k=D(_),L=Le(E.createTime);return k.persistence.runTransaction("hasNewerBundle","readonly",Z=>k.Je.getBundleMetadata(Z,E.id)).then(Z=>!!Z&&Z.createTime.compareTo(L)>=0)}(c.localStore,m))return yield l.close(),void f._completeWith((_=m,{taskState:"Success",documentsLoaded:_.totalDocuments,bytesLoaded:_.totalBytes,totalDocuments:_.totalDocuments,totalBytes:_.totalBytes}));f._updateProgress(_d(m));const y=new Np(m,c.localStore,l.N);let w=yield l.Qo();for(;w;){const _=yield y.fo(w);_&&f._updateProgress(_),w=yield l.Qo()}const b=yield y.complete();yield $t(c,b.Tn,void 0),yield function(_,E){const k=D(_);return k.persistence.runTransaction("Save bundle","readwrite",L=>k.Je.saveBundleMetadata(L,E))}(c.localStore,m),f._completeWith(b.progress)}catch(m){li("SyncEngine",`Loading bundle failed with ${m}`),f._failWith(m)}var _}),function(c,l,f){return a.apply(this,arguments)})(o,r,s).then(()=>{o.sharedClientState.notifyBundleLoaded()})}(yield el(i),a,o)}))}(s,i._databaseId,r,o),o}(this._delegate,r)}namedQuery(r){return function(i,r){return function(i,r){return i.asyncQueue.enqueue((0,I.Z)(function*(){return function(s,o){const a=D(s);return a.persistence.runTransaction("Get named query","readonly",c=>a.Je.getNamedQuery(c,o))}(yield Xu(i),r)}))}(Ce(i=Q(i,de)),r).then(s=>s?new Ge(i,null,s.query):null)}(this._delegate,r).then(s=>s?new Ye(this,s):null)}}class Ia extends ll{constructor(r){super(),this.firestore=r}convertBytes(r){return new Ui(new Dt(r))}convertReference(r){const s=this.convertDocumentKey(r,this.firestore._databaseId);return ht.forKey(s,this.firestore,null)}}class _f{constructor(r,s){this._firestore=r,this._delegate=s,this._userDataWriter=new Ia(r)}get(r){const s=gr(r);return this._delegate.get(s).then(o=>new Zi(this._firestore,new Jt(this._firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,s.converter)))}set(r,s,o){const a=gr(r);return o?(dl("Transaction.set",o),this._delegate.set(a,s,o)):this._delegate.set(a,s),this}update(r,s,o,...a){const c=gr(r);return 2===arguments.length?this._delegate.update(c,s):this._delegate.update(c,s,o,...a),this}delete(r){const s=gr(r);return this._delegate.delete(s),this}}class xf{constructor(r){this._delegate=r}set(r,s,o){const a=gr(r);return o?(dl("WriteBatch.set",o),this._delegate.set(a,s,o)):this._delegate.set(a,s),this}update(r,s,o,...a){const c=gr(r);return 2===arguments.length?this._delegate.update(c,s):this._delegate.update(c,s,o,...a),this}delete(r){const s=gr(r);return this._delegate.delete(s),this}commit(){return this._delegate.commit()}}class pr{constructor(r,s,o){this._firestore=r,this._userDataWriter=s,this._delegate=o}fromFirestore(r,s){const o=new Fi(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,null);return this._delegate.fromFirestore(new Bi(this._firestore,o),null!=s?s:{})}toFirestore(r,s){return s?this._delegate.toFirestore(r,s):this._delegate.toFirestore(r)}static getInstance(r,s){const o=pr.INSTANCES;let a=o.get(r);a||(a=new WeakMap,o.set(r,a));let c=a.get(s);return c||(c=new pr(r,new Ia(r),s),a.set(s,c)),c}}pr.INSTANCES=new WeakMap;class ht{constructor(r,s){this.firestore=r,this._delegate=s,this._userDataWriter=new Ia(r)}static forPath(r,s,o){if(r.length%2!=0)throw new S("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${r.canonicalString()} has ${r.length}`);return new ht(s,new re(s._delegate,o,new O(r)))}static forKey(r,s,o){return new ht(s,new re(s._delegate,o,r))}get id(){return this._delegate.id}get parent(){return new ws(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(r){try{return new ws(this.firestore,Kd(this._delegate,r))}catch(s){throw We(s,"collection()","DocumentReference.collection()")}}isEqual(r){return(r=(0,K.m9)(r))instanceof re&&Hd(this._delegate,r)}set(r,s){s=dl("DocumentReference.set",s);try{return s?pf(this._delegate,r,s):pf(this._delegate,r)}catch(o){throw We(o,"setDoc()","DocumentReference.set()")}}update(r,s,...o){try{return 1===arguments.length?gf(this._delegate,r):gf(this._delegate,r,s,...o)}catch(a){throw We(a,"updateDoc()","DocumentReference.update()")}}delete(){return function(i){return ys(Q(i.firestore,de),[new _i(i._key,we.none())])}(this._delegate)}onSnapshot(...r){const s=Tf(r),o=If(r,a=>new Zi(this.firestore,new Jt(this.firestore._delegate,this._userDataWriter,a._key,a._document,a.metadata,this._delegate.converter)));return yf(this._delegate,s,o)}get(r){let s;return s="cache"===(null==r?void 0:r.source)?function(i){i=Q(i,re);const r=Q(i.firestore,de),s=Ce(r),o=new mr(r);return function(i,r){const s=new Pe;return i.asyncQueue.enqueueAndForget((0,I.Z)(function*(){return(o=(0,I.Z)(function*(a,c,l){try{const f=yield function(m,y){const w=D(m);return w.persistence.runTransaction("read document","readonly",b=>w.Qn.An(b,y))}(a,c);f.isFoundDocument()?l.resolve(f):f.isNoDocument()?l.resolve(null):l.reject(new S(x.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(f){const m=hs(f,`Failed to get document '${c} from cache`);l.reject(m)}}),function(a,c,l){return o.apply(this,arguments)})(yield Xu(i),r,s);var o})),s.promise}(s,i._key).then(a=>new Jt(r,o,i._key,a,new fr(null!==a&&a.hasLocalMutations,!0),i.converter))}(this._delegate):"server"===(null==r?void 0:r.source)?function(i){i=Q(i,re);const r=Q(i.firestore,de);return Fd(Ce(r),i._key,{source:"server"}).then(s=>hl(r,i,s))}(this._delegate):function(i){i=Q(i,re);const r=Q(i.firestore,de);return Fd(Ce(r),i._key).then(s=>hl(r,i,s))}(this._delegate),s.then(o=>new Zi(this.firestore,new Jt(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)))}withConverter(r){return new ht(this.firestore,this._delegate.withConverter(r?pr.getInstance(this.firestore,r):null))}}function We(i,r,s){return i.message=i.message.replace(r,s),i}function Tf(i){for(const r of i)if("object"==typeof r&&!fl(r))return r;return{}}function If(i,r){var s,o;let a;return a=fl(i[0])?i[0]:fl(i[1])?i[1]:"function"==typeof i[0]?{next:i[0],error:i[1],complete:i[2]}:{next:i[1],error:i[2],complete:i[3]},{next:c=>{a.next&&a.next(r(c))},error:null===(s=a.error)||void 0===s?void 0:s.bind(a),complete:null===(o=a.complete)||void 0===o?void 0:o.bind(a)}}class Zi{constructor(r,s){this._firestore=r,this._delegate=s}get ref(){return new ht(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(r){return this._delegate.data(r)}get(r,s){return this._delegate.get(r,s)}isEqual(r){return sf(this._delegate,r._delegate)}}class Bi extends Zi{data(r){const s=this._delegate.data(r);return function(i,r){i||M()}(void 0!==s),s}}class Ye{constructor(r,s){this.firestore=r,this._delegate=s,this._userDataWriter=new Ia(r)}where(r,s,o){try{return new Ye(this.firestore,xn(this._delegate,function(i,r,s){const o=r,a=xa("where",i);return new Mg(a,o,s)}(r,s,o)))}catch(a){throw We(a,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(r,s){try{return new Ye(this.firestore,xn(this._delegate,function(i,r="asc"){const s=r,o=xa("orderBy",i);return new qg(o,s)}(r,s)))}catch(o){throw We(o,/(orderBy|where)\(\)/,"Query.$1()")}}limit(r){try{return new Ye(this.firestore,xn(this._delegate,function(i){return jd("limit",i),new af("limit",i,"F")}(r)))}catch(s){throw We(s,"limit()","Query.limit()")}}limitToLast(r){try{return new Ye(this.firestore,xn(this._delegate,function(i){return jd("limitToLast",i),new af("limitToLast",i,"L")}(r)))}catch(s){throw We(s,"limitToLast()","Query.limitToLast()")}}startAt(...r){try{return new Ye(this.firestore,xn(this._delegate,function(...i){return new cf("startAt",i,!0)}(...r)))}catch(s){throw We(s,"startAt()","Query.startAt()")}}startAfter(...r){try{return new Ye(this.firestore,xn(this._delegate,function(...i){return new cf("startAfter",i,!1)}(...r)))}catch(s){throw We(s,"startAfter()","Query.startAfter()")}}endBefore(...r){try{return new Ye(this.firestore,xn(this._delegate,function(...i){return new uf("endBefore",i,!0)}(...r)))}catch(s){throw We(s,"endBefore()","Query.endBefore()")}}endAt(...r){try{return new Ye(this.firestore,xn(this._delegate,function(...i){return new uf("endAt",i,!1)}(...r)))}catch(s){throw We(s,"endAt()","Query.endAt()")}}isEqual(r){return Gd(this._delegate,r._delegate)}get(r){let s;return s="cache"===(null==r?void 0:r.source)?function(i){i=Q(i,Ge);const r=Q(i.firestore,de),s=Ce(r),o=new mr(r);return function(i,r){const s=new Pe;return i.asyncQueue.enqueueAndForget((0,I.Z)(function*(){return(o=(0,I.Z)(function*(a,c,l){try{const f=yield ca(a,c,!0),m=new Id(c,f.Gn),y=m.Io(f.documents),w=m.applyChanges(y,!1);l.resolve(w.snapshot)}catch(f){const m=hs(f,`Failed to execute query '${c} against cache`);l.reject(m)}}),function(a,c,l){return o.apply(this,arguments)})(yield Xu(i),r,s);var o})),s.promise}(s,i._query).then(a=>new _n(r,o,i,a))}(this._delegate):"server"===(null==r?void 0:r.source)?function(i){i=Q(i,Ge);const r=Q(i.firestore,de),s=Ce(r),o=new mr(r);return Rd(s,i._query,{source:"server"}).then(a=>new _n(r,o,i,a))}(this._delegate):function(i){i=Q(i,Ge);const r=Q(i.firestore,de),s=Ce(r),o=new mr(r);return of(i._query),Rd(s,i._query).then(a=>new _n(r,o,i,a))}(this._delegate),s.then(o=>new ml(this.firestore,new _n(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)))}onSnapshot(...r){const s=Tf(r),o=If(r,a=>new ml(this.firestore,new _n(this.firestore._delegate,this._userDataWriter,this._delegate,a._snapshot)));return yf(this._delegate,s,o)}withConverter(r){return new Ye(this.firestore,this._delegate.withConverter(r?pr.getInstance(this.firestore,r):null))}}class fy{constructor(r,s){this._firestore=r,this._delegate=s}get type(){return this._delegate.type}get doc(){return new Bi(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class ml{constructor(r,s){this._firestore=r,this._delegate=s}get query(){return new Ye(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(r=>new Bi(this._firestore,r))}docChanges(r){return this._delegate.docChanges(r).map(s=>new fy(this._firestore,s))}forEach(r,s){this._delegate.forEach(o=>{r.call(s,new Bi(this._firestore,o))})}isEqual(r){return sf(this._delegate,r._delegate)}}class ws extends Ye{constructor(r,s){super(r,s),this.firestore=r,this._delegate=s}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const r=this._delegate.parent;return r?new ht(this.firestore,r):null}doc(r){try{return new ht(this.firestore,void 0===r?ya(this._delegate):ya(this._delegate,r))}catch(s){throw We(s,"doc()","CollectionReference.doc()")}}add(r){return function(i,r){const s=Q(i.firestore,de),o=ya(i),a=Ta(i.converter,r);return ys(s,[ba(hr(i.firestore),"addDoc",o._key,a,null!==i.converter,{}).toMutation(o._key,we.exists(!1))]).then(()=>o)}(this._delegate,r).then(s=>new ht(this.firestore,s))}isEqual(r){return Hd(this._delegate,r._delegate)}withConverter(r){return new ws(this.firestore,this._delegate.withConverter(r?pr.getInstance(this.firestore,r):null))}}function gr(i){return Q(i,re)}class pl{constructor(...r){this._delegate=new Qt(...r)}static documentId(){return new pl(Ue.keyField().canonicalString())}isEqual(r){return(r=(0,K.m9)(r))instanceof Qt&&this._delegate._internalPath.isEqual(r._internalPath)}}class yr{constructor(r){this._delegate=r}static serverTimestamp(){const r=new sl("serverTimestamp");return r._methodName="FieldValue.serverTimestamp",new yr(r)}static delete(){const r=new Li("deleteField");return r._methodName="FieldValue.delete",new yr(r)}static arrayUnion(...r){const s=function(...i){return new Sg("arrayUnion",i)}(...r);return s._methodName="FieldValue.arrayUnion",new yr(s)}static arrayRemove(...r){const s=function(...i){return new kg("arrayRemove",i)}(...r);return s._methodName="FieldValue.arrayRemove",new yr(s)}static increment(r){const s=function(i){return new Ng("increment",i)}(r);return s._methodName="FieldValue.increment",new yr(s)}isEqual(r){return this._delegate.isEqual(r._delegate)}}const my={Firestore:bf,GeoPoint:wa,Timestamp:Oe,Blob:Ui,Transaction:_f,WriteBatch:xf,DocumentReference:ht,DocumentSnapshot:Zi,Query:Ye,QueryDocumentSnapshot:Bi,QuerySnapshot:ml,CollectionReference:ws,FieldPath:pl,FieldValue:yr,setLogLevel:function(i){!function(i){hn.setLogLevel(i)}(i)},CACHE_SIZE_UNLIMITED:-1};!function(i){(function(i,r){i.INTERNAL.registerComponent(new _s.wA("firestore-compat",s=>((r,s)=>new bf(r,s,new hy))(s.getProvider("app-compat").getImmediate(),s.getProvider("firestore").getImmediate()),"PUBLIC").setServiceProps(Object.assign({},my)))})(i),i.registerVersion("@firebase/firestore-compat","0.1.1")}(Cn.Z);var Wt=B(8006);function Ef(i,r){return function(i,r=zi.z){return new Sa.y(s=>{let o;return null!=r?r.schedule(()=>{o=i.onSnapshot({includeMetadataChanges:!0},s)}):o=i.onSnapshot({includeMetadataChanges:!0},s),()=>{null!=o&&o()}})}(i,r)}function gl(i,r){return Ef(i,r).pipe((0,fe.U)(s=>({payload:s,type:"query"})))}function Ea(i,r){return gl(i,r).pipe((0,Ot.O)(void 0),vs(),(0,fe.U)(([s,o])=>{const a=o.payload.docChanges(),c=a.map(l=>({type:l.type,payload:l}));return s&&JSON.stringify(s.payload.metadata)!==JSON.stringify(o.payload.metadata)&&o.payload.docs.forEach((l,f)=>{const m=a.find(w=>w.doc.ref.isEqual(l.ref)),y=null==s?void 0:s.payload.docs.find(w=>w.ref.isEqual(l.ref));m&&JSON.stringify(m.doc.metadata)===JSON.stringify(l.metadata)||!m&&y&&JSON.stringify(y.metadata)===JSON.stringify(l.metadata)||c.push({type:"modified",payload:{oldIndex:f,newIndex:f,type:"modified",doc:l}})}),c}))}function Cf(i,r,s){return Ea(i,s).pipe((0,bs.R)((o,a)=>function(i,r,s){return r.forEach(o=>{s.indexOf(o.type)>-1&&(i=function(i,r){switch(r.type){case"added":if(!i[r.newIndex]||!i[r.newIndex].doc.ref.isEqual(r.doc.ref))return yl(i,r.newIndex,0,r);break;case"modified":if(null==i[r.oldIndex]||i[r.oldIndex].doc.ref.isEqual(r.doc.ref)){if(r.oldIndex!==r.newIndex){const s=i.slice();return s.splice(r.oldIndex,1),s.splice(r.newIndex,0,r),s}return yl(i,r.newIndex,1,r)}break;case"removed":if(i[r.oldIndex]&&i[r.oldIndex].doc.ref.isEqual(r.doc.ref))return yl(i,r.oldIndex,1)}return i}(i,o))}),i}(o,a.map(c=>c.payload),r),[]),s=>s.lift(new T(void 0,void 0)),(0,fe.U)(o=>o.map(a=>({type:a.type,payload:a}))))}function yl(i,r,s,...o){const a=i.slice();return a.splice(r,s,...o),a}function Af(i){return(!i||0===i.length)&&(i=["added","removed","modified"]),i}B(7841);class Sf{constructor(r,s,o){this.ref=r,this.query=s,this.afs=o}stateChanges(r){let s=Ea(this.query,this.afs.schedulers.outsideAngular);return r&&r.length>0&&(s=s.pipe((0,fe.U)(o=>o.filter(a=>r.indexOf(a.type)>-1)))),s.pipe((0,Ot.O)(void 0),vs(),(0,_e.h)(([o,a])=>a.length>0||!o),(0,fe.U)(([o,a])=>a),je.iC)}auditTrail(r){return this.stateChanges(r).pipe((0,bs.R)((s,o)=>[...s,...o],[]))}snapshotChanges(r){const s=Af(r);return Cf(this.query,s,this.afs.schedulers.outsideAngular).pipe(je.iC)}valueChanges(r={}){return gl(this.query,this.afs.schedulers.outsideAngular).pipe((0,fe.U)(s=>s.payload.docs.map(o=>r.idField?Object.assign(Object.assign({},o.data()),{[r.idField]:o.id}):o.data())),je.iC)}get(r){return(0,wr.D)(this.query.get(r)).pipe(je.f6)}add(r){return this.ref.add(r)}doc(r){return new kf(this.ref.doc(r),this.afs)}}class kf{constructor(r,s){this.ref=r,this.afs=s}set(r,s){return this.ref.set(r,s)}update(r){return this.ref.update(r)}delete(){return this.ref.delete()}collection(r,s){const o=this.ref.collection(r),{ref:a,query:c}=Nf(o,s);return new Sf(a,c,this.afs)}snapshotChanges(){return function(i,r){return Ef(i,r).pipe((0,Ot.O)(void 0),vs(),(0,fe.U)(([s,o])=>o.exists?(null==s?void 0:s.exists)?{payload:o,type:"modified"}:{payload:o,type:"added"}:{payload:o,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(je.iC)}valueChanges(r={}){return this.snapshotChanges().pipe((0,fe.U)(({payload:s})=>r.idField?Object.assign(Object.assign({},s.data()),{[r.idField]:s.id}):s.data()))}get(r){return(0,wr.D)(this.ref.get(r)).pipe((0,En.QV)(this.afs.schedulers.insideAngular))}}class _y{constructor(r,s){this.query=r,this.afs=s}stateChanges(r){return r&&0!==r.length?Ea(this.query,this.afs.schedulers.outsideAngular).pipe((0,fe.U)(s=>s.filter(o=>r.indexOf(o.type)>-1)),(0,_e.h)(s=>s.length>0),je.iC):Ea(this.query,this.afs.schedulers.outsideAngular).pipe(je.iC)}auditTrail(r){return this.stateChanges(r).pipe((0,bs.R)((s,o)=>[...s,...o],[]))}snapshotChanges(r){const s=Af(r);return Cf(this.query,s,this.afs.schedulers.outsideAngular).pipe(je.iC)}valueChanges(r={}){return gl(this.query,this.afs.schedulers.outsideAngular).pipe((0,fe.U)(o=>o.payload.docs.map(a=>r.idField?Object.assign({[r.idField]:a.id},a.data()):a.data())),je.iC)}get(r){return(0,wr.D)(this.query.get(r)).pipe(je.f6)}}const xy=new u.OlP("angularfire2.enableFirestorePersistence"),Ty=new u.OlP("angularfire2.firestore.persistenceSettings"),Iy=new u.OlP("angularfire2.firestore.settings"),Ey=new u.OlP("angularfire2.firestore.use-emulator");function Nf(i,r=(s=>s)){return{query:r(i),ref:i}}let wl=(()=>{class i{constructor(s,o,a,c,l,f,m,y,w,b,_,E,k,L,Z,ie){this.schedulers=m;const Ve=(0,ze.on)(s,f,o),Pt=w;b&&(0,Wt.nw)(Ve,f,_,k,L,Z,E,ie),[this.firestore,this.persistenceEnabled$]=(0,je.cc)(`${Ve.name}.firestore`,"AngularFirestore",Ve.name,()=>{const wt=f.runOutsideAngular(()=>Ve.firestore());if(c&&wt.settings(c),Pt&&wt.useEmulator(...Pt),a&&!(0,oe.PM)(l)){const ji=()=>{try{return(0,wr.D)(wt.enablePersistence(y||void 0).then(()=>!0,()=>!1))}catch(Aa){return"undefined"!=typeof console&&console.warn(Aa),(0,vr.of)(!1)}};return[wt,f.runOutsideAngular(ji)]}return[wt,(0,vr.of)(!1)]},[c,Pt,a])}collection(s,o){let a;a="string"==typeof s?this.firestore.collection(s):s;const{ref:c,query:l}=Nf(a,o),f=this.schedulers.ngZone.run(()=>c);return new Sf(f,l,this)}collectionGroup(s,o){const a=o||(l=>l),c=this.firestore.collectionGroup(s);return new _y(a(c),this)}doc(s){let o;o="string"==typeof s?this.firestore.doc(s):s;const a=this.schedulers.ngZone.run(()=>o);return new kf(a,this)}createId(){return this.firestore.collection("_").doc().id}}return i.\u0275fac=function(s){return new(s||i)(u.LFG(ze.Dh),u.LFG(ze.xv,8),u.LFG(xy,8),u.LFG(Iy,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(je.HU),u.LFG(Ty,8),u.LFG(Ey,8),u.LFG(Wt.zQ,8),u.LFG(Wt.Qv,8),u.LFG(Wt.L6,8),u.LFG(Wt._Q,8),u.LFG(Wt.rT,8),u.LFG(Wt.lh,8),u.LFG(Wt.f7,8))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})();var Df=B(6893);let Vi=(()=>{class i{constructor(s,o){this.authFire=s,this.authSvc=o,this.resultados=[]}cargarResultado(){return this.itemCollection=this.authFire.collection("scores",s=>s.orderBy("fecha","desc").limit(50)),this.itemCollection.valueChanges().pipe((0,fe.U)(s=>{this.resultados=[];for(let o of s)this.resultados.unshift(o);return this.resultados}))}agregarResultado(s,o){var a;let c={fecha:(new Date).getTime(),estado:s,juego:o,uid:this.authSvc.usuario.uid,uemail:this.authSvc.usuario.email};return null===(a=this.itemCollection)||void 0===a?void 0:a.add(c)}}return i.\u0275fac=function(s){return new(s||i)(u.LFG(wl),u.LFG(Df.e))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Cy=(()=>{class i{constructor(s,o){this.aFire=s,this.authFire=o,this.chats=[],this.authFire.authState.subscribe(a=>{a&&a.uid&&(this.nombreUser=a.email)})}CargarMensaje(){return this.itemsCollections=this.aFire.collection("chats",s=>s.orderBy("fecha","desc").limit(5)),this.itemsCollections.valueChanges().pipe((0,fe.U)(s=>{this.chats=[];for(let o of s)this.chats.unshift(o);return this.chats}))}AgregarMensaje(s){var o;let a=new Date,c=a.getHours()+":"+a.getMinutes(),l={nombre:this.nombreUser,mensaje:s,fecha:(new Date).getTime(),hora:c};return null===(o=this.itemsCollections)||void 0===o?void 0:o.add(l)}}return i.\u0275fac=function(s){return new(s||i)(u.LFG(wl),u.LFG(Wt.zQ))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var X=B(665);const Ay=function(i){return{"text-right":i}},Sy=function(i,r){return{"badge-primary":i,"badge-success":r}};function ky(i,r){if(1&i&&(u.TgZ(0,"div",6),u.TgZ(1,"span",7),u._uU(2),u.qZA(),u._UZ(3,"br"),u.TgZ(4,"p",8),u._uU(5),u.qZA(),u.TgZ(6,"span",9),u._uU(7),u.qZA(),u.qZA()),2&i){const s=r.$implicit,o=u.oxw();u.Q6J("ngClass",u.VKq(5,Ay,o.chatSrv.nombreUser==s.nombre)),u.xp6(1),u.Q6J("ngClass",u.WLB(7,Sy,o.chatSrv.nombreUser==s.nombre,o.chatSrv.nombreUser!=s.nombre)),u.xp6(1),u.hij(" ",s.nombre," "),u.xp6(3),u.hij(" ",s.mensaje," "),u.xp6(2),u.Oqu(s.hora)}}let Ca=(()=>{class i{constructor(s){this.chatSrv=s,this.mensaje="",this.chatSrv.CargarMensaje().subscribe(()=>{this.elemento.scrollTop=this.elemento.scrollHeight})}ngOnInit(){setTimeout(()=>{this.elemento=document.getElementById("app-mensajes")},20)}EnviarMensaje(){0!==this.mensaje.length&&(this.chatSrv.AgregarMensaje(this.mensaje),this.mensaje="")}}return i.\u0275fac=function(s){return new(s||i)(u.Y36(Cy))},i.\u0275cmp=u.Xpm({type:i,selectors:[["app-chat"]],decls:9,vars:2,consts:[[1,"princiapal"],[1,"container","main-container"],[1,"chat-window"],["id","app-mensajes",1,"app-mensajes"],[3,"ngClass",4,"ngFor","ngForOf"],["type","text","name","mensaje","autocomplete","off","placeholder","Enviar... ",1,"form-control",3,"ngModel","ngModelChange","keyup.enter"],[3,"ngClass"],[1,"badge",3,"ngClass"],[1,"badge","badge-pill","badge-light"],[1,"hora-chat"]],template:function(s,o){1&s&&(u.TgZ(0,"div",0),u.TgZ(1,"div",1),u.TgZ(2,"div",2),u.TgZ(3,"h2"),u._uU(4,"Chat Game"),u.qZA(),u._UZ(5,"hr"),u.TgZ(6,"div",3),u.YNc(7,ky,8,10,"div",4),u.TgZ(8,"input",5),u.NdJ("ngModelChange",function(c){return o.mensaje=c})("keyup.enter",function(){return o.EnviarMensaje()}),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA()),2&s&&(u.xp6(7),u.Q6J("ngForOf",o.chatSrv.chats),u.xp6(1),u.Q6J("ngModel",o.mensaje))},directives:[oe.sg,X.Fj,X.JJ,X.On,oe.mk],styles:[".hora-chat[_ngcontent-%COMP%]{color:#413838;font-size:11px;margin-top:0;padding-top:0}.form-control[_ngcontent-%COMP%]{margin-top:0;width:98%}.principal[_ngcontent-%COMP%]{background-color:#000;background-repeat:no-repeat;background-size:cover;background-position:50% 50%}div[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff}[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{border-radius:10px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:10px;--webkit-box-shadow: inset 0 0 20px rgba(103, 103, 103, .816)}.main-container[_ngcontent-%COMP%]{padding-top:3%;padding-bottom:3%;display:flex;align-items:center;justify-content:center}.puntero[_ngcontent-%COMP%]{cursor:pointer}.chat-window[_ngcontent-%COMP%]{padding:10px;width:350px;height:420px;overflow:hidden;border:1px solid #717171;border-radius:20px;box-shadow:8px 7px 22px -4px #5e2828bf;-webkit-box-shadow:8px 7px 22px -4px rgba(94,40,40,.75);-moz-box-shadow:8px 7px 22px -4px rgba(94,40,40,.75);background-color:#4b303085}.app-mensajes[_ngcontent-%COMP%]{overflow-y:scroll;height:270px;padding:5px;scrollbar-color:rgb(138,138,138) #785978;scrollbar-width:10px}.animated[_ngcontent-%COMP%]{animation-duration:1s;animation-fill-mode:both}.fast[_ngcontent-%COMP%]{animation-duration:.3s;animation-fill-mode:both}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}.fadeIn[_ngcontent-%COMP%]{animation-name:fadeIn}"]}),i})();const Ny=function(i){return{"background-color":i}};let Dy=(()=>{class i{constructor(){this.onColorClick=new u.vpe}ngOnInit(){}eventoClick(){this.habilitado&&(this.habilitado=!1,this.onColorClick.emit(this.colorHexa))}}return i.\u0275fac=function(s){return new(s||i)},i.\u0275cmp=u.Xpm({type:i,selectors:[["app-colores"]],inputs:{colorHexa:"colorHexa",habilitado:"habilitado"},outputs:{onColorClick:"onColorClick"},decls:5,vars:3,consts:[[1,"row"],[1,"contenedor","col-sm",3,"click"],[1,"color",3,"ngStyle"]],template:function(s,o){1&s&&(u.TgZ(0,"div",0),u.TgZ(1,"div",1),u.NdJ("click",function(){return o.eventoClick()}),u.TgZ(2,"div",2),u.TgZ(3,"span"),u._uU(4,"?"),u.qZA(),u.qZA(),u.qZA(),u.qZA()),2&s&&(u.xp6(2),u.Q6J("ngStyle",u.VKq(1,Ny,o.colorHexa)))},directives:[oe.PC],styles:[".contenedor[_ngcontent-%COMP%]{width:100px;height:100px;padding:10%;border:rgba(50,50,50,.4) solid 1px;border-radius:8px;box-shadow:0 0 108px -47px #000000bf}.color[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;justify-content:center;align-items:center;border-radius:8px}span[_ngcontent-%COMP%]{color:#000000ef;font-size:4em}.contenedor[_ngcontent-%COMP%]{transition:transform .1s}.contenedor[_ngcontent-%COMP%]:hover{transform:scale(1.05);cursor:pointer}"]}),i})();function Py(i,r){if(1&i){const s=u.EpF();u.TgZ(0,"app-colores",14),u.NdJ("onColorClick",function(a){return u.CHM(s),u.oxw(2).colorClick(a)}),u.qZA()}if(2&i){const s=r.$implicit,o=u.oxw(2);u.Q6J("colorHexa",s)("habilitado",o.isJugando)}}function Oy(i,r){if(1&i&&(u.TgZ(0,"div"),u.TgZ(1,"h2"),u._uU(2,"Opciones:"),u.qZA(),u.YNc(3,Py,1,2,"app-colores",13),u.qZA()),2&i){const s=u.oxw();u.xp6(3),u.Q6J("ngForOf",s.colores)}}function My(i,r){if(1&i&&(u.TgZ(0,"div",15),u.TgZ(1,"span"),u._uU(2),u.qZA(),u.qZA()),2&i){const s=u.oxw();u.xp6(2),u.Oqu(s.mensajeFinal)}}function Ly(i,r){if(1&i){const s=u.EpF();u.TgZ(0,"button",16),u.NdJ("click",function(){return u.CHM(s),u.oxw().empezarJuego()}),u._UZ(1,"i",17),u.qZA()}}const qy=function(){return["/home"]};function Fy(i,r){1&i&&(u.TgZ(0,"button",18),u._uU(1,"Salir"),u.qZA()),2&i&&u.Q6J("routerLink",u.DdM(1,qy))}let Ry=(()=>{class i{constructor(s){this.res=s,this.dificultad=4,this.oportunidades=3,this.isJugando=!0,this.colores=[],this.ganador="",this.intentos=0,this.unColor=[],this.mensajeFinal="",this.smsFinal=!1,this.puntos=0}ngOnInit(){this.empezarJuego()}empezarJuego(){this.smsFinal=!1,this.colores=[],this.ganador="",this.intentos=0,this.isJugando=!0,this.mensajeFinal="",console.log("inicie");for(let o=1;o<=this.dificultad;o++)this.colores.push(this.generarColoresRandom());var s=Math.floor(Math.random()*(this.dificultad-1))+1;this.ganador=this.colores[s]}colorClick(s){return this.intentos++,this.oportunidades==this.intentos?(this.perdiste(),void(this.isJugando=!1)):s==this.ganador?(this.ganaste(),void(this.isJugando=!1)):void 0}ganaste(){this.smsFinal=!0,this.mensajeFinal="BIEN!! HAZ GANADO!!!",this.puntos++,this.res.agregarResultado("Win","Colores")}perdiste(){this.smsFinal=!0,this.mensajeFinal="SE TE ACABARON LOS INTENTOS!!! ",this.res.agregarResultado("Lose","Colores")}generarColoresRandom(){const o="0123456789ABCDEF";var a="";for(let c=0;c<4;c++)a+=o.charAt(Math.floor(Math.random()*o.length));return"#"+a}}return i.\u0275fac=function(s){return new(s||i)(u.Y36(Vi))},i.\u0275cmp=u.Xpm({type:i,selectors:[["app-adivinar-color"]],decls:41,vars:7,consts:[[1,"container"],[1,"row"],[1,"col-sm-4"],[4,"ngIf"],["class","mensaje lose",4,"ngIf"],["type","submit","class","col btn",3,"click",4,"ngIf"],["type","submit","class","col btn","routerLinkActive","router-link-active",3,"routerLink",4,"ngIf"],[1,"my-5","pt-5","text-muted","text-center","text-small"],[1,"mb-1"],[1,"list-inline"],[1,"list-inline-item"],["href","https://github.com/matirue/miSalaDeJuegos"],["href","https://www.linkedin.com/in/matias-mauro-rueda-b85253180/"],[3,"colorHexa","habilitado","onColorClick",4,"ngFor","ngForOf"],[3,"colorHexa","habilitado","onColorClick"],[1,"mensaje","lose"],["type","submit",1,"col","btn",3,"click"],[1,"fas","fa-undo"],["type","submit","routerLinkActive","router-link-active",1,"col","btn",3,"routerLink"]],template:function(s,o){1&s&&(u.TgZ(0,"div",0),u.TgZ(1,"div",1),u.TgZ(2,"div",2),u._UZ(3,"br"),u.TgZ(4,"div",0),u.TgZ(5,"h4"),u._uU(6),u.qZA(),u.qZA(),u._UZ(7,"br"),u._UZ(8,"br"),u._UZ(9,"br"),u.TgZ(10,"h2"),u._uU(11," El color del siguiente c\xf3digo: "),u.TgZ(12,"strong"),u.TgZ(13,"b"),u._uU(14),u.qZA(),u.qZA(),u._uU(15," es ... "),u.qZA(),u._UZ(16,"br"),u._UZ(17,"br"),u.qZA(),u.TgZ(18,"div",2),u.YNc(19,Oy,4,1,"div",3),u._UZ(20,"br"),u._UZ(21,"br"),u.YNc(22,My,3,1,"div",4),u._UZ(23,"br"),u.YNc(24,Ly,2,0,"button",5),u.YNc(25,Fy,2,2,"button",6),u._UZ(26,"br"),u._UZ(27,"br"),u.qZA(),u.TgZ(28,"div",2),u._UZ(29,"app-chat"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(30,"footer",7),u.TgZ(31,"p",8),u._uU(32,"\xa9 Rueda - 2021"),u.qZA(),u.TgZ(33,"ul",9),u.TgZ(34,"li",10),u.TgZ(35,"a",11),u._uU(36,"GitHub"),u.qZA(),u.qZA(),u._uU(37,"- "),u.TgZ(38,"li",10),u.TgZ(39,"a",12),u._uU(40,"LinkedIn"),u.qZA(),u.qZA(),u.qZA(),u.qZA()),2&s&&(u.xp6(6),u.AsE("Intentos: ",o.intentos,"/",o.oportunidades,""),u.xp6(8),u.Oqu(o.ganador),u.xp6(5),u.Q6J("ngIf",!o.smsFinal),u.xp6(3),u.Q6J("ngIf",o.smsFinal),u.xp6(2),u.Q6J("ngIf",o.smsFinal),u.xp6(1),u.Q6J("ngIf",o.smsFinal))},directives:[oe.O5,Ca,oe.sg,Dy,$e.Od,$e.rH],styles:["h1[_ngcontent-%COMP%]{font-size:42px;font-style:italic}h2[_ngcontent-%COMP%]{color:#7b1d1d;margin-top:.5em;font-size:30px;font-weight:500}h3[_ngcontent-%COMP%]{color:#7b1d1d;margin-bottom:1em;text-align:center;font-size:25px;font-weight:300}h4[_ngcontent-%COMP%]{color:#7b1d1d;margin-top:.5em;font-weight:bold;font-size:1.5rem}strong[_ngcontent-%COMP%]{font-style:normal;font-weight:bolder!important}hr[_ngcontent-%COMP%]{width:95%;margin:0 auto}section[_ngcontent-%COMP%]{margin:3em auto 0}.cont-colores[_ngcontent-%COMP%]{margin:0 auto;display:flex;justify-content:space-around;align-items:initials}.controles[_ngcontent-%COMP%]{margin:4em auto;display:flex;justify-content:space-around;width:70%;padding:.3em;border-radius:10px;border:rgba(200,200,200,.9) solid 1px}.controles[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:8em;padding:.3em;display:flex;flex-direction:column;justify-content:flex-end}.controles[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:5em}.controles[_ngcontent-%COMP%]:nth-child(0){border-right:rgba(200,200,200,.9) solid 1px}button[_ngcontent-%COMP%]{font-size:1rem;padding:.6rem 1.2rem;background-color:#7b1d1d;margin:.3rem .6rem;border-radius:.5rem;border:1px solid #666;color:#fff;filter:drop-shadow(0px 0px 2px#666);font-weight:400}div[_ngcontent-%COMP%]   .mensaje[_ngcontent-%COMP%]{border:1px solid #666;font-size:2rem;padding:1rem 2rem;color:#fff;text-align:center;font-weight:900;border-radius:.5rem;background-color:#7b1d1d}"]}),i})();function Uy(i,r){if(1&i&&(u.TgZ(0,"div",23),u.TgZ(1,"span"),u._uU(2),u.qZA(),u.qZA()),2&i){const s=u.oxw();u.xp6(2),u.Oqu(s.message)}}function Zy(i,r){if(1&i&&(u.TgZ(0,"div",24),u.TgZ(1,"span"),u._uU(2),u.qZA(),u.qZA()),2&i){const s=u.oxw();u.xp6(2),u.Oqu(s.message)}}function By(i,r){if(1&i){const s=u.EpF();u.TgZ(0,"button",25),u.NdJ("click",function(){const c=u.CHM(s).$implicit;return u.oxw().checkLetter(c)}),u._uU(1),u.qZA()}if(2&i){const s=r.$implicit;u.xp6(1),u.Oqu(s)}}const Vy=function(){return["/home"]};function jy(i,r){if(1&i){const s=u.EpF();u.TgZ(0,"div",10),u.TgZ(1,"button",26),u._uU(2,"Salir"),u.qZA(),u.TgZ(3,"button",27),u.NdJ("click",function(){return u.CHM(s),u.oxw().restartGame()}),u._UZ(4,"i",28),u.qZA(),u.qZA()}2&i&&(u.xp6(1),u.Q6J("routerLink",u.DdM(1,Vy)))}let zy=(()=>{class i{constructor(s){this.res=s,this.title="Ahorcado",this.puntos=0,this.diccPosition=0,this.palClave=["PROGRAMACION","ANGULAR","MAPAS","INDEPENDIENTE","NARANJA","PERRO","XIFOIDEO","PERSONA","LIBERTAD","PALABRA","OBJETO","PERDISTE","GANASTE","ELECTROCARDIOGRAMA","CALEIDOSCOPIO"],this.palabra="",this.palabraOculta="",this.intentos=8,this.intntoes_usuarios=0,this.win=!1,this.lose=!1,this.message="",this.letters=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","\xd1","O","P","Q","R","S","T","U","V","W","X","Y","Z"],this.selectWord()}ngOnInit(){}setAttempts(s){this.intentos=s}getAttempts(){return this.intentos}checkLetter(s){this.palabra.includes(s)||(this.intntoes_usuarios+=1),this.replaceWord(s)}selectWord(){this.diccPosition=Math.floor(15*Math.random()),this.palabra=this.palClave[this.diccPosition],this.palabraOculta="_ ".repeat(this.palabra.length)}winVerification(){this.palabraOculta.split(" ").join("")==this.palabra&&(this.res.agregarResultado("Win","Ahorcado"),this.message="Ganaste",this.puntos=1,this.win=!0,this.hideInterface()),this.intntoes_usuarios>=this.intentos&&(this.res.agregarResultado("Lose","Ahorcado"),this.intntoes_usuarios=8,this.message="Perdiste",this.lose=!0,this.hideInterface())}hideInterface(){if(1==(this.win||this.lose)){const s=document.querySelector(".letters__container");null!=s&&s.classList.add("hide")}}replaceWord(s){const o=this.palabraOculta.split(" ");for(let a=0;a<this.palabra.length;a++)this.palabra[a]===s&&(o[a]=s);this.palabraOculta=o.join(" "),this.winVerification()}restartGame(){var s;this.win=!1,this.lose=!1,this.intntoes_usuarios=0,null===(s=document.querySelector(".letters__container"))||void 0===s||s.classList.remove("hide"),this.selectWord()}}return i.\u0275fac=function(s){return new(s||i)(u.Y36(Vi))},i.\u0275cmp=u.Xpm({type:i,selectors:[["app-ahorcado"]],decls:42,vars:9,consts:[[1,"container"],[1,"row"],[1,"col-sm-3"],[1,"message"],[1,"counter"],[1,"img__container"],["alt","",3,"src"],["class","mensaje win",4,"ngIf"],["class","mensaje lose",4,"ngIf"],[1,"col-sm-5"],[1,"row","justify-content-center"],[1,"h1Plabra"],[1,"word__container",2,"align-items","center"],[1,"letters"],["class","letter_button",3,"click",4,"ngFor","ngForOf"],["class","row  justify-content-center",4,"ngIf"],[1,"col-sm-4"],[1,"my-5","pt-5","text-muted","text-center","text-small"],[1,"mb-1"],[1,"list-inline"],[1,"list-inline-item"],["href","https://github.com/matirue/miSalaDeJuegos"],["href","https://www.linkedin.com/in/matias-mauro-rueda-b85253180/"],[1,"mensaje","win"],[1,"mensaje","lose"],[1,"letter_button",3,"click"],["type","submit","routerLinkActive","router-link-active",1,"botones_resultados","col-3",3,"routerLink"],["type","submit",1,"botones_resultados","col-3",3,"click"],[1,"fas","fa-undo"]],template:function(s,o){1&s&&(u.TgZ(0,"div",0),u.TgZ(1,"div",1),u.TgZ(2,"div",2),u.TgZ(3,"span",3),u._uU(4,"Puntos: "),u.qZA(),u.TgZ(5,"span",4),u._uU(6),u.qZA(),u.TgZ(7,"div",5),u._UZ(8,"img",6),u.TgZ(9,"span",3),u._uU(10,"Intentos: "),u.qZA(),u.TgZ(11,"span",4),u._uU(12),u.qZA(),u._UZ(13,"br"),u._UZ(14,"br"),u.YNc(15,Uy,3,1,"div",7),u.YNc(16,Zy,3,1,"div",8),u.qZA(),u.qZA(),u.TgZ(17,"div",9),u.TgZ(18,"div",10),u._UZ(19,"br"),u._UZ(20,"br"),u.TgZ(21,"h1",11),u._uU(22,"Palabra..."),u.qZA(),u.TgZ(23,"div",12),u.TgZ(24,"h1"),u._uU(25),u.qZA(),u.qZA(),u.TgZ(26,"div",13),u.YNc(27,By,2,1,"button",14),u.qZA(),u.YNc(28,jy,5,2,"div",15),u.qZA(),u.qZA(),u.TgZ(29,"div",16),u._UZ(30,"app-chat"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(31,"footer",17),u.TgZ(32,"p",18),u._uU(33,"\xa9 Rueda - 2021"),u.qZA(),u.TgZ(34,"ul",19),u.TgZ(35,"li",20),u.TgZ(36,"a",21),u._uU(37,"GitHub"),u.qZA(),u.qZA(),u._uU(38,"- "),u.TgZ(39,"li",20),u.TgZ(40,"a",22),u._uU(41,"LinkedIn"),u.qZA(),u.qZA(),u.qZA(),u.qZA()),2&s&&(u.xp6(6),u.Oqu(o.puntos),u.xp6(2),u.MGl("src","../assets/imagenes_juegos/ahorcado/",o.intntoes_usuarios,".png",u.LSH),u.xp6(4),u.AsE("",o.intntoes_usuarios,"/",o.intentos,""),u.xp6(3),u.Q6J("ngIf",o.win),u.xp6(1),u.Q6J("ngIf",o.lose),u.xp6(9),u.hij(" ",o.palabraOculta," "),u.xp6(2),u.Q6J("ngForOf",o.letters),u.xp6(1),u.Q6J("ngIf",o.win||o.lose))},directives:[oe.O5,oe.sg,Ca,$e.Od,$e.rH],styles:[".img__container[_ngcontent-%COMP%]{display:flex;flex-flow:column nowrap;align-items:center}img[_ngcontent-%COMP%]{height:300px}div[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{font-size:2rem;font-weight:900;margin-bottom:.5rem}div[_ngcontent-%COMP%]   .counter[_ngcontent-%COMP%]{color:#7b1d1d;font-weight:bold;font-size:1.5rem}div[_ngcontent-%COMP%]   .h1Plabra[_ngcontent-%COMP%]{color:#7b1d1d}div[_ngcontent-%COMP%]   .letters[_ngcontent-%COMP%]{display:flex;flex-flow:row wrap;justify-content:center;padding:.3rem .6rem}div[_ngcontent-%COMP%]   .mensaje[_ngcontent-%COMP%]{border:1px solid #666;font-size:2rem;padding:1rem 2rem;color:#fff;text-align:center;font-weight:900;border-radius:.5rem;background-color:#7b1d1d}div[_ngcontent-%COMP%]   .letter_button[_ngcontent-%COMP%]{font-size:1rem;padding:.6rem 1.2rem;background-color:#7b1d1d;margin:.3rem .6rem;border-radius:.5rem;border:1px solid #666;color:#fff;filter:drop-shadow(0px 0px 2px#666);font-weight:400}div[_ngcontent-%COMP%]   .botones_resultados[_ngcontent-%COMP%]{align-items:center;margin-top:1.5rem;display:flex;padding:1rem 2rem;text-align:center;border-radius:.5rem;border:1px solid #666;filter:drop-shadow(0px 1px 2px #666);font-size:1rem;font-weight:700;letter-spacing:.5px;color:#fff;background-color:#7b1d1d}"]}),i})();var Ky=B(8259),Pf=B.n(Ky);let Hy=(()=>{class i{constructor(s,o){this.authSrv=s,this.authFire=o,this.unaEncuesta=[],this.url="/encuesta"}cargarEncuestas(){return this.itemCollecttion=this.authFire.collection(this.url),this.itemCollecttion.valueChanges().pipe((0,fe.U)(s=>{this.unaEncuesta=[];for(let o of s)this.unaEncuesta.unshift(o);return this.unaEncuesta}))}agregarEncuesta(s,o,a,c,l,f,m,y){var w;return null===(w=this.itemCollecttion)||void 0===w?void 0:w.add({uid:this.authSrv.usuario.uid,umail:this.authSrv.usuario.email,nombre:s,apellido:o,edad:a,telefono:c,juego:l,puntuacion:f,opinion:m,terminos:y})}}return i.\u0275fac=function(s){return new(s||i)(u.LFG(Df.e),u.LFG(wl))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Gy(i,r){1&i&&(u.TgZ(0,"small",50),u._uU(1," El nombre es requerido "),u.qZA())}function $y(i,r){1&i&&(u.TgZ(0,"small",50),u._uU(1," El apellido es requerido "),u.qZA())}function Qy(i,r){1&i&&(u.TgZ(0,"small",50),u._uU(1," La edad es requerida "),u.qZA())}function Jy(i,r){1&i&&(u.TgZ(0,"small",50),u._uU(1," La edad debe ser entre 18 a 110 a\xf1os "),u.qZA())}function Wy(i,r){1&i&&(u.TgZ(0,"small",50),u._uU(1," El numero de telefono es requerido "),u.qZA())}function Yy(i,r){1&i&&(u.TgZ(0,"small",50),u._uU(1," El numero de telefono solo debe contener numeros "),u.qZA())}function Xy(i,r){1&i&&(u.TgZ(0,"small",50),u._uU(1," El juego es requerido "),u.qZA())}function ew(i,r){1&i&&(u.TgZ(0,"small",50),u._uU(1," La puntuaci\xf3n del juego es requerido "),u.qZA())}function tw(i,r){1&i&&(u.TgZ(0,"small",50),u._uU(1," Su opini\xf3n es requerida "),u.qZA())}function nw(i,r){1&i&&(u.TgZ(0,"small",50),u._uU(1," Le falto aceptar los t\xe9rminos y condiciones "),u.qZA())}let rw=(()=>{class i{constructor(s,o,a){this.router=s,this.frB=o,this.unaEncuesta=a,this.unaEncuesta.cargarEncuestas().subscribe(()=>{})}ngOnInit(){this.formulario=this.frB.group({nombre:["",[X.kI.required]],apellido:["",X.kI.required],edad:["",[X.kI.required,X.kI.min(18),X.kI.max(110)]],telefono:["",[X.kI.required]],juego:["",[X.kI.required]],puntuacion:["",[X.kI.required]],opinion:["",[X.kI.required]],terminos:["",X.kI.required]})}aceptar(){var s,o,a,c,l,f,m,y,w,b=null===(s=this.formulario)||void 0===s?void 0:s.controls.nombre.value,_=null===(o=this.formulario)||void 0===o?void 0:o.controls.apellido.value,E=null===(a=this.formulario)||void 0===a?void 0:a.controls.edad.value,k=null===(c=this.formulario)||void 0===c?void 0:c.controls.telefono.value,L=this.obtenerValor(null===(l=this.formulario)||void 0===l?void 0:l.controls.juego.value),Z=null===(f=this.formulario)||void 0===f?void 0:f.controls.puntuacion.value,ie=null===(m=this.formulario)||void 0===m?void 0:m.controls.opinion.value,Ve=null===(y=this.formulario)||void 0===y?void 0:y.controls.terminos.value;null===(w=this.unaEncuesta.agregarEncuesta(b,_,E,k,L,Z,ie,Ve))||void 0===w||w.finally(()=>{this.muestraMensaje("correcta")}).catch(Pt=>{this.muestraMensaje("error")})}obtenerValor(s){switch(s){case"A":s="Ahorcado";break;case"M":s="Mayor o Menor";break;case"C":s="Colores";break;case"P":s="Preguntados"}return s}muestraMensaje(s){"correcta"==s&&Pf().fire({icon:"success",title:"\xa1Muchas gracias por su tiempo!",text:"Encuesta enviada exictosamente! "}).finally(()=>{this.router.navigate(["/home"])}),"error"==s&&Pf().fire({icon:"error",title:"ERROR!",text:"Ocurrio un error en la carga de la encuesta"}).finally(()=>{this.router.navigate(["/home"])})}}return i.\u0275fac=function(s){return new(s||i)(u.Y36($e.F0),u.Y36(X.qu),u.Y36(Hy))},i.\u0275cmp=u.Xpm({type:i,selectors:[["app-encuesta"]],decls:93,vars:12,consts:[[1,"container"],[3,"formGroup","ngSubmit"],[1,"row"],[1,"col-md-12","mb-5"],[1,"row","formulario"],[1,"col-md-6","mb-3"],["for","nombre",1,"form-label"],["type","text","id","nombre","placeholder","Ingrese nombre","formControlName","nombre",1,"form-control"],["class","invalid",4,"ngIf"],["for","apellido",1,"form-label"],["type","text","id","apellido","placeholder","Ingrese apellido","formControlName","apellido",1,"form-control"],["for","edad",1,"form-label"],["type","number","id","edad","placeholder","Ingrese edad","formControlName","edad",1,"form-control"],["for","telefono",1,"form-label"],["type","text","id","telefono","placeholder","Ingrese telefono","formControlName","telefono","maxlength","10",1,"form-control"],[1,"col-md-6","mb-5"],["for","juego",1,"form-label"],["id","juego","formControlName","juego",1,"form-select"],["value","","selected","true"],["value","A"],["value","M"],["value","C"],["value","P"],["for","clasificacion",1,"form-label"],[1,"clasificacion"],["id","radio1","type","radio","name","puntuacion","value","5","formControlName","puntuacion"],["for","radio1","id","star","title","Hello This Will Have Some Value"],["id","radio2","type","radio","name","puntuacion","value","4","formControlName","puntuacion"],["for","radio2","id","star"],["id","radio3","type","radio","name","puntuacion","value","3","formControlName","puntuacion"],["for","radio3","id","star"],["id","radio4","type","radio","name","puntuacion","value","2","formControlName","puntuacion"],["for","radio4","id","star"],["id","radio5","type","radio","name","puntuacion","value","1","checked","","formControlName","puntuacion"],["for","radio5","id","star"],[1,"form-floating"],["placeholder","Leave a comment here","id","floatingTextarea2","formControlName","opinion","maxlength","140",1,"form-control",2,"height","120px"],["for","floatingTextarea2"],[1,"row","mt-4"],[1,"form-check"],["type","checkbox","id","terminos","formControlName","terminos",1,"form-check-input"],["for","recordar","for","terminos",1,"form-check-label"],[1,"col-md-12","d-grid","gap-2"],["type","submit",1,"btn","btn-primary","btn-block",3,"disabled"],[1,"my-5","pt-5","text-muted","text-center","text-small"],[1,"mb-1"],[1,"list-inline"],[1,"list-inline-item"],["href","https://github.com/matirue/miSalaDeJuegos"],["href","https://www.linkedin.com/in/matias-mauro-rueda-b85253180/"],[1,"invalid"]],template:function(s,o){if(1&s&&(u._UZ(0,"br"),u.TgZ(1,"div",0),u.TgZ(2,"form",1),u.NdJ("ngSubmit",function(){return o.aceptar()}),u.TgZ(3,"div",2),u.TgZ(4,"div",3),u.TgZ(5,"h2"),u.TgZ(6,"b"),u._uU(7,"Encuesta"),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(8,"div",4),u.TgZ(9,"div",5),u.TgZ(10,"label",6),u._uU(11,"Nombre"),u.qZA(),u._UZ(12,"input",7),u.YNc(13,Gy,2,0,"small",8),u.qZA(),u.TgZ(14,"div",5),u.TgZ(15,"label",9),u._uU(16,"Apellido"),u.qZA(),u._UZ(17,"input",10),u.YNc(18,$y,2,0,"small",8),u.qZA(),u.TgZ(19,"div",5),u.TgZ(20,"label",11),u._uU(21,"Edad"),u.qZA(),u._UZ(22,"input",12),u.YNc(23,Qy,2,0,"small",8),u.YNc(24,Jy,2,0,"small",8),u.qZA(),u.TgZ(25,"div",5),u.TgZ(26,"label",13),u._uU(27,"Telefono"),u.qZA(),u._UZ(28,"input",14),u.YNc(29,Wy,2,0,"small",8),u.YNc(30,Yy,2,0,"small",8),u.qZA(),u.TgZ(31,"div",15),u.TgZ(32,"label",16),u._uU(33,"Seleccione el juego \xa0\xa0"),u.qZA(),u.TgZ(34,"select",17),u.TgZ(35,"option",18),u._uU(36,"Seleccione uno"),u.qZA(),u.TgZ(37,"option",19),u._uU(38,"Ahorcado"),u.qZA(),u.TgZ(39,"option",20),u._uU(40,"Mayor o Menor"),u.qZA(),u.TgZ(41,"option",21),u._uU(42,"Colores"),u.qZA(),u.TgZ(43,"option",22),u._uU(44,"Preguntados"),u.qZA(),u.qZA(),u.YNc(45,Xy,2,0,"small",8),u.qZA(),u.TgZ(46,"div",15),u.TgZ(47,"label",23),u._uU(48,"Puntuaci\xf3n del juego\xa0\xa0"),u.qZA(),u.TgZ(49,"p",24),u._UZ(50,"input",25),u.TgZ(51,"label",26),u._uU(52,"\u2605"),u.qZA(),u._UZ(53,"input",27),u.TgZ(54,"label",28),u._uU(55,"\u2605"),u.qZA(),u._UZ(56,"input",29),u.TgZ(57,"label",30),u._uU(58,"\u2605"),u.qZA(),u._UZ(59,"input",31),u.TgZ(60,"label",32),u._uU(61,"\u2605"),u.qZA(),u._UZ(62,"input",33),u.TgZ(63,"label",34),u._uU(64,"\u2605"),u.qZA(),u.qZA(),u.YNc(65,ew,2,0,"small",8),u.qZA(),u.TgZ(66,"div",3),u.TgZ(67,"div",35),u._UZ(68,"textarea",36),u.TgZ(69,"label",37),u._uU(70,"Ingrese su opini\xf3n o mejoras\xa0\xa0"),u.qZA(),u.qZA(),u.YNc(71,tw,2,0,"small",8),u.qZA(),u.qZA(),u.TgZ(72,"div",38),u.TgZ(73,"div",3),u.TgZ(74,"div",39),u._UZ(75,"input",40),u.TgZ(76,"label",41),u._uU(77," Aceptar t\xe9rminos y condiciones "),u.qZA(),u.YNc(78,nw,2,0,"small",8),u.qZA(),u.qZA(),u.TgZ(79,"div",42),u.TgZ(80,"button",43),u._uU(81," Aceptar "),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(82,"footer",44),u.TgZ(83,"p",45),u._uU(84,"\xa9 Rueda - 2021"),u.qZA(),u.TgZ(85,"ul",46),u.TgZ(86,"li",47),u.TgZ(87,"a",48),u._uU(88,"GitHub"),u.qZA(),u.qZA(),u._uU(89,"- "),u.TgZ(90,"li",47),u.TgZ(91,"a",49),u._uU(92,"LinkedIn"),u.qZA(),u.qZA(),u.qZA(),u.qZA()),2&s){let a,c,l,f,m,y,w,b,_,E;u.xp6(2),u.Q6J("formGroup",o.formulario),u.xp6(11),u.Q6J("ngIf",(null==(a=o.formulario.get("nombre"))||null==a.errors?null:a.errors.required)&&(null==(a=o.formulario.get("nombre"))?null:a.touched)),u.xp6(5),u.Q6J("ngIf",(null==(c=o.formulario.get("apellido"))||null==c.errors?null:c.errors.required)&&(null==(c=o.formulario.get("apellido"))?null:c.touched)),u.xp6(5),u.Q6J("ngIf",(null==(l=o.formulario.get("edad"))||null==l.errors?null:l.errors.required)&&(null==(l=o.formulario.get("edad"))?null:l.touched)),u.xp6(1),u.Q6J("ngIf",(null==(f=o.formulario.get("edad"))||null==f.errors?null:f.errors.min)||(null==(f=o.formulario.get("edad"))||null==f.errors?null:f.errors.max)&&(null==(f=o.formulario.get("edad"))?null:f.touched)),u.xp6(5),u.Q6J("ngIf",(null==(m=o.formulario.get("telefono"))||null==m.errors?null:m.errors.required)&&(null==(m=o.formulario.get("telefono"))?null:m.touched)),u.xp6(1),u.Q6J("ngIf",(null==(y=o.formulario.get("telefono"))||null==y.errors?null:y.errors.pattern)&&(null==(y=o.formulario.get("telefono"))?null:y.touched)),u.xp6(15),u.Q6J("ngIf",(null==(w=o.formulario.get("juego"))||null==w.errors?null:w.errors.required)&&(null==(w=o.formulario.get("juego"))?null:w.touched)),u.xp6(20),u.Q6J("ngIf",(null==(b=o.formulario.get("puntuacion"))||null==b.errors?null:b.errors.required)&&(null==(b=o.formulario.get("puntuacion"))?null:b.touched)),u.xp6(6),u.Q6J("ngIf",(null==(_=o.formulario.get("opinion"))||null==_.errors?null:_.errors.required)&&(null==(_=o.formulario.get("opinion"))?null:_.touched)),u.xp6(7),u.Q6J("ngIf",(null==(E=o.formulario.get("terminos"))||null==E.errors?null:E.errors.required)&&(null==(E=o.formulario.get("terminos"))?null:E.touched)),u.xp6(2),u.Q6J("disabled",o.formulario.invalid)}},directives:[X._Y,X.JL,X.sg,X.Fj,X.JJ,X.u,oe.O5,X.wV,X.nD,X.EJ,X.YN,X.Kr,X._,X.Wl],styles:[".container[_ngcontent-%COMP%]{max-width:900px;padding:50px;box-shadow:2px 2px 32px -6px #92222299}h2[_ngcontent-%COMP%]{color:#92222299}.invalid[_ngcontent-%COMP%]{color:red}#star[_ngcontent-%COMP%]{font-size:300%!important}p.clasificacion[_ngcontent-%COMP%]{position:relative;overflow:hidden;display:inline-block}p.clasificacion[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{position:absolute;top:-100px}p.clasificacion[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{float:right;color:#616060}p.clasificacion[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:hover, p.clasificacion[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:hover ~ label[_ngcontent-%COMP%], p.clasificacion[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ label[_ngcontent-%COMP%]{color:#852828}div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:1rem;padding:.6rem 1.2rem;background-color:#7b1d1d;margin:.3rem .6rem;border-radius:.5rem;border:1px solid #666;color:#fff;filter:drop-shadow(0px 0px 2px#666);font-weight:400}div[_ngcontent-%COMP%]   .botones_resultados[_ngcontent-%COMP%]{align-items:center;margin-top:1.5rem;display:flex;padding:1rem 2rem;text-align:center;border-radius:.5rem;border:1px solid #666;filter:drop-shadow(0px 1px 2px #666);font-size:1rem;font-weight:700;letter-spacing:.5px;color:#fff;background-color:#7b1d1d}"]}),i})();function sw(i,r){if(1&i&&(u.TgZ(0,"div",19),u.TgZ(1,"span"),u._uU(2),u.qZA(),u.qZA()),2&i){const s=u.oxw();u.xp6(2),u.Oqu(s.mensajePuntosWin)}}function iw(i,r){if(1&i&&(u.TgZ(0,"div",20),u.TgZ(1,"span"),u._uU(2),u.qZA(),u.qZA()),2&i){const s=u.oxw();u.xp6(2),u.Oqu(s.mensajePuntosLose)}}function ow(i,r){1&i&&(u.TgZ(0,"h2"),u._uU(1,"La siguiente carta es:"),u.qZA())}function aw(i,r){if(1&i&&(u.TgZ(0,"div",20),u.TgZ(1,"span"),u._uU(2),u.qZA(),u.qZA()),2&i){const s=u.oxw();u.xp6(2),u.Oqu(s.mensajeFinal)}}function cw(i,r){if(1&i){const s=u.EpF();u.TgZ(0,"button",21),u.NdJ("click",function(){return u.CHM(s),u.oxw().Jugar("mayor")}),u._uU(1,"Mayor"),u.qZA()}}function uw(i,r){if(1&i){const s=u.EpF();u.TgZ(0,"button",21),u.NdJ("click",function(){return u.CHM(s),u.oxw().Jugar("menor")}),u._uU(1,"Menor"),u.qZA()}}function lw(i,r){if(1&i){const s=u.EpF();u.TgZ(0,"button",21),u.NdJ("click",function(){return u.CHM(s),u.oxw().Repetir()}),u._UZ(1,"i",22),u.qZA()}}const hw=function(){return["/home"]};function dw(i,r){1&i&&(u.TgZ(0,"button",23),u._uU(1,"Salir"),u.qZA()),2&i&&u.Q6J("routerLink",u.DdM(1,hw))}let fw=(()=>{class i{constructor(s){this.res=s,this.puntos=0,this.vidas=5,this.vidasTotal=5,this.win=!1,this.lose=!1,this.arrayNumeros=[1,2,3,4,5,6,7,8,9,10,11,12,13],this.numero=0,this.siguienteNumero=0,this.mensajePuntosWin="",this.mensajePuntosLose="",this.mensajeFinal="",this.smsFinal=!1,this.numero=this.arrayNumeros[Math.floor(Math.random()*this.arrayNumeros.length)]}ngOnInit(){}Jugar(s){this.SiguienteRonda(this.numero,s)}SiguienteRonda(s,o){this.siguienteNumero=this.arrayNumeros[Math.floor(Math.random()*this.arrayNumeros.length)],"menor"==o&&this.siguienteNumero<s&&(this.puntos++,this.mensajePuntosWin="BIEN, suma punto",this.win=!0,this.lose=!1),"menor"==o&&this.siguienteNumero>s&&(this.mensajePuntosLose="UHH, no suma punto",this.vidas=this.vidas-1,this.lose=!0,this.win=!1),"mayor"==o&&this.siguienteNumero>s&&(this.puntos++,this.mensajePuntosWin="BIEN, suma punto",this.win=!0,this.lose=!1),"mayor"==o&&this.siguienteNumero<s&&(this.mensajePuntosLose="UHH, no suma punto",this.vidas=this.vidas-1,this.lose=!0,this.win=!1),this.numero=this.siguienteNumero,5===this.puntos&&(this.res.agregarResultado("Win","Mayor o Menor"),this.mensajeFinal="GANASTE!!!",this.smsFinal=!0,this.win=!1,this.lose=!1),0===this.vidas&&(this.res.agregarResultado("Lose","Mayor o Menor"),this.mensajeFinal="Fin del juego!!!",this.smsFinal=!0,this.win=!1,this.lose=!1)}Repetir(){this.vidas=5,this.puntos=0,this.mensajePuntosLose="",this.mensajePuntosWin="",this.win=!1,this.lose=!1,this.smsFinal=!1}}return i.\u0275fac=function(s){return new(s||i)(u.Y36(Vi))},i.\u0275cmp=u.Xpm({type:i,selectors:[["app-mayor-menor"]],decls:36,vars:12,consts:[[1,"container"],[1,"row"],[1,"col-sm-3"],[1,"img__container"],[1,"counter"],["alt","",3,"src"],["class","mensaje win",4,"ngIf"],["class","mensaje lose",4,"ngIf"],[1,"col-sm-5"],[4,"ngIf"],["type","submit","class","col btn",3,"click",4,"ngIf"],["type","submit","class","col btn","routerLinkActive","router-link-active",3,"routerLink",4,"ngIf"],[1,"col-sm-4"],[1,"my-5","pt-5","text-muted","text-center","text-small"],[1,"mb-1"],[1,"list-inline"],[1,"list-inline-item"],["href","https://github.com/matirue/miSalaDeJuegos"],["href","https://www.linkedin.com/in/matias-mauro-rueda-b85253180/"],[1,"mensaje","win"],[1,"mensaje","lose"],["type","submit",1,"col","btn",3,"click"],[1,"fas","fa-undo"],["type","submit","routerLinkActive","router-link-active",1,"col","btn",3,"routerLink"]],template:function(s,o){1&s&&(u.TgZ(0,"div",0),u.TgZ(1,"div",1),u.TgZ(2,"div",2),u.TgZ(3,"div",3),u.TgZ(4,"span",4),u._uU(5),u.qZA(),u._UZ(6,"img",5),u._UZ(7,"br"),u._UZ(8,"br"),u.YNc(9,sw,3,1,"div",6),u.YNc(10,iw,3,1,"div",7),u.qZA(),u.qZA(),u.TgZ(11,"div",8),u.TgZ(12,"span",4),u._uU(13),u.qZA(),u._UZ(14,"br"),u._UZ(15,"br"),u.YNc(16,ow,2,0,"h2",9),u.YNc(17,aw,3,1,"div",7),u._UZ(18,"br"),u.YNc(19,cw,2,0,"button",10),u.YNc(20,uw,2,0,"button",10),u.YNc(21,lw,2,0,"button",10),u.YNc(22,dw,2,2,"button",11),u.qZA(),u.TgZ(23,"div",12),u._UZ(24,"app-chat"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(25,"footer",13),u.TgZ(26,"p",14),u._uU(27,"\xa9 Rueda - 2021"),u.qZA(),u.TgZ(28,"ul",15),u.TgZ(29,"li",16),u.TgZ(30,"a",17),u._uU(31,"GitHub"),u.qZA(),u.qZA(),u._uU(32,"- "),u.TgZ(33,"li",16),u.TgZ(34,"a",18),u._uU(35,"LinkedIn"),u.qZA(),u.qZA(),u.qZA(),u.qZA()),2&s&&(u.xp6(5),u.AsE(" Vidas: ",o.vidas,"/",o.vidasTotal,""),u.xp6(1),u.MGl("src","../assets/imagenes_juegos/mayorMenor/",o.numero,".png",u.LSH),u.xp6(3),u.Q6J("ngIf",o.win),u.xp6(1),u.Q6J("ngIf",o.lose),u.xp6(3),u.hij(" Puntos: ",o.puntos,""),u.xp6(3),u.Q6J("ngIf",!o.smsFinal),u.xp6(1),u.Q6J("ngIf",o.smsFinal),u.xp6(2),u.Q6J("ngIf",!o.smsFinal),u.xp6(1),u.Q6J("ngIf",!o.smsFinal),u.xp6(1),u.Q6J("ngIf",o.smsFinal),u.xp6(1),u.Q6J("ngIf",o.smsFinal))},directives:[oe.O5,Ca,$e.Od,$e.rH],styles:[".img__container[_ngcontent-%COMP%]{display:flex;flex-flow:column nowrap;align-items:center}img[_ngcontent-%COMP%]{height:300px}div[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{font-size:2rem;font-weight:900;margin-bottom:.5rem}div[_ngcontent-%COMP%]   .counter[_ngcontent-%COMP%]{color:#7b1d1d;font-weight:bold;font-size:1.5rem}div[_ngcontent-%COMP%]   .h1Plabra[_ngcontent-%COMP%]{color:#7b1d1d}div[_ngcontent-%COMP%]   .letters[_ngcontent-%COMP%]{display:flex;flex-flow:row wrap;justify-content:center;padding:.3rem .6rem}div[_ngcontent-%COMP%]   .mensaje[_ngcontent-%COMP%]{border:1px solid #666;font-size:2rem;padding:1rem 2rem;color:#fff;text-align:center;font-weight:900;border-radius:.5rem;background-color:#7b1d1d}div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:1rem;padding:.6rem 1.2rem;background-color:#7b1d1d;margin:.3rem .6rem;border-radius:.5rem;border:1px solid #666;color:#fff;filter:drop-shadow(0px 0px 2px#666);font-weight:400}div[_ngcontent-%COMP%]   .botones_resultados[_ngcontent-%COMP%]{align-items:center;margin-top:1.5rem;display:flex;padding:1rem 2rem;text-align:center;border-radius:.5rem;border:1px solid #666;filter:drop-shadow(0px 1px 2px #666);font-size:1rem;font-weight:700;letter-spacing:.5px;color:#fff;background-color:#7b1d1d}"]}),i})();var mw=B(1841);let pw=(()=>{class i{constructor(s){this.http=s}ObtenerDigimon(){return this.http.get("https://digimon-api.vercel.app/api/digimon")}}return i.\u0275fac=function(s){return new(s||i)(u.LFG(mw.eN))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function gw(i,r){if(1&i){const s=u.EpF();u.TgZ(0,"button",19),u.NdJ("click",function(){return u.CHM(s),u.oxw().Iniciar()}),u._uU(1,"Iniciar Juego"),u.qZA()}}function yw(i,r){if(1&i&&u._UZ(0,"img",20),2&i){const s=u.oxw();u.Q6J("src",s.imgDigimon.img,u.LSH)}}function ww(i,r){if(1&i&&(u.TgZ(0,"h3"),u._uU(1),u.qZA()),2&i){const s=u.oxw();u.xp6(1),u.Oqu(s.hacerPregunta)}}function vw(i,r){if(1&i&&(u.TgZ(0,"div",21),u.TgZ(1,"span"),u._uU(2),u.qZA(),u.qZA()),2&i){const s=u.oxw();u.xp6(2),u.Oqu(s.mensajeWin)}}function bw(i,r){if(1&i&&(u.TgZ(0,"div",22),u.TgZ(1,"span"),u._uU(2),u.qZA(),u.qZA()),2&i){const s=u.oxw();u.xp6(2),u.Oqu(s.mensajeLose)}}function _w(i,r){if(1&i&&(u.TgZ(0,"div",22),u.TgZ(1,"span"),u._uU(2),u.qZA(),u.qZA()),2&i){const s=u.oxw();u.xp6(2),u.Oqu(s.mensajeFinal)}}function xw(i,r){if(1&i){const s=u.EpF();u.TgZ(0,"button",19),u.NdJ("click",function(){return u.CHM(s),u.oxw().Control(2)}),u._uU(1),u.qZA()}if(2&i){const s=u.oxw();u.xp6(1),u.hij("2 ",s.boton_1,"")}}function Tw(i,r){if(1&i){const s=u.EpF();u.TgZ(0,"button",19),u.NdJ("click",function(){return u.CHM(s),u.oxw().Control(3)}),u._uU(1),u.qZA()}if(2&i){const s=u.oxw();u.xp6(1),u.hij("3 ",s.boton_2,"")}}function Iw(i,r){if(1&i){const s=u.EpF();u.TgZ(0,"button",19),u.NdJ("click",function(){return u.CHM(s),u.oxw().Control(4)}),u._uU(1),u.qZA()}if(2&i){const s=u.oxw();u.xp6(1),u.hij("4 ",s.boton_3,"")}}function Ew(i,r){if(1&i){const s=u.EpF();u.TgZ(0,"button",19),u.NdJ("click",function(){return u.CHM(s),u.oxw().Control(5)}),u._uU(1),u.qZA()}if(2&i){const s=u.oxw();u.xp6(1),u.hij("5 ",s.boton_4,"")}}function Cw(i,r){if(1&i){const s=u.EpF();u.TgZ(0,"button",23),u.NdJ("click",function(){return u.CHM(s),u.oxw().Repetir()}),u._UZ(1,"i",24),u.qZA()}}const Aw=function(){return["/home"]};function Sw(i,r){1&i&&(u.TgZ(0,"button",25),u._uU(1,"Salir"),u.qZA()),2&i&&u.Q6J("routerLink",u.DdM(1,Aw))}function Nw(i,r){if(1&i&&(u.TgZ(0,"tr"),u.TgZ(1,"td"),u._uU(2),u.qZA(),u.TgZ(3,"td"),u._uU(4),u.qZA(),u.TgZ(5,"td"),u._uU(6),u.ALo(7,"date"),u.qZA(),u.TgZ(8,"td"),u._uU(9),u.qZA(),u.qZA()),2&i){const s=r.$implicit;u.xp6(2),u.Oqu(s.uemail),u.xp6(2),u.Oqu(s.juego),u.xp6(2),u.Oqu(u.xi3(7,4,s.fecha,"short")),u.xp6(3),u.hij("",s.estado," \xa0\xa0\xa0 ")}}const Pw=[{path:"ahorcado",component:zy,canActivate:[be.i]},{path:"adivinarColor",component:Ry,canActivate:[be.i]},{path:"mayorMenor",component:fw,canActivate:[be.i]},{path:"preguntados",component:(()=>{class i{constructor(s,o){this.apiDigimon=s,this.res=o,this.numero=1,this.vamos=!1,this.puntos=0,this.vidas=4,this.vidasTotal=4,this.win=!1,this.lose=!1,this.mensajeFinal="",this.mensajeWin="",this.mensajeLose="",this.smsFinal=!1,this.pregunta_01=["1","\xbfQui\xe9n es el compa\xf1ero de Tsunomon?","Yagami Taichi","Ishida Yamato","Ash ketchum","Gohan","3"],this.pregunta_02=["2","\xbfQu\xe9 tipo de digimon es Birdramon?","Champion","Rookie","Volador","Fuego","2"],this.pregunta_03=["3","Kabuterimon es la evoluci\xf3n de:","Agumon","Etemon","Palmon","Tentomon","5"],this.pregunta_04=["4","\xbfA quienes protegi\xf3 Wizardmon, dando su vida ?","Sora y Piyomon","Izzy y Tentomon","Tichi y Agumon","Kari y Gatomon","5"],this.pregunta_05=["5","\xbfEn qu\xe9 temporada aparece Imperialdramon?","Digimon Tamers","Digimon Frontier","Digimon Adventure 02","Digimon Adventure","4"],this.pregunta_06=["6","\xbfC\xf3mo se llama el digimon al que Myotismon manipulaba?","Gatomon","Palmon","Leomon","Gabumon","2"],console.log(parseInt(this.pregunta_02[0])),this.apiDigimon.ObtenerDigimon().subscribe(a=>{this.tsunomon=a[1],this.birdramon=a[20],this.kabuterimon=a[22],this.wizardmon=a[74],this.imperialdramon=a[199],this.myotismon=a[58]})}ngOnInit(){}Iniciar(){this.vamos=!0,this.SiguienteRonda(this.numero),console.log("inicio: rta -> ",this.rta)}SiguienteRonda(s){console.log(this.numero),this.numero==parseInt(this.pregunta_01[0])&&(this.hacerPregunta=this.pregunta_01[1],this.boton_1=this.pregunta_01[2],this.boton_2=this.pregunta_01[3],this.boton_3=this.pregunta_01[4],this.boton_4=this.pregunta_01[5],this.imgDigimon=this.tsunomon,this.rta=this.pregunta_01[6]),console.log("pregunta: ",parseInt(this.pregunta_02[0])),console.log("numero: ",this.numero),this.numero==parseInt(this.pregunta_02[0])&&(this.imgDigimon=this.birdramon,this.hacerPregunta=this.pregunta_02[1],this.boton_1=this.pregunta_02[2],this.boton_2=this.pregunta_02[3],this.boton_3=this.pregunta_02[4],this.boton_4=this.pregunta_02[5],this.rta=this.pregunta_02[6]),this.numero==parseInt(this.pregunta_03[0])&&(this.imgDigimon=this.kabuterimon,this.hacerPregunta=this.pregunta_03[1],this.boton_1=this.pregunta_03[2],this.boton_2=this.pregunta_03[3],this.boton_3=this.pregunta_03[4],this.boton_4=this.pregunta_03[5],this.rta=this.pregunta_03[6]),this.numero==parseInt(this.pregunta_04[0])&&(this.imgDigimon=this.wizardmon,this.hacerPregunta=this.pregunta_04[1],this.boton_1=this.pregunta_04[2],this.boton_2=this.pregunta_04[3],this.boton_3=this.pregunta_04[4],this.boton_4=this.pregunta_04[5],this.rta=this.pregunta_04[6]),this.numero==parseInt(this.pregunta_05[0])&&(this.imgDigimon=this.imperialdramon,this.hacerPregunta=this.pregunta_05[1],this.boton_1=this.pregunta_05[2],this.boton_2=this.pregunta_05[3],this.boton_3=this.pregunta_05[4],this.boton_4=this.pregunta_05[5],this.rta=this.pregunta_05[6]),this.numero==parseInt(this.pregunta_06[0])&&(this.imgDigimon=this.myotismon,this.hacerPregunta=this.pregunta_06[1],this.boton_1=this.pregunta_06[2],this.boton_2=this.pregunta_06[3],this.boton_3=this.pregunta_06[4],this.boton_4=this.pregunta_06[5],this.rta=this.pregunta_06[6])}Control(s){s==parseInt(this.rta)&&this.vidas>0&&this.puntos<3?(this.mensajeWin="Correcto!",this.win=!0,this.lose=!1,this.numero++,this.puntos++,this.SiguienteRonda(this.numero)):s!=parseInt(this.rta)&&this.vidas>0&&this.puntos<3&&(this.mensajeLose="Incorrencto!",this.win=!1,this.lose=!0,this.rta="",this.numero++,this.vidas--,this.SiguienteRonda(this.numero)),3===this.puntos&&(this.res.agregarResultado("Win","Preguntados"),this.mensajeFinal="GANASTE!!!",this.rta="",this.smsFinal=!0,this.win=!1,this.lose=!1),0===this.vidas&&(this.res.agregarResultado("Lose","Preguntados"),this.mensajeFinal="Fin del juego!!!",this.rta="",this.smsFinal=!0,this.win=!1,this.lose=!1)}Repetir(){this.numero=1,this.vidas=4,this.puntos=0,this.win=!1,this.lose=!1,this.smsFinal=!1,this.rta="",this.Iniciar()}}return i.\u0275fac=function(s){return new(s||i)(u.Y36(pw),u.Y36(Vi))},i.\u0275cmp=u.Xpm({type:i,selectors:[["app-preguntados"]],decls:37,vars:15,consts:[[1,"container"],[1,"row"],[1,"col-sm-3"],["type","button","class","col btn",3,"click",4,"ngIf"],[3,"src",4,"ngIf"],[4,"ngIf"],["class","mensaje win",4,"ngIf"],["class","mensaje lose",4,"ngIf"],[1,"col-sm-5"],[1,"counter"],["type","submit","class","col btn",3,"click",4,"ngIf"],["type","submit","class","col btn","routerLinkActive","router-link-active",3,"routerLink",4,"ngIf"],[1,"col-sm-4"],[1,"my-5","pt-5","text-muted","text-center","text-small"],[1,"mb-1"],[1,"list-inline"],[1,"list-inline-item"],["href","https://github.com/matirue/miSalaDeJuegos"],["href","https://www.linkedin.com/in/matias-mauro-rueda-b85253180/"],["type","button",1,"col","btn",3,"click"],[3,"src"],[1,"mensaje","win"],[1,"mensaje","lose"],["type","submit",1,"col","btn",3,"click"],[1,"fas","fa-undo"],["type","submit","routerLinkActive","router-link-active",1,"col","btn",3,"routerLink"]],template:function(s,o){1&s&&(u.TgZ(0,"div",0),u.TgZ(1,"div",1),u.TgZ(2,"div",2),u.TgZ(3,"h1"),u._uU(4,"Pregunta:"),u.qZA(),u.YNc(5,gw,2,0,"button",3),u.YNc(6,yw,1,1,"img",4),u.YNc(7,ww,2,1,"h3",5),u.YNc(8,vw,3,1,"div",6),u.YNc(9,bw,3,1,"div",7),u.YNc(10,_w,3,1,"div",7),u.qZA(),u.TgZ(11,"div",8),u.TgZ(12,"span",9),u._uU(13),u.qZA(),u.TgZ(14,"span",9),u._uU(15),u.qZA(),u._UZ(16,"br"),u._UZ(17,"br"),u.YNc(18,xw,2,1,"button",3),u.YNc(19,Tw,2,1,"button",3),u.YNc(20,Iw,2,1,"button",3),u.YNc(21,Ew,2,1,"button",3),u.YNc(22,Cw,2,0,"button",10),u.YNc(23,Sw,2,2,"button",11),u.qZA(),u.TgZ(24,"div",12),u._UZ(25,"app-chat"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(26,"footer",13),u.TgZ(27,"p",14),u._uU(28,"\xa9 Rueda - 2021"),u.qZA(),u.TgZ(29,"ul",15),u.TgZ(30,"li",16),u.TgZ(31,"a",17),u._uU(32,"GitHub"),u.qZA(),u.qZA(),u._uU(33,"- "),u.TgZ(34,"li",16),u.TgZ(35,"a",18),u._uU(36,"LinkedIn"),u.qZA(),u.qZA(),u.qZA(),u.qZA()),2&s&&(u.xp6(5),u.Q6J("ngIf",!o.vamos),u.xp6(1),u.Q6J("ngIf",!o.smsFinal&&o.vamos),u.xp6(1),u.Q6J("ngIf",!o.smsFinal&&o.vamos),u.xp6(1),u.Q6J("ngIf",o.win),u.xp6(1),u.Q6J("ngIf",o.lose),u.xp6(1),u.Q6J("ngIf",o.smsFinal),u.xp6(3),u.hij(" Puntos: ",o.puntos,"/3 - "),u.xp6(2),u.AsE(" Vidas: ",o.vidas,"/",o.vidasTotal,""),u.xp6(3),u.Q6J("ngIf",!o.smsFinal&&o.vamos),u.xp6(1),u.Q6J("ngIf",!o.smsFinal&&o.vamos),u.xp6(1),u.Q6J("ngIf",!o.smsFinal&&o.vamos),u.xp6(1),u.Q6J("ngIf",!o.smsFinal&&o.vamos),u.xp6(1),u.Q6J("ngIf",o.smsFinal),u.xp6(1),u.Q6J("ngIf",o.smsFinal))},directives:[oe.O5,Ca,$e.Od,$e.rH],styles:[".img__container[_ngcontent-%COMP%]{display:flex;flex-flow:column nowrap;align-items:center}img[_ngcontent-%COMP%]{height:250px}div[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{font-size:2rem;font-weight:900;margin-bottom:.5rem}div[_ngcontent-%COMP%]   .counter[_ngcontent-%COMP%]{color:#7b1d1d;font-weight:bold;font-size:1.5rem}div[_ngcontent-%COMP%]   .h1Plabra[_ngcontent-%COMP%]{color:#7b1d1d}div[_ngcontent-%COMP%]   .letters[_ngcontent-%COMP%]{display:flex;flex-flow:row wrap;justify-content:center;padding:.3rem .6rem}div[_ngcontent-%COMP%]   .mensaje[_ngcontent-%COMP%]{border:1px solid #666;font-size:2rem;padding:1rem 2rem;color:#fff;text-align:center;font-weight:900;border-radius:.5rem;background-color:#7b1d1d}div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:1rem;padding:.6rem 1.2rem;background-color:#7b1d1d;margin:.3rem .6rem;border-radius:.5rem;border:1px solid #666;color:#fff;filter:drop-shadow(0px 0px 2px#666);font-weight:400}div[_ngcontent-%COMP%]   .botones_resultados[_ngcontent-%COMP%]{align-items:center;margin-top:1.5rem;display:flex;padding:1rem 2rem;text-align:center;border-radius:.5rem;border:1px solid #666;filter:drop-shadow(0px 1px 2px #666);font-size:1rem;font-weight:700;letter-spacing:.5px;color:#fff;background-color:#7b1d1d}"]}),i})(),canActivate:[be.i]},{path:"resultados",component:(()=>{class i{constructor(s){this.score=s,this.score.cargarResultado().subscribe(()=>{this.auxiliar&&setTimeout(()=>{this.auxiliar.scrollTop=this.auxiliar.scrollHeight},200)})}ngOnInit(){}}return i.\u0275fac=function(s){return new(s||i)(u.Y36(Vi))},i.\u0275cmp=u.Xpm({type:i,selectors:[["app-resultados"]],decls:26,vars:1,consts:[[1,"container","main-container","mt-3"],[1,"table","table-hover"],["scope","col"],[4,"ngFor","ngForOf"],[1,"my-5","pt-5","text-muted","text-center","text-small"],[1,"mb-1"],[1,"list-inline"],[1,"list-inline-item"],["href","https://github.com/matirue/miSalaDeJuegos"],["href","https://www.linkedin.com/in/matias-mauro-rueda-b85253180/"]],template:function(s,o){1&s&&(u.TgZ(0,"div",0),u.TgZ(1,"table",1),u.TgZ(2,"thead"),u.TgZ(3,"tr"),u.TgZ(4,"th",2),u._uU(5,"Jugador"),u.qZA(),u.TgZ(6,"th",2),u._uU(7,"Juego"),u.qZA(),u.TgZ(8,"th",2),u._uU(9,"Fecha"),u.qZA(),u.TgZ(10,"th",2),u._uU(11,"Resultado"),u.qZA(),u._UZ(12,"th",2),u.qZA(),u.qZA(),u.TgZ(13,"tbody"),u.YNc(14,Nw,10,7,"tr",3),u.qZA(),u.qZA(),u.qZA(),u.TgZ(15,"footer",4),u.TgZ(16,"p",5),u._uU(17,"\xa9 Rueda - 2021"),u.qZA(),u.TgZ(18,"ul",6),u.TgZ(19,"li",7),u.TgZ(20,"a",8),u._uU(21,"GitHub"),u.qZA(),u.qZA(),u._uU(22,"- "),u.TgZ(23,"li",7),u.TgZ(24,"a",9),u._uU(25,"LinkedIn"),u.qZA(),u.qZA(),u.qZA(),u.qZA()),2&s&&(u.xp6(14),u.Q6J("ngForOf",o.score.resultados))},directives:[oe.sg],pipes:[oe.uU],styles:[""]}),i})(),canActivate:[be.i]},{path:"encuesta",component:rw,canActivate:[be.i]}];let Ow=(()=>{class i{}return i.\u0275fac=function(s){return new(s||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({imports:[[$e.Bz.forChild(Pw)],$e.Bz]}),i})();var Mw=B(5613);let Lw=(()=>{class i{}return i.\u0275fac=function(s){return new(s||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({imports:[[oe.ez,Ow,X.u5,Mw.z,X.UX]]}),i})()}}]);